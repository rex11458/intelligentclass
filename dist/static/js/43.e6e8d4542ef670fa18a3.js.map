{"version":3,"sources":["webpack:///src/pages/course/note/note.vue","webpack:///./src/pages/course/note/note.vue?29f6","webpack:///./src/pages/course/note/note.vue"],"names":["note","name","components","defineProperty_default","NoteList","r_note","RQuillEditor","r_quill_editor","dialog","Component","props","data","isLoading","dataList","form","CIID","this","$store","getters","courseID","studentID","error","finished","pno","pageSize","total","funType","utils_enum","StudentNote","value","created","mounted","_this","$nextTick","onSearch","methods","getDataList","_this2","reqData","psize","$gatewayHttp","getList","then","res","Result","Datas","length","sort","a","b","CreateTime","forEach","item","push","RowsCount","catch","err","commit","showDetail","$router","path","query","title","content","createTime","dataDelete","e","_this3","stopPropagation","confirm","message","postDelete","snid","$toast","computed","searchData","_this4","filter","r","indexOf","watch","$store.getters.noteRefresh","newVal","oldVal","note_note","render","_vm","_h","$createElement","_c","_self","attrs","id","slot","to","staticClass","_v","placeholder","on","search","model","callback","$$v","expression","refresh","_l","k","key","click","$event","size","color","_s","ref","refInFor","is-class","is-edit","max-height","_f","staticRenderFns","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/43.e6e8d4542ef670fa18a3.js","sourcesContent":["<template>\r\n  <div id=\"note\">\r\n    <head-top title=\"笔记\">\r\n      <router-link slot=\"right\" to=\"/editNote\">\r\n        <i class=\"iconfont icon-add\"></i>\r\n      </router-link>\r\n    </head-top>\r\n\r\n    <div class=\"search-input\">\r\n      <van-search placeholder=\"请输入搜索关键词\" v-model=\"value\" @search=\"onSearch\" />\r\n    </div>\r\n\r\n    <van-pull-refresh v-model=\"isLoading\" @refresh=\"onSearch\" class=\"pull_fresh\">\r\n      <div class=\"main\" v-if=\"searchData.length>0\">\r\n        <div class=\"item\" v-for=\"(item, k) in searchData\" :key=\"k\" @click=\"showDetail(item)\">\r\n          <div class=\"item_operate\" @click=\"dataDelete($event,item)\">\r\n            <van-icon name=\"delete\" size=\"1.8rem\" color=\"#f56c6c\" />\r\n          </div>\r\n          <h3 class=\"title\">{{item['SNTtile']||'缺少标题'}}</h3>\r\n          <r-quill-editor ref=\"REditor\" :funType=\"funType\" :content=\"item['SNContent']\"\r\n            :is-class=\"true\" :is-edit=\"false\" :max-height=\"null\">\r\n          </r-quill-editor>\r\n          <div class=\"time\">{{item['CreateTime'] | formatDate(item['CreateTime']) }}</div>\r\n        </div>\r\n        <div class=\"list_end\">\r\n          再也没有了~\r\n        </div>\r\n      </div>\r\n      <r-lack-data v-else></r-lack-data>\r\n    </van-pull-refresh>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport NoteList from \"@/components/r-note\";\r\nimport RQuillEditor from \"@/components/r-quill-editor\";\r\n\r\n// import \"quill/dist/quill.snow.css\";\r\nimport { Dialog } from \"vant\";\r\nimport { ModulePicture } from \"@/utils/enum\";\r\nexport default {\r\n  name: \"\",\r\n  components: {\r\n    NoteList,\r\n    RQuillEditor,\r\n    [Dialog.Component.name]: Dialog.Component\r\n  },\r\n  props: {},\r\n  data() {\r\n    return {\r\n      isLoading: false,\r\n      dataList: [],\r\n      form: {\r\n        CIID: this.$store.getters.courseID,\r\n        studentID: this.$store.getters.studentID\r\n      },\r\n      error: false,\r\n      finished: false,\r\n      pno: 0,\r\n      pageSize: 100,\r\n      total: 0,\r\n      funType: ModulePicture.StudentNote,\r\n      value: \"\"\r\n    };\r\n  },\r\n  created() {},\r\n  mounted() {\r\n    this.$nextTick(() => {\r\n      this.onSearch();\r\n    });\r\n  },\r\n  methods: {\r\n    getDataList() {\r\n      this.isLoading = true;\r\n      if (this.pno === 0 || this.total > this.pno * this.pageSize) {\r\n        this.pno++;\r\n      } else {\r\n        this.isLoading = false;\r\n        this.finished = true;\r\n        return;\r\n      }\r\n      let reqData = {\r\n        CIID: this.form.CIID,\r\n        studentID: this.$store.getters.studentID,\r\n        psize: this.pageSize,\r\n        pno: this.pno\r\n      };\r\n      this.$gatewayHttp.note\r\n        .getList(reqData)\r\n        .then(res => {\r\n          if (res.Result && res.Datas && res.Datas.length > 0) {\r\n            res.Datas.sort((a, b) => {\r\n              if (a.CreateTime > b.CreateTime) {\r\n                return -1;\r\n              } else {\r\n                return 1;\r\n              }\r\n            });\r\n            res.Datas.forEach(item => {\r\n              this.dataList.push(item);\r\n            });\r\n          }\r\n          if (res.RowsCount) this.total = res.RowsCount;\r\n          if (this.total <= this.pno * this.pageSize) this.finished = true;\r\n          this.isLoading = false;\r\n        })\r\n        .catch(err => {\r\n          this.error = true;\r\n          this.isLoading = false;\r\n        });\r\n      this.$store.commit(\"SET_NOTEREFRESH\", false);\r\n    },\r\n    showDetail(item) {\r\n      this.$router.push({\r\n        path: \"/noteDetail\",\r\n        query: {\r\n          title: item[\"SNTtile\"],\r\n          content: item[\"SNContent\"],\r\n          createTime: item[\"CreateTime\"]\r\n        }\r\n      });\r\n    },\r\n    dataDelete(e, item) {\r\n      e.stopPropagation();\r\n      Dialog.confirm({\r\n        message: \"确认删除此数据？\"\r\n      })\r\n        .then(() => {\r\n          this.$gatewayHttp.note\r\n            .postDelete({ snid: item[\"SNID\"] })\r\n            .then(res => {\r\n              if (res.Result) {\r\n                this.onSearch();\r\n              } else {\r\n                this.$toast(\"删除失败\");\r\n              }\r\n            })\r\n            .catch(err => {\r\n              this.$toast(\"删除失败\");\r\n            });\r\n        })\r\n        .catch(() => {});\r\n    },\r\n    onSearch() {\r\n      this.error = false;\r\n      this.finished = false;\r\n      this.pno = 0;\r\n      this.total = 0;\r\n      this.dataList = [];\r\n      this.getDataList();\r\n    }\r\n  },\r\n  computed: {\r\n    searchData() {\r\n      if (!this.value) {\r\n        return this.dataList;\r\n      } else {\r\n        return this.dataList.filter(\r\n          r =>\r\n            r[\"SNTtile\"].indexOf(this.value) > -1 ||\r\n            r[\"SNContent\"].indexOf(this.value) > -1\r\n        );\r\n      }\r\n    }\r\n  },\r\n  watch: {\r\n    \"$store.getters.noteRefresh\"(newVal, oldVal) {\r\n      if (newVal !== oldVal && newVal) {\r\n        this.onSearch();\r\n      }\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style lang='less' scoped>\r\n@font-title: 1.65rem;\r\n@font-sub-title: 1.275rem;\r\n@font-info: 1.175rem;\r\n#note {\r\n  .head-back {\r\n    display: none;\r\n  }\r\n  .icon-add {\r\n    float: right;\r\n    margin-right: 4vw;\r\n    font-size: 1.8rem;\r\n    line-height: 4.3rem;\r\n    color: #fff;\r\n  }\r\n\r\n  .search-input {\r\n    position: fixed;\r\n    width: 100%;\r\n    top: 4.3rem;\r\n    z-index: 9;\r\n    /deep/ .van-search {\r\n      position: relative;\r\n      &:after {\r\n        content: \"\";\r\n        position: absolute;\r\n        left: 0;\r\n        bottom: 0;\r\n        width: 100%;\r\n        height: 0.1rem;\r\n        background-color: #ccc;\r\n        transform: scaleY(0.3);\r\n      }\r\n    }\r\n  }\r\n\r\n  .pull_fresh {\r\n    padding-top: 54px;\r\n    background: #fff;\r\n  }\r\n\r\n  .main {\r\n    padding: 0.7rem 0.5rem 0;\r\n    .item {\r\n      position: relative;\r\n      padding: 0.5rem 0.9rem;\r\n      margin: 0 0.1rem 0.6rem;\r\n      text-align: left;\r\n      background-color: #fff;\r\n\r\n      &:after {\r\n        content: \" \";\r\n        position: absolute;\r\n        margin: 0 1rem;\r\n        width: calc(100% - 2rem);\r\n        height: 0.1rem;\r\n        left: 0;\r\n        bottom: 0;\r\n        background-color: #ccc;\r\n        transform: scaleY(0.3);\r\n      }\r\n      h3 {\r\n        font-size: @font-title;\r\n        margin: 0;\r\n        line-height: 2.5;\r\n      }\r\n\r\n      .item_operate {\r\n        position: absolute;\r\n        top: 0.25rem;\r\n        right: 2vw;\r\n        padding: 1rem;\r\n      }\r\n\r\n      img {\r\n        width: 160px;\r\n        height: 113px;\r\n      }\r\n      /deep/ .ql-editor {\r\n        padding: 0;\r\n        background: #fff;\r\n        color: #b2bac2;\r\n        font-size: @font-info;\r\n\r\n        overflow: hidden;\r\n        text-overflow: ellipsis;\r\n        display: -webkit-box;\r\n        //这个代表你要在几行显示省略号\r\n        -webkit-line-clamp: 5;\r\n        -webkit-box-orient: vertical;\r\n        word-break: break-all;\r\n        min-height: 1rem;\r\n        max-height: 5 * 1.4 * @font-info;\r\n      }\r\n      .time {\r\n        padding-top: 1.5rem;\r\n        font-size: @font-sub-title;\r\n        color: #888;\r\n      }\r\n    }\r\n\r\n    .list_end {\r\n      text-align: center;\r\n      padding: 1rem;\r\n      color: #2c3e50;\r\n      font-size: @font-sub-title;\r\n    }\r\n  }\r\n}\r\n</style>\n\n\n// WEBPACK FOOTER //\n// src/pages/course/note/note.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"note\"}},[_c('head-top',{attrs:{\"title\":\"笔记\"}},[_c('router-link',{attrs:{\"slot\":\"right\",\"to\":\"/editNote\"},slot:\"right\"},[_c('i',{staticClass:\"iconfont icon-add\"})])],1),_vm._v(\" \"),_c('div',{staticClass:\"search-input\"},[_c('van-search',{attrs:{\"placeholder\":\"请输入搜索关键词\"},on:{\"search\":_vm.onSearch},model:{value:(_vm.value),callback:function ($$v) {_vm.value=$$v},expression:\"value\"}})],1),_vm._v(\" \"),_c('van-pull-refresh',{staticClass:\"pull_fresh\",on:{\"refresh\":_vm.onSearch},model:{value:(_vm.isLoading),callback:function ($$v) {_vm.isLoading=$$v},expression:\"isLoading\"}},[(_vm.searchData.length>0)?_c('div',{staticClass:\"main\"},[_vm._l((_vm.searchData),function(item,k){return _c('div',{key:k,staticClass:\"item\",on:{\"click\":function($event){return _vm.showDetail(item)}}},[_c('div',{staticClass:\"item_operate\",on:{\"click\":function($event){return _vm.dataDelete($event,item)}}},[_c('van-icon',{attrs:{\"name\":\"delete\",\"size\":\"1.8rem\",\"color\":\"#f56c6c\"}})],1),_vm._v(\" \"),_c('h3',{staticClass:\"title\"},[_vm._v(_vm._s(item['SNTtile']||'缺少标题'))]),_vm._v(\" \"),_c('r-quill-editor',{ref:\"REditor\",refInFor:true,attrs:{\"funType\":_vm.funType,\"content\":item['SNContent'],\"is-class\":true,\"is-edit\":false,\"max-height\":null}}),_vm._v(\" \"),_c('div',{staticClass:\"time\"},[_vm._v(_vm._s(_vm._f(\"formatDate\")(item['CreateTime'],item['CreateTime'])))])],1)}),_vm._v(\" \"),_c('div',{staticClass:\"list_end\"},[_vm._v(\"\\n        再也没有了~\\n      \")])],2):_c('r-lack-data')],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-1adcd0dc\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/pages/course/note/note.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-1adcd0dc\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!less-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./note.vue\")\n}\nvar normalizeComponent = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./note.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./note.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-1adcd0dc\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./note.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-1adcd0dc\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/course/note/note.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}