{"version":3,"sources":["webpack:///src/pages/course/quiz/classPractice.vue","webpack:///./src/pages/course/quiz/classPractice.vue?9e8c","webpack:///./src/pages/course/quiz/classPractice.vue"],"names":["classPractice","name","components","DoAnswer","MyAnswer","Survey","props","data","fromID","this","$route","params","id","bankID","bankId","practiceID","operateType","utils_enum","start","practiceInfo","practiceOptions","practiceReply","total","parseInt","practiceAnswer","modulePicture","PractiseAnswer","ableReply","currentIndex","state","ableSwitch","isSurvey","created","$store","getters","type","no","getDataInfo","methods","_this","keys_default","forEach","item","$delete","$gatewayHttp","classPractise","getDataByIndex","studentID","cipID","plid","psSerial","then","res","Result","PSData","PAData","OSData","length","findIndex","r","stringify_default","push","catch","err","getDataInfoById","_this2","getData","psID","getPracticeTypeName","val","Object","nextTo","backTo","answerChange","answer","submitAnswer","_this3","$router","reqData","paid","courseID","paContent","postDataAnswer","submitPractice","Info","$toast","_this4","postDataPractise","success","setTimeout","selectSurvey","_this5","master","postDataSurvey","saMaster","$set","$refs","resetVal","computed","showDoAnswer","showMyAnswer","indexOf","showSurvey","surveyMaster","watch","$store.getters.classPractice","newVal","oldVal","init","survey","acceptAnswer","$nextTick","height","document","body","clientHeight","documentElement","scrollTop","quiz_classPractice","render","_vm","_h","$createElement","_c","_self","attrs","title","_v","staticClass","_s","_l","k","key","_e","question-type","question-option","answer-value","module-picture","on","change","my-answer","analysis","true-answer","get-score","ref","disable","directives","rawName","value","expression","click","$event","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/42.22696803396de9ce74da.js","sourcesContent":["<template>\r\n  <div id=\"cs-pra\">\r\n    <head-top title=\"随堂练习\"></head-top>\r\n    <div class=\"main\">\r\n      <div class=\"content\">\r\n        <div class=\"tt\">\r\n          {{currentIndex + '.【' + getPracticeTypeName(practiceInfo['PSType']) + '】' + (practiceInfo['PSScore']||0) + '分'}}\r\n        </div>\r\n\r\n        <div class=\"ct\">{{practiceInfo['PSContent']}}</div>\r\n        <div v-if=\"practiceInfo['PSType']===1 || practiceInfo['PSType']===2 \" class=\"ans\">\r\n          <div class=\"an\" v-for=\"(item, k) in practiceOptions\" :key=\"k\">\r\n            <span>{{ item['SOSerial']}}：</span>\r\n            <span>{{item['SOContent']}}</span>\r\n            <!-- {{ item['SOSerial'] +'：'+ item['SOContent']}} -->\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <do-answer v-if=\"showDoAnswer\" :question-type=\"practiceInfo['PSType']\"\r\n        :question-option=\"practiceInfo['PSOption']\" :ableReply=\"ableReply\"\r\n        :answer-value=\"practiceAnswer\" :module-picture=\"modulePicture\" @change=\"answerChange\">\r\n      </do-answer>\r\n      <my-answer v-if=\"showMyAnswer\" :question-type=\"practiceInfo['PSType']\"\r\n        :my-answer=\"practiceAnswer\" :module-picture=\"modulePicture\"\r\n        :analysis=\"practiceInfo['PSanalysis']\" :true-answer=\"practiceInfo['PSAnswer']\"\r\n        :get-score=\"practiceReply? practiceReply['PAScore'] : null\"></my-answer>\r\n\r\n      <survey ref=\"survey\" v-if=\"showSurvey\" :disable=\"practiceInfo['State'] !== 4\"\r\n        :master=\"surveyMaster\" @selectSurvey=\"selectSurvey\">\r\n      </survey>\r\n      <div class=\"footer\" v-show=\"ableSwitch\">\r\n        <button v-show=\"currentIndex> 1\" @click=\"submitAnswer(-1)\">上一题</button>\r\n        <button v-if=\"currentIndex< total\" @click=\"submitAnswer(1)\">下一题</button>\r\n        <button v-else-if=\"ableReply && state===2 \" @click=\"submitAnswer(1)\">提交答案</button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport DoAnswer from \"@/components/Question/DoAnswer\";\r\nimport MyAnswer from \"@/components/Question/MyAnswer\";\r\nimport Survey from \"@/components/Question/Survey\";\r\n\r\nimport { practiceTypeName, ModulePicture, PracticeFunc } from \"@/utils/enum\";\r\nexport default {\r\n  name: \"\",\r\n  components: { DoAnswer, MyAnswer, Survey },\r\n  props: {},\r\n  data() {\r\n    return {\r\n      fromID: this.$route.params.id,\r\n      bankID: this.$route.params.bankId,\r\n      practiceID: \"\",\r\n      operateType: PracticeFunc.start, //操作步骤 1开始答题 2获取提问和答题 3下发答案和解析 4调研\r\n      practiceInfo: {},\r\n      practiceOptions: [],\r\n      practiceReply: {},\r\n      total: parseInt(this.$route.params.total || \"1\"),\r\n      practiceAnswer: \"\",\r\n      modulePicture: ModulePicture.PractiseAnswer,\r\n      ableReply: false,\r\n      currentIndex: 1,\r\n      state: parseInt(this.$route.params.state || 1),\r\n      ableSwitch: true,\r\n      isSurvey: false\r\n    };\r\n  },\r\n  created() {\r\n    // 从其它页面进入， 当前界面为更新操作\r\n    if (!this.$route.params || !this.$route.params.state) {\r\n      this.operateType =\r\n        this.$store.getters.classPractice.type || PracticeFunc.start;\r\n      this.currentIndex = this.$store.getters.classPractice.no || 1;\r\n      this.total = parseInt(\r\n        this.$store.getters.classPractice.total || this.currentIndex\r\n      );\r\n\r\n      if (this.$store.getters.classPractice.type === PracticeFunc.start) {\r\n        this.state = 2;\r\n      }\r\n    }\r\n    this.getDataInfo();\r\n  },\r\n  methods: {\r\n    getDataInfo() {\r\n      Object.keys(this.practiceInfo).forEach(item => {\r\n        this.$delete(this.practiceInfo, item);\r\n      });\r\n      Object.keys(this.practiceReply).forEach(item => {\r\n        this.$delete(this.practiceReply, item);\r\n      });\r\n      this.practiceOptions = [];\r\n      this.$gatewayHttp.classPractise\r\n        .getDataByIndex({\r\n          studentID: this.$store.getters.studentID,\r\n          cipID: this.fromID,\r\n          plid: this.bankID,\r\n          psSerial: this.currentIndex\r\n        })\r\n        .then(res => {\r\n          if (res.Result) {\r\n            this.practiceInfo = res.PSData;\r\n            this.practiceReply = res.PAData ? res.PAData : {};\r\n            this.isSurvey = res[\"IsSurvey\"] || false;\r\n            this.practiceAnswer = this.practiceReply[\"PAContent\"];\r\n\r\n            this.ableReply = this.practiceInfo && this.state === 2; //必须答题状态为2\r\n\r\n            this.practiceOptions = [];\r\n            if (res.OSData && res.OSData.length > 0) {\r\n              res.OSData.forEach(item => {\r\n                let index = this.practiceOptions.findIndex(\r\n                  r => JSON.stringify(r) === JSON.stringify(item)\r\n                );\r\n                if (index === -1) this.practiceOptions.push(item);\r\n              });\r\n            }\r\n          }\r\n        })\r\n        .catch(err => {});\r\n    },\r\n    getDataInfoById() {\r\n      this.practiceInfo = {};\r\n      this.practiceReply = {};\r\n      this.practiceOptions = [];\r\n      this.$gatewayHttp.classPractise\r\n        .getData({\r\n          studentID: this.$store.getters.studentID,\r\n          psID: this.practiceID,\r\n          cipID: this.fromID\r\n        })\r\n        .then(res => {\r\n          if (res.Result) {\r\n            this.practiceInfo = res.PSData;\r\n            this.practiceReply = res.PAData ? res.PAData : {};\r\n            this.practiceAnswer = this.practiceReply[\"PAContent\"];\r\n            this.ableReply =\r\n              this.practiceReply && this.practiceReply[\"PAContent\"]\r\n                ? false\r\n                : true;\r\n            if (res.OSData && res.OSData.length > 0) {\r\n              res.OSData.forEach(item => {\r\n                this.practiceOptions.push(item);\r\n              });\r\n            }\r\n          }\r\n        })\r\n        .catch(err => {});\r\n    },\r\n    getPracticeTypeName(val) {\r\n      return practiceTypeName(val);\r\n    },\r\n    nextTo() {\r\n      this.currentIndex += 1;\r\n    },\r\n    backTo() {\r\n      this.currentIndex -= 1;\r\n    },\r\n    answerChange(answer) {\r\n      this.practiceAnswer = answer;\r\n    },\r\n    submitAnswer(val) {\r\n      // if (val < 0) {\r\n      //   this.practiceAnswer = \"\";\r\n      //   this.currentIndex += val;\r\n      //   this.getDataInfo();\r\n      //   return;\r\n      // } else\r\n      if (!this.ableReply) {\r\n        if (this.currentIndex >= this.total && val >= 0) {\r\n          this.$router.push(\"/quiz\");\r\n        }\r\n        this.currentIndex += val;\r\n        this.practiceAnswer = \"\";\r\n        this.getDataInfo();\r\n        return;\r\n      }\r\n      if (!this.practiceAnswer) {\r\n        this.$toast(\"请先作答\");\r\n      } else {\r\n        let reqData = {\r\n          cipID: this.fromID,\r\n          paid: this.practiceReply[\"PAID\"] || \"\",\r\n          courseID: this.$store.getters.courseID,\r\n          psID: this.practiceInfo[\"PSID\"],\r\n          studentID: this.$store.getters.studentID,\r\n          paContent: this.practiceAnswer\r\n        };\r\n        this.$gatewayHttp.classPractise\r\n          .postDataAnswer(reqData)\r\n          .then(res => {\r\n            if (res.Result) {\r\n              if (this.currentIndex === this.total && val > 0) {\r\n                if (this.state === 4) {\r\n                  this.$router.push(\"/quiz\");\r\n                } else {\r\n                  this.submitPractice();\r\n                }\r\n              } else {\r\n                this.currentIndex += val;\r\n                this.practiceAnswer = \"\";\r\n                if (this.currentIndex > this.total) this.$router.push(\"/quiz\");\r\n                this.getDataInfo();\r\n              }\r\n            } else if (res.Info) {\r\n              this.$toast(res.Info);\r\n            }\r\n          })\r\n          .catch(err => {\r\n            this.$toast(\"提交失败，请重试\");\r\n          });\r\n      }\r\n    },\r\n    submitPractice() {\r\n      let reqData = {\r\n        // courseID: this.$store.getters.courseID,\r\n        cipID: this.$route.params.id,\r\n        studentID: this.$store.getters.studentID\r\n      };\r\n\r\n      this.$gatewayHttp.classPractise\r\n        .postDataPractise(reqData)\r\n        .then(res => {\r\n          if (res.Result) {\r\n            this.$toast.success(\"交卷成功\");\r\n            setTimeout(() => {\r\n              this.$router.push(\"/quiz\");\r\n            }, 500);\r\n          }\r\n        })\r\n        .catch(err => {\r\n          this.$toast(\"提交失败，请重试\");\r\n        });\r\n    },\r\n    selectSurvey(val) {\r\n      let master = val ? 1 : 0;\r\n      this.$gatewayHttp.classPractise\r\n        .postDataSurvey({\r\n          paid: this.practiceReply[\"PAID\"],\r\n          studentID: this.$store.getters.studentID,\r\n          saMaster: master\r\n        })\r\n        .then(res => {\r\n          this.$set(this.practiceReply, \"PAMaster\", master);\r\n          this.$refs[\"survey\"].resetVal(master);\r\n          this.$toast.success(\"提交问卷成功\");\r\n        })\r\n        .catch(err => {\r\n          this.$toast(\"提交失败，请重试\");\r\n        });\r\n    }\r\n  },\r\n  computed: {\r\n    showDoAnswer() {\r\n      if (this.operateType === PracticeFunc.start) {\r\n        return this.practiceInfo && this.state === 2;\r\n      } else {\r\n        return false;\r\n      }\r\n    },\r\n    showMyAnswer() {\r\n      if (this.operateType === PracticeFunc.start) {\r\n        return this.practiceInfo && [3, 4].indexOf(this.state) > -1;\r\n      } else {\r\n        return true;\r\n      }\r\n    },\r\n    showSurvey() {\r\n      return this.isSurvey && this.practiceAnswer;\r\n      // // 没有作答 没权限调研\r\n      // if (!this.practiceAnswer) {\r\n      //   return false;\r\n      // } else if (this.operateType === PracticeFunc.survey) {\r\n      //   return true;\r\n      // } else if (this.operateType === PracticeFunc.start) {\r\n      //   return this.practiceInfo && [3, 4].indexOf(this.state) > -1;\r\n      // // } else if (this.isSurvey) {\r\n      // //   return true;\r\n      // } else {\r\n      //   return false;\r\n      // }\r\n    },\r\n    surveyMaster() {\r\n      if (this.practiceReply) {\r\n        return !this.practiceReply[\"PAMaster\"] &&\r\n          this.practiceReply[\"PAMaster\"] !== 0\r\n          ? null\r\n          : this.practiceReply[\"PAMaster\"] || 0;\r\n      }\r\n      return null;\r\n    }\r\n  },\r\n  watch: {\r\n    \"$store.getters.classPractice\"(newVal, oldVal) {\r\n      // console.log(\"newVal:\", newVal);\r\n      if (newVal !== oldVal) {\r\n        this.operateType = newVal.type || PracticeFunc.start;\r\n\r\n        if (this.operateType === PracticeFunc.start) {\r\n          this.fromID = newVal.id || \"\";\r\n          this.currentIndex = newVal.no || 1;\r\n          this.state = 2; //开始答题，肯定可以答题\r\n          this.total = newVal.total || this.currentIndex;\r\n          this.getDataInfo();\r\n          this.ableSwitch = true;\r\n        } else if (this.operateType === PracticeFunc.init) {\r\n          this.fromID = newVal.id || \"\";\r\n          this.currentIndex = newVal.no || 1;\r\n\r\n          this.state = 4;\r\n          this.total =\r\n            this.total > this.currentIndex ? this.total : this.currentIndex;\r\n          this.getDataInfo();\r\n          this.ableSwitch = false;\r\n        } else {\r\n          this.practiceID = newVal.id || \"\";\r\n          this.getDataInfoById();\r\n          this.ableSwitch = false;\r\n        }\r\n\r\n        //  console.log(\"operateStep:\", this.operateType);\r\n        if (\r\n          this.operateType === PracticeFunc.survey ||\r\n          this.operateType === PracticeFunc.acceptAnswer\r\n        ) {\r\n          this.isSurvey = this.operateType === PracticeFunc.survey;\r\n\r\n          this.$nextTick(() => {\r\n            let height = document.body.clientHeight;\r\n            document.documentElement.scrollTop = height;\r\n            setTimeout(() => {\r\n              document.documentElement.scrollTop = height;\r\n            }, 1000);\r\n          });\r\n        }\r\n      }\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style lang='less' scoped>\r\n@import url(\"./../../../styles/common/base.less\");\r\n#cs-pra {\r\n  width: 100%;\r\n  min-height: 98vh;\r\n  padding-bottom: 2vh;\r\n  background: #ebf0ef;\r\n  .main {\r\n    text-align: left;\r\n    .content {\r\n      width: 92vw;\r\n      background: rgba(255, 255, 255, 1);\r\n      padding: 4vw;\r\n      color: #333333;\r\n      font-size: @font-sub-title;\r\n      margin-bottom: 2vh;\r\n      word-break: break-all;\r\n      .tt {\r\n        margin-bottom: 15px;\r\n      }\r\n      .ct {\r\n        text-indent: 2em;\r\n        margin-bottom: 15px;\r\n      }\r\n      .ans {\r\n        padding-left: 10px;\r\n        .an {\r\n          display: flex;\r\n          margin-bottom: 10px;\r\n        }\r\n      }\r\n    }\r\n\r\n    .footer {\r\n      display: flex;\r\n      justify-content: space-around;\r\n      padding-top: 20px;\r\n      button {\r\n        background: rgba(0, 203, 171, 1);\r\n        border-radius: 5px;\r\n        font-size: @font-info;\r\n        line-height: 3;\r\n        color: #fff;\r\n        padding: 0 15px;\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>\n\n\n// WEBPACK FOOTER //\n// src/pages/course/quiz/classPractice.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"cs-pra\"}},[_c('head-top',{attrs:{\"title\":\"随堂练习\"}}),_vm._v(\" \"),_c('div',{staticClass:\"main\"},[_c('div',{staticClass:\"content\"},[_c('div',{staticClass:\"tt\"},[_vm._v(\"\\n        \"+_vm._s(_vm.currentIndex + '.【' + _vm.getPracticeTypeName(_vm.practiceInfo['PSType']) + '】' + (_vm.practiceInfo['PSScore']||0) + '分')+\"\\n      \")]),_vm._v(\" \"),_c('div',{staticClass:\"ct\"},[_vm._v(_vm._s(_vm.practiceInfo['PSContent']))]),_vm._v(\" \"),(_vm.practiceInfo['PSType']===1 || _vm.practiceInfo['PSType']===2 )?_c('div',{staticClass:\"ans\"},_vm._l((_vm.practiceOptions),function(item,k){return _c('div',{key:k,staticClass:\"an\"},[_c('span',[_vm._v(_vm._s(item['SOSerial'])+\"：\")]),_vm._v(\" \"),_c('span',[_vm._v(_vm._s(item['SOContent']))])])}),0):_vm._e()]),_vm._v(\" \"),(_vm.showDoAnswer)?_c('do-answer',{attrs:{\"question-type\":_vm.practiceInfo['PSType'],\"question-option\":_vm.practiceInfo['PSOption'],\"ableReply\":_vm.ableReply,\"answer-value\":_vm.practiceAnswer,\"module-picture\":_vm.modulePicture},on:{\"change\":_vm.answerChange}}):_vm._e(),_vm._v(\" \"),(_vm.showMyAnswer)?_c('my-answer',{attrs:{\"question-type\":_vm.practiceInfo['PSType'],\"my-answer\":_vm.practiceAnswer,\"module-picture\":_vm.modulePicture,\"analysis\":_vm.practiceInfo['PSanalysis'],\"true-answer\":_vm.practiceInfo['PSAnswer'],\"get-score\":_vm.practiceReply? _vm.practiceReply['PAScore'] : null}}):_vm._e(),_vm._v(\" \"),(_vm.showSurvey)?_c('survey',{ref:\"survey\",attrs:{\"disable\":_vm.practiceInfo['State'] !== 4,\"master\":_vm.surveyMaster},on:{\"selectSurvey\":_vm.selectSurvey}}):_vm._e(),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.ableSwitch),expression:\"ableSwitch\"}],staticClass:\"footer\"},[_c('button',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.currentIndex> 1),expression:\"currentIndex> 1\"}],on:{\"click\":function($event){return _vm.submitAnswer(-1)}}},[_vm._v(\"上一题\")]),_vm._v(\" \"),(_vm.currentIndex< _vm.total)?_c('button',{on:{\"click\":function($event){return _vm.submitAnswer(1)}}},[_vm._v(\"下一题\")]):(_vm.ableReply && _vm.state===2 )?_c('button',{on:{\"click\":function($event){return _vm.submitAnswer(1)}}},[_vm._v(\"提交答案\")]):_vm._e()])],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-395fe34a\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/pages/course/quiz/classPractice.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-395fe34a\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!less-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./classPractice.vue\")\n}\nvar normalizeComponent = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./classPractice.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./classPractice.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-395fe34a\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./classPractice.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-395fe34a\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/course/quiz/classPractice.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}