{"version":3,"sources":["webpack:///src/pages/source/course-vedio/live.vue","webpack:///./src/pages/source/course-vedio/live.vue?2fcc","webpack:///./src/pages/source/course-vedio/live.vue","webpack:///./src/assets/LiveEnd.png"],"names":["live","components","PlayBox","__webpack_require__","e","then","bind","data","barShow","timer","LiveEnd","IsLiveEnd","IsMuted","url","LiveTaskInfo","ListenTimer","config","full","name","mounted","_this","this","$route","query","LoadData","window","setInterval","Listen","beforeDestroy","clearTimeout","onresize","hub","off","Stop","watch","newVal","_this2","setTimeout","methods","showHeader","ChangeMuted","$refs","Player","Muted","goback","$router","push","IsHubOn","$this","on","jsonInfo","rbInfo","JSON","parse","ClsRoomID","RBConfigInfo","ClsRoom","LiveEstate","console","log","Pause","Dispose","_this3","asyncToGenerator_default","regenerator_default","a","mark","_callee","res","exeinfo","wrap","_context","prev","next","$mainHttp","LiveTask","GetData","liveid","id","sent","Data","ExeInfo","$set","$root","SrvConfigInfo","LiveHost","LivePort","stop","course_vedio_live","render","_vm","_h","$createElement","_c","_self","staticClass","directives","rawName","value","expression","click","$event","stopPropagation","attrs","_v","_s","_e","ref","IsLive","Videos","SelectAble","IsControl","autoFull","update:Videos","update:videos","src","fit","staticRenderFns","Component","normalizeComponent","ssrContext","__webpack_exports__","module","exports","p"],"mappings":"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","file":"static/js/17.2894b22015a47d3c335a.js","sourcesContent":["<template>\r\n  <div class=\"live\">\r\n    <div class=\"handle-bar\" v-show=\"IsLiveEnd\">\r\n      <div class=\"bar-l\">\r\n        <div class=\"back\" @click.stop=\"goback\">\r\n          <van-icon name=\"arrow-left\" />\r\n          <span>{{ name }}</span>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <PlayBox\r\n      ref=\"Player\"\r\n      :IsLive=\"true\"\r\n      v-if=\"!IsLiveEnd\"\r\n      :IsMuted=\"false\"\r\n      :Videos.sync=\"url\"\r\n      :SelectAble=\"false\"\r\n      :IsControl=\"false\"\r\n      :autoFull=\"true\"\r\n      :name=\"name\"\r\n    />\r\n    <van-image :src=\"LiveEnd\" fit=\"none\" v-show=\"IsLiveEnd\" />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  components: {\r\n    PlayBox: () => import(\"@/components/Player/PlayBox.vue\")\r\n  },\r\n  data() {\r\n    return {\r\n      barShow: false,\r\n      timer: 0,\r\n      LiveEnd: require(\"@/assets/LiveEnd.png\"),\r\n      IsLiveEnd: false,\r\n      IsMuted: false,\r\n      url: \"\",\r\n      LiveTaskInfo: null,\r\n      ListenTimer: null,\r\n      config: \"\",\r\n      full: false,\r\n      name: \"返回\"\r\n    };\r\n  },\r\n  mounted() {\r\n    this.url = \"\";\r\n    this.name = this.$route.query.name;\r\n    // this.url =\r\n    //   \"http://192.168.0.235/18090618470170391501210082082258/20062817424229591301029016388554.flv\";\r\n    this.LoadData();\r\n    this.ListenTimer = window.setInterval(() => {\r\n      this.Listen();\r\n    }, 1000);\r\n  },\r\n  beforeDestroy() {\r\n    clearTimeout(this.timer);\r\n    window.onresize = null;\r\n    if (window.hub) {\r\n      window.hub.off(\"ReceiveRBStatus\", null);\r\n    }\r\n    this.Stop();\r\n  },\r\n  watch: {\r\n    barShow(newVal) {\r\n      if (newVal === true) {\r\n        this.timer = setTimeout(() => {\r\n          this.barShow = false;\r\n        }, 3000);\r\n      }\r\n    }\r\n  },\r\n\r\n  methods: {\r\n    showHeader() {\r\n      this.barShow = true;\r\n    },\r\n    ChangeMuted() {\r\n      this.IsMuted = !this.IsMuted;\r\n      this.$refs.Player.Muted(this.IsMuted);\r\n    },\r\n    goback() {\r\n      this.url = \"\";\r\n      this.$router.push(\"/home-source\");\r\n    },\r\n    Listen() {\r\n      if (!this.IsHubOn) {\r\n        if (window.hub) {\r\n          this.IsHubOn = true;\r\n          const $this = this;\r\n          window.hub.on(\"ReceiveRBStatus\", function(jsonInfo) {\r\n            if ($this.LiveTaskInfo) {\r\n              var rbInfo = JSON.parse(jsonInfo);\r\n              // console.log($this.LiveTaskInfo);\r\n              if (rbInfo) {\r\n                if (\r\n                  rbInfo.ClsRoomID ===\r\n                  $this.LiveTaskInfo.RBConfigInfo.ClsRoom.ClsRoomID\r\n                ) {\r\n                  // console.log(rbInfo.LiveEstate);\r\n                  if (rbInfo.LiveEstate !== 1) {\r\n                    $this.IsLiveEnd = true;\r\n                    $this.Stop();\r\n                  }\r\n                }\r\n              }\r\n            }\r\n          });\r\n        }\r\n      }\r\n    },\r\n    Stop() {\r\n      this.url = \"\";\r\n      if (this.$refs.Player) {\r\n        console.log(\"释放监听\");\r\n        this.$refs.Player.Pause();\r\n        this.$refs.Player.Dispose();\r\n      }\r\n    },\r\n    async LoadData() {\r\n      const res = await this.$mainHttp.LiveTask.GetData({\r\n        liveid: this.$route.query.id\r\n      });\r\n      if (res && res.Data) {\r\n        this.LiveTaskInfo = res.Data;\r\n        if (this.LiveTaskInfo.ExeInfo) {\r\n          const exeinfo = JSON.parse(this.LiveTaskInfo.ExeInfo);\r\n          this.$set(this.LiveTaskInfo, \"ExeInfo\", exeinfo);\r\n          if (this.LiveTaskInfo.LiveEstate === 2) {\r\n            this.url = `http://${this.$root.SrvConfigInfo.LiveHost}:${this.$root.SrvConfigInfo.LivePort}${exeinfo}.flv`;\r\n            console.log(this.url);\r\n          } else {\r\n            this.IsLiveEnd = true;\r\n          }\r\n        }\r\n      } else {\r\n        this.IsLiveEnd = true;\r\n      }\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style lang=\"less\">\r\n.live {\r\n  color: #fff;\r\n  background-color: black;\r\n  width: 100%;\r\n  height: 100%;\r\n  .van-image {\r\n    position: absolute;\r\n    left: 50%;\r\n    top: 50%;\r\n    margin-left: -140px;\r\n    margin-top: -153.5px;\r\n  }\r\n  .back {\r\n    .van-icon-arrow-left {\r\n      font-size: 16px;\r\n    }\r\n  }\r\n}\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/pages/source/course-vedio/live.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"live\"},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.IsLiveEnd),expression:\"IsLiveEnd\"}],staticClass:\"handle-bar\"},[_c('div',{staticClass:\"bar-l\"},[_c('div',{staticClass:\"back\",on:{\"click\":function($event){$event.stopPropagation();return _vm.goback($event)}}},[_c('van-icon',{attrs:{\"name\":\"arrow-left\"}}),_vm._v(\" \"),_c('span',[_vm._v(_vm._s(_vm.name))])],1)])]),_vm._v(\" \"),(!_vm.IsLiveEnd)?_c('PlayBox',{ref:\"Player\",attrs:{\"IsLive\":true,\"IsMuted\":false,\"Videos\":_vm.url,\"SelectAble\":false,\"IsControl\":false,\"autoFull\":true,\"name\":_vm.name},on:{\"update:Videos\":function($event){_vm.url=$event},\"update:videos\":function($event){_vm.url=$event}}}):_vm._e(),_vm._v(\" \"),_c('van-image',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.IsLiveEnd),expression:\"IsLiveEnd\"}],attrs:{\"src\":_vm.LiveEnd,\"fit\":\"none\"}})],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-43d719e2\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/pages/source/course-vedio/live.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-43d719e2\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!less-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./live.vue\")\n}\nvar normalizeComponent = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./live.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./live.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-43d719e2\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./live.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/source/course-vedio/live.vue\n// module id = null\n// module chunks = ","module.exports = __webpack_public_path__ + \"static/img/LiveEnd.20551fc.png\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/assets/LiveEnd.png\n// module id = m6i9\n// module chunks = 17"],"sourceRoot":""}