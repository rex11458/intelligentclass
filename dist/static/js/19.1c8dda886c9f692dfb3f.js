webpackJsonp([19],{CYbk:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});a("WJbf");var s,n=a("OhwO"),i=a("bOdI"),o=a.n(i),c=(a("3Lne"),a("SSsa")),r=a("bBUo"),u=a("XhFK"),l=a.n(u),m=a("FwVa"),d={name:"",components:(s={},o()(s,c.a.name,c.a),o()(s,"headTop",r.a),s),props:{},data:function(){return{score:0,good:0,dataList:[],contentType:m.b.Text,contentTypeDefault:m.b.Text,content:"",imgBase:"",defaultPhotoImg:l.a,groupName:this.$route.params.name,imagePreview:null}},created:function(){this.getDataStatics(),this.getDataDetail()},methods:{preview:function(t){this.imagePreview=Object(n.a)({images:[t],showIndex:!1,onClose:function(){}})},getDataStatics:function(){var t=this,e={groupID:this.$route.params.groupId,subjectID:this.$route.params.id};this.$mainHttp.groupDiscussion.getStatistic(e).then(function(e){e.Result&&(e.TotalGood&&(t.good=e.TotalGood||0),e.TotalScore&&(t.score=e.TotalScore||0),e.Data&&(t.contentType=e.Data.GSForm,t.content=e.Data.GSContent))}).catch(function(t){})},getDataDetail:function(){var t=this;this.dataList=[];var e={gsid:this.$route.params.id};this.$mainHttp.groupDiscussion.getData(e).then(function(e){e.Result&&e.GAData&&e.GAData.length>0&&e.GAData.forEach(function(e){t.dataList.push(e)})}).catch(function(t){})},getDiscussionImage:function(t){return this.$mainHttp.resourse.picture(t,m.g.GroupSubject)},getImageFile:function(t){return this.$mainHttp.resourse.picture(t,m.g.GroupDiscuss)}},beforeDestroy:function(){this.imagePreview&&this.imagePreview.close()}},h={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"group-discussion"},[a("head-top",{attrs:{title:t.groupName}},[a("router-link",{attrs:{to:"/history/teamRank/"+t.$route.params.id+"/"+t.$route.params.groupId+"/"+t.$route.params.name}},[a("i",{staticClass:"iconfont iconchengyuan"})])],1),t._v(" "),a("div",{staticClass:"summary"},[a("div",[t._v("\n      得分数:\n      "),a("span",[t._v(t._s(t.score))])]),t._v(" "),a("div",[t._v("\n      点赞数:\n      "),a("span",[t._v(t._s(t.good))])])]),t._v(" "),a("div",{ref:"chat",staticClass:"chat"},[a("div",{staticClass:"chat_title"},[a("span",{staticClass:"chat_title_left"},[t._v("[论题]")]),t._v(" "),t.contentType===t.contentTypeDefault?a("span",[t._v(t._s(t.content))]):a("img",{style:{maxWidth:"70vw",maxHeight:"15rem"},attrs:{src:t.getDiscussionImage(t.content)},on:{click:function(e){t.preview(t.getDiscussionImage(t.content))}}})]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.dataList&&t.dataList.length>0,expression:"dataList && dataList.length>0"}],staticClass:"chat_content"},t._l(t.dataList,function(e,s){return a("div",{key:s,class:e.StudentID!==t.$store.getters.studentID?"chat_item left_item":"chat_item right_item"},[a("div",{staticClass:"chat_icon"},[a("img",{attrs:{src:t.defaultPhotoImg}})]),t._v(" "),a("div",{staticClass:"chat_news"},[a("div",{staticClass:"chat_news_name"},[t._v(t._s(e.StudentName))]),t._v(" "),a("div",{staticClass:"chat_news_cont"},[e.Key.GDForm===t.contentTypeDefault?a("span",[t._v(t._s(e.Key.GDContent))]):a("img",{attrs:{src:t.getImageFile(e.Key.GDContent),alt:""},on:{click:function(a){t.preview(t.getImageFile(e.Key.GDContent))}}})])])])}),0)])],1)},staticRenderFns:[]};var g=a("VU/8")(d,h,!1,function(t){a("e4SV")},"data-v-5a1c37a4",null);e.default=g.exports},e4SV:function(t,e){}});
//# sourceMappingURL=19.1c8dda886c9f692dfb3f.js.map