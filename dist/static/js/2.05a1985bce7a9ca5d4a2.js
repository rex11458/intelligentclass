webpackJsonp([2],{"162o":function(e,t,n){(function(e){var s=void 0!==e&&e||"undefined"!=typeof self&&self||window,i=Function.prototype.apply;function a(e,t){this._id=e,this._clearFn=t}t.setTimeout=function(){return new a(i.call(setTimeout,s,arguments),clearTimeout)},t.setInterval=function(){return new a(i.call(setInterval,s,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},a.prototype.unref=a.prototype.ref=function(){},a.prototype.close=function(){this._clearFn.call(s,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},n("mypn"),t.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==e&&e.clearImmediate||this&&this.clearImmediate}).call(t,n("DuR2"))},"8JHg":function(e,t){},JK0B:function(e,t,n){"use strict";var s=n("bOdI"),i=n.n(s),a=(n("3Lne"),n("SSsa")),o={components:i()({},a.a.name,a.a),props:{master:{type:Number,default:null},disable:{type:Boolean,default:!0}},data:function(){return{value:this.master}},created:function(){},methods:{clickSurvey:function(e){this.$emit("selectSurvey",e)},resetVal:function(e){this.value=e}},watch:{master:function(e,t){this.value=e}}},u={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"survey_info"},[n("van-button",{directives:[{name:"show",rawName:"v-show",value:-1===[0,1].indexOf(e.value)||1===e.value,expression:"[0,1].indexOf(value)===-1 || value===1"}],attrs:{icon:"success",type:"primary",disabled:[0,1].indexOf(e.value)>-1&&e.disable},on:{click:function(t){return e.clickSurvey(!0)}}},[e._v("已掌握")]),e._v(" "),n("van-button",{directives:[{name:"show",rawName:"v-show",value:-1===[0,1].indexOf(e.value)||0===e.value,expression:"[0,1].indexOf(value)===-1  || value===0"}],attrs:{icon:"cross",type:"danger",disabled:[0,1].indexOf(e.value)>-1&&e.disable},on:{click:function(t){return e.clickSurvey(!1)}}},[e._v("未掌握")])],1)},staticRenderFns:[]};var r=n("VU/8")(o,u,!1,function(e){n("8JHg")},"data-v-5c517285",null);t.a=r.exports},"Y+1g":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=n("mvHQ"),i=n.n(s),a=n("fZjL"),o=n.n(a),u=n("bOdI"),r=n.n(u),c=(n("nOaS"),n("pIDD")),l=n("bBUo"),p=n("1wEQ"),d=n("udYK"),f=n("Hvz8"),h=n("JK0B"),m=n("FwVa"),v=n("162o"),y={name:"",components:r()({headTop:l.a,RImage:p.a,DoAnswer:d.a,MyAnswer:f.a,Survey:h.a},c.a.name,c.a),props:{},data:function(){return{questionID:this.$route.params.id,operateStep:m.i.init,questionInfo:{},questionPattern:m.j.all,questionOperate:{},ableResponder:!1,responderResult:!1,responderLoading:!1,img:"",currentIndex:3,contentType:m.b.Text,contentTypeDefault:m.b.Text,modulePicture:m.g.ScreenAnswer,ableReply:!1}},created:function(){this.getInitRouter()},mounted:function(){var e=this;this.$nextTick(function(){e.getQuestionData()})},methods:{getQuestionData:function(){var e=this;o()(this.questionInfo).forEach(function(t){e.$delete(e.questionInfo,t)}),o()(this.questionOperate).forEach(function(t){e.$delete(e.questionOperate,t)}),this.$gatewayHttp.screenQustion.getData({ssid:this.questionID,studentID:this.$store.getters.studentID}).then(function(t){t.Result&&t.Data&&(e.questionInfo=JSON.parse(i()(t.Data[0].Key)),e.questionOperate=JSON.parse(i()(t.Data[0].Value)),e.ableReply=!e.questionOperate||!e.questionOperate.SAContent,e.contentType=e.questionOperate.SAForm||e.contentTypeDefault,e.questionPattern=e.questionInfo.SSPattern||m.j.all,e.img=e.$gatewayHttp.resourse.picture(e.questionInfo.SSContent,m.g.ScreenSubject))}).catch(function(e){})},getPatternName:function(e){return Object(m.m)(e)},getQuestionTypeName:function(e){return Object(m.n)(e)},getInitRouter:function(){this.currentIndex=this.$route.params.id},sbumit:function(){var e=this;!this.responderLoading&&this.ableResponder&&(this.responderLoading=!0,this.$gatewayHttp.screenQustion.postDataResponder({ssid:this.questionInfo.SSID,studentID:this.$store.getters.studentID}).then(function(t){t.Result?(e.responderResult=!0,Object(v.setTimeout)(function(){e.getQuestionData(),e.operateStep=m.i.responderReply},1e3)):e.responderResult=!1,e.responderLoading=!1,e.ableResponder=!1}).catch(function(t){e.responderLoading=!1,e.ableResponder=!0}))},answerChange:function(e){this.contentType=e.contentType,this.questionOperate.SAContent=e.content},submitAnswer:function(){var e=this;this.questionOperate.SAContent?this.$gatewayHttp.screenQustion.postDataAnswer({said:this.questionOperate.SAID,ssid:this.questionInfo.SSID,ssPattern:this.questionPattern,studentID:this.$store.getters.studentID,saForm:this.contentType,saContent:this.questionOperate.SAContent}).then(function(t){t.Result?(e.$toast.success("作答成功"),Object(v.setTimeout)(function(){e.ableReply=!1},200)):t.IsAnswer&&e.$toast.success("您已作答, 请勿再答")}).catch(function(t){e.$toast("提交失败，请重试")}):this.$toast("请先作答")},selectSurvey:function(e){var t=this;this.$gatewayHttp.screenQustion.postDataSurvey({ssid:this.questionInfo.SSID,studentID:this.$store.getters.studentID,saMaster:e?1:0}).then(function(e){t.$toast.success("提交问卷成功"),Object(v.setTimeout)(function(){t.getQuestionData()},1e3)}).catch(function(e){t.$toast("提交失败，请重试")})}},computed:{showResponder:function(){return this.questionPattern===m.j.responder&&this.operateStep===m.i.responder&&1===this.questionInfo.State},showDoAnswer:function(){return!!this.ableReply&&(this.questionPattern===m.j.responder?this.operateStep===m.i.responderReply&&1===this.questionInfo.State&&this.responderResult:this.operateStep===m.i.init&&1===this.questionInfo.State)},showMyAnswer:function(){return!this.ableReply||(this.operateStep===m.i.acceptAnswer||this.operateStep===m.i.survey||this.operateStep===m.i.init&&[2,3].indexOf(this.questionInfo.State)>-1)},showSurvey:function(){return this.questionPattern===m.j.all&&(!(!this.questionOperate||!this.questionOperate.SAContent)&&(this.operateStep===m.i.survey||this.operateStep===m.i.init&&1!==this.questionInfo.State))}},watch:{"$store.getters.screenQuestion":function(e,t){if(e!==t){this.operateStep=e.type||m.i.init,this.ableResponder=this.operateStep===m.i.responder;var n=this.questionID!==e.id;this.questionID=e.id||"",this.operateStep===m.i.init||this.operateStep===m.i.acceptAnswer?this.getQuestionData():n&&this.getQuestionData()}}}},g={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"capture-quize"}},[n("head-top",{attrs:{title:"截屏提问"}}),e._v(" "),n("div",{staticClass:"main"},[n("div",{staticClass:"top"},[n("div",{staticClass:"tt"},[n("span",{staticClass:"info fL"},[e._v(e._s(e.questionInfo.SSSerial)+".["+e._s(e.getQuestionTypeName(e.questionInfo.SSType))+"] "+e._s(e.questionInfo.SSScore)+"分")]),e._v(" "),n("span",{class:3===e.questionPattern?"red":"green"},[e._v(e._s(e.getPatternName(e.questionPattern)))]),e._v(" "),n("span",{staticClass:"time fR"},[e._v("计时 ："+e._s(e.questionInfo.SSTime)+"分钟")])]),e._v(" "),n("div",{staticClass:"bg"},[n("r-image",{attrs:{width:"92vw",height:"33vh",src:e.img}})],1)]),e._v(" "),e.showResponder?n("div",{staticClass:"responder"},[e.ableResponder?n("div",[n("div",{staticClass:"prompt"},[e._v("请点击下方按钮进行抢答")]),e._v(" "),n("div",{staticClass:"qiangdabg",on:{click:e.sbumit}},[e.responderLoading?n("van-loading",{attrs:{type:"spinner",color:"#1989fa"}},[e._v("抢答中")]):e._e()],1)]):n("div",{class:e.responderResult?"qd_sucess":"qd_fail"},[e._v(e._s(e.responderResult?"":"抢答失败"))])]):n("div",[e.showDoAnswer?n("do-answer",{attrs:{"question-type":e.questionInfo.SSType,"question-option":e.questionInfo.SSOption,ableReply:e.ableReply,"answer-type":e.contentType,"answer-value":e.questionOperate.SAContent,"module-picture":e.modulePicture},on:{change:e.answerChange}},[n("div",{directives:[{name:"show",rawName:"v-show",value:1===e.questionInfo.State&&e.ableReply,expression:"questionInfo['State']===1 && ableReply"}]},[n("button",{staticClass:"sbumit",on:{click:e.submitAnswer}},[e._v("提 交")])])]):e._e(),e._v(" "),e.showMyAnswer?n("my-answer",{attrs:{"question-type":e.questionInfo.SSType,"my-answer":e.questionOperate.SAContent,"answer-type":e.contentType,"module-picture":e.modulePicture,"true-answer":e.questionInfo.SSAnswer,"get-score":e.questionOperate.SAScore,comment:e.questionOperate.Comment||""}}):e._e(),e._v(" "),e.showSurvey?n("survey",{ref:"survey",attrs:{disable:3!==e.questionInfo.State,master:e.questionOperate.SAMaster},on:{selectSurvey:e.selectSurvey}}):e._e()],1)])],1)},staticRenderFns:[]};var w=n("VU/8")(y,g,!1,function(e){n("mieA")},"data-v-275dde0e",null);t.default=w.exports},aMu3:function(e,t){},mieA:function(e,t){},mypn:function(e,t,n){(function(e,t){!function(e,n){"use strict";if(!e.setImmediate){var s,i,a,o,u,r=1,c={},l=!1,p=e.document,d=Object.getPrototypeOf&&Object.getPrototypeOf(e);d=d&&d.setTimeout?d:e,"[object process]"==={}.toString.call(e.process)?s=function(e){t.nextTick(function(){h(e)})}:!function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?e.MessageChannel?((a=new MessageChannel).port1.onmessage=function(e){h(e.data)},s=function(e){a.port2.postMessage(e)}):p&&"onreadystatechange"in p.createElement("script")?(i=p.documentElement,s=function(e){var t=p.createElement("script");t.onreadystatechange=function(){h(e),t.onreadystatechange=null,i.removeChild(t),t=null},i.appendChild(t)}):s=function(e){setTimeout(h,0,e)}:(o="setImmediate$"+Math.random()+"$",u=function(t){t.source===e&&"string"==typeof t.data&&0===t.data.indexOf(o)&&h(+t.data.slice(o.length))},e.addEventListener?e.addEventListener("message",u,!1):e.attachEvent("onmessage",u),s=function(t){e.postMessage(o+t,"*")}),d.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var i={callback:e,args:t};return c[r]=i,s(r),r++},d.clearImmediate=f}function f(e){delete c[e]}function h(e){if(l)setTimeout(h,0,e);else{var t=c[e];if(t){l=!0;try{!function(e){var t=e.callback,s=e.args;switch(s.length){case 0:t();break;case 1:t(s[0]);break;case 2:t(s[0],s[1]);break;case 3:t(s[0],s[1],s[2]);break;default:t.apply(n,s)}}(t)}finally{f(e),l=!1}}}}}("undefined"==typeof self?void 0===e?this:e:self)}).call(t,n("DuR2"),n("W2nU"))},udYK:function(e,t,n){"use strict";var s,i=n("bOdI"),a=n.n(i),o=(n("k3b4"),n("+2ln")),u=(n("jti4"),n("uk7J")),r=n("FwVa"),c=n("0xDb"),l=n("j/ZV"),p={components:(s={},a()(s,u.a.name,u.a),a()(s,o.a.name,o.a),s),props:{questionType:{type:Number,default:1},questionOption:{type:Number,default:0},btnName:{type:String,default:"提交"},ableReply:{type:Boolean,default:!0},answerType:{type:Number,default:1},modulePicture:{type:Number,default:1},answerValue:{type:String,default:""}},data:function(){return{judgeChoice:["对","错"],multiValue:this.selectValue?this.selectValue.split(""):[],selectValue:this.answerValue,contentType:this.answerType,imgBase:""}},mounted:function(){var e=this;this.$nextTick(function(){window.uploadImage=function(t){e.afterRead(t)}})},methods:{selectImage:function(){Object(l.b)(l.a.albumOpen,"")},selectAnswer:function(e){if(this.ableReply){if(2===this.questionType){var t=this.multiValue.indexOf(e);t>-1?this.multiValue.splice(t,1):this.multiValue.push(e),this.selectValue=this.multiValue.sort().join("")}else this.selectValue=e;this.backValue()}},answerChange:function(){this.backValue()},backValue:function(){this.$emit("change",{contentType:this.contentType,content:this.selectValue})},deleteImage:function(){this.contentType=this.answerType,this.selectValue="",this.backValue()},afterRead:function(e){var t=this;if(4===this.questionType){if(e.length>20971520)return this.$toast("请上传小于20M的图片"),!1;if(e){var n={funType:this.modulePicture,imgBaseString:e};this.$gatewayHttp.resourse.upload(n).then(function(n){n.Result&&(t.contentType=r.b.Picture,t.imgBase=e,t.selectValue=n.Data,t.backValue())}).catch(function(e){})}}},getImageFile:function(e){this.$gatewayHttp.resourse.picture(e,this.modulePicture)}},computed:{txtLength:function(){return this.selectValue.length},selectOptions:function(){return 1===this.questionType?Object(c.f)(this.questionOption):2===this.questionType?Object(c.f)(this.questionOption):3===this.questionType?this.judgeChoice:void 0}},watch:{answerType:function(e,t){e!==this.contentType&&(this.contentType=e)},answerValue:function(e,t){e!==this.selectValue&&(this.selectValue=e)}}},d={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[1===e.questionType?n("div",{staticClass:"selects"},[n("div",{staticClass:"content"},[n("div",{staticClass:"prompt"},[e._v("请选择正确的答案")]),e._v(" "),n("div",{staticClass:"all-select"},e._l(e.selectOptions,function(t,s){return n("div",{key:s,staticClass:"select-item",class:e.answerValue===t?"singel-selected":"",on:{click:function(n){return e.selectAnswer(t)}}},[e._v(e._s(t))])}),0)])]):2===e.questionType?n("div",{staticClass:"selects"},[n("div",{staticClass:"content"},[n("div",{staticClass:"prompt"},[e._v("请选择正确的答案")]),e._v(" "),n("div",{staticClass:"all-select"},e._l(e.selectOptions,function(t,s){return n("div",{key:s,staticClass:"select-item",class:e.answerValue.indexOf(t)>-1?"singel-selected":"",on:{click:function(n){return e.selectAnswer(t)}}},[e._v(e._s(t))])}),0)])]):3===e.questionType?n("div",{staticClass:"answers"},[n("div",{staticClass:"tt"},[e._v("请选择正确的答案")]),e._v(" "),n("div",{staticClass:"buttons"},e._l(e.selectOptions,function(t,s){return n("div",{key:s,class:e.answerValue===t?"selected":"",on:{click:function(n){return e.selectAnswer(t)}}},[e._v(e._s(t))])}),0)]):n("div",{staticClass:"answers"},[n("div",{staticClass:"tt"},[e._v("\n      请将您的答案写在下方的文本框中\n      "),2===e.contentType&&e.selectValue&&e.ableReply?n("van-icon",{staticClass:"answer_delete",attrs:{name:"delete",size:"1.5rem",color:"#f44"},on:{click:e.deleteImage}}):e._e()],1),e._v(" "),1===e.contentType||2===e.contentType&&!e.selectValue?n("div",{staticClass:"input"},[n("textarea",{directives:[{name:"model",rawName:"v-model",value:e.selectValue,expression:"selectValue"}],attrs:{type:"text",maxlength:"240",placeholder:"请输入作答内容..."},domProps:{value:e.selectValue},on:{input:[function(t){t.target.composing||(e.selectValue=t.target.value)},e.answerChange]}}),e._v(" "),n("i",{staticClass:"iconfont icontupian",on:{click:e.selectImage}}),e._v(" "),n("span",[e._v(e._s(e.txtLength)+"/240")])]):n("div",{staticClass:"answer_img"},[e.imgBase?n("img",{attrs:{src:e.imgBase,alt:""}}):n("img",{attrs:{src:e.getImageFile(e.selectValue),alt:""}})])]),e._v(" "),e._t("default")],2)},staticRenderFns:[]};var f=n("VU/8")(p,d,!1,function(e){n("aMu3")},"data-v-e87d0162",null);t.a=f.exports}});
//# sourceMappingURL=2.05a1985bce7a9ca5d4a2.js.map