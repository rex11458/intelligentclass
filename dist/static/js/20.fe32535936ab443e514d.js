webpackJsonp([20],{Bi2d:function(t,e){},KHMi:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i("bOdI"),n=i.n(a),o=(i("XmAh"),i("il3B")),s=i("j/ZV"),r={name:"",components:n()({},o.a.name,o.a),props:{routeType:{type:String,default:"course"}},data:function(){return{dataList:[],show:!1,selectIndex:-1,loading:!1}},created:function(){},mounted:function(){var t=this;this.$nextTick(function(){t.getDataList()})},methods:{showPopup:function(t){this.selectIndex=t,this.show=!0},getDataList:function(){var t=this;this.dataList=[],this.loading=!0,this.$mainHttp.courseware.getList({ciID:this.$store.getters.courseID}).then(function(e){e.Result&&e.Datas&&e.Datas.length>0&&e.Datas.forEach(function(e){t.dataList.push(e)}),t.loading=!1}).catch(function(e){t.loading=!1})},download:function(){var t=this.dataList[this.selectIndex],e=this.$mainHttp.resourse.file(t.MaterialID);window.webkit?(this.show=!1,Object(s.b)(s.a.downloadFile,e).then(function(t){}).catch(function(t){})):(window.location.href=e,this.show=!1,this.$toast("下载开始"))},previewFile:function(){var t=this,e=this.dataList[this.selectIndex];e.MaterialFileSize>15728640?o.a.confirm({title:"提示",message:"超过15MB的文档，建议您下载到本地查看",confirmButtonText:"关闭",cancelButtonText:"下载",cancelButtonColor:"#909399"}).then(function(){}).catch(function(){t.download(e),t.show=!1}):this.toPreviewUrl(e)},toPreviewUrl:function(t){"course"===this.routeType?this.$router.push("/coursewareView/"+t.MaterialID+"/"+t.MaterialFileExt+"/"+t.MaterialName):this.$router.push("/history/coursewareView/"+t.MaterialID+"/"+t.MaterialFileExt+"/"+t.MaterialName)}},computed:{},watch:{}},l={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"courseware"}},[i("head-top",{attrs:{title:"课件"}}),t._v(" "),i("van-pull-refresh",{staticClass:"pull_fresh",on:{refresh:t.getDataList},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},[i("div",{staticClass:"main"},[t._l(t.dataList,function(e,a){return i("van-cell",{key:a,attrs:{"arrow-direction":"down","is-link":""},on:{click:function(e){return t.showPopup(a)}}},[i("template",{slot:"title"},[i("div",{staticClass:"item"},[i("div",[i("i",{staticClass:"iconfont icon-word"}),t._v(" "),i("span",{staticClass:"title time"},[t._v("\n                "+t._s(e.MaterialName+"."+e.MaterialFileExt)+"\n              ")])]),t._v(" "),i("div",{staticClass:"size time"},[e.MaterialFileSize>1048576?i("span",[t._v("\n                "+t._s(Math.round(e.MaterialFileSize/1024/1024))+" MB\n              ")]):i("span",[t._v("\n                "+t._s(Math.round(e.MaterialFileSize/1024))+" KB\n              ")])])])])],2)}),t._v(" "),t.loading?i("van-loading",{attrs:{type:"spinner",color:"#1989fa"}},[t._v("加载中...")]):t.dataList&&0!==t.dataList.length?t._e():i("r-lack-data")],2)]),t._v(" "),i("van-popup",{attrs:{position:"bottom"},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[i("van-cell",{attrs:{value:"预览"},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.previewFile(e)}}},[i("van-icon",{attrs:{slot:"right-icon","class-prefix":"iconfont icon-yulan"},slot:"right-icon"})],1),t._v(" "),i("van-cell",{attrs:{value:"下载"},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.download(e)}}},[i("van-icon",{attrs:{slot:"right-icon","class-prefix":"iconfont icon-xiazai"},slot:"right-icon"})],1)],1)],1)},staticRenderFns:[]};var c={name:"",components:{RCourseware:i("VU/8")(r,l,!1,function(t){i("Bi2d")},"data-v-f7d57c78",null).exports},data:function(){return{}},created:function(){},mounted:function(){},methods:{},computed:{},watch:{}},u={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("r-courseware",{attrs:{"route-type":"course"}})],1)},staticRenderFns:[]},d=i("VU/8")(c,u,!1,null,null,null);e.default=d.exports}});
//# sourceMappingURL=20.fe32535936ab443e514d.js.map