webpackJsonp([5],{"7ttc":function(t,e,a){t.exports=a.p+"static/img/liveStart.50c5090.png"},CvcH:function(t,e){},D3di:function(t,e){},EDxe:function(t,e){},ExDr:function(t,e){},LDBG:function(t,e){},MZST:function(t,e){},OXko:function(t,e,a){t.exports=a.p+"static/img/liveOver.30cab4c.png"},PLAK:function(t,e){},coA1:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("Xxa5"),i=a.n(n),s=a("exGp"),o=a.n(s),r={data:function(){return{rData:[],loading:!1,finished:!1,refreshing:!1,pno:1,BG:a("snXv")}},mounted:function(){},methods:{LoadData:function(){var t=this;return o()(i.a.mark(function e(){var a,n;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.refreshing&&(t.refreshing=!1),e.next=3,t.$mainHttp.ElaborateCourses.GetLatelyDatas({psize:20,pno:t.pno});case 3:(a=e.sent).Datas&&(t.pno=t.pno+1,n=t.$mainHttp.common.downloadURL(),a.Datas.forEach(function(e){t.rData.push({videoSrc:n+"?filename="+e.MaterialID+"&fileType=9",watchNum:e.Info.Visits,name:e.Info.ECTitle,id:e.Info.ECID})})),a&&a.Datas||(a.RowsCount=0),t.loading=!1,t.rData.length>=a.RowsCount&&(t.finished=!0);case 8:case"end":return e.stop()}},e,t)}))()},onRefresh:function(){this.finished=!1,this.loading=!0,this.rData=[],this.pno=1,this.LoadData()},ToVideo:function(t){this.$router.push({name:"sourceRecorded",params:{id:t}})}}},c={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"recent-view "},[a("van-pull-refresh",{on:{refresh:t.onRefresh},model:{value:t.refreshing,callback:function(e){t.refreshing=e},expression:"refreshing"}},[a("van-list",{staticClass:"display-wrap",attrs:{finished:t.finished,offset:50},on:{load:t.LoadData},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},t._l(t.rData,function(e,n){return a("div",{key:n,staticClass:"main-live",on:{click:function(a){return t.ToVideo(e.id)}}},[a("div",{attrs:{name:"text"}},[a("van-image",{attrs:{src:e.videoSrc}},[a("img",{attrs:{slot:"error",src:t.BG,alt:""},slot:"error"})])],1),t._v(" "),a("div",{staticClass:"text-title"},[a("p",[t._v(t._s(e.name))]),t._v(" "),a("p",[t._v(t._s(e.watchNum)+"次播放")])])])}),0)],1)],1)},staticRenderFns:[]};var l=a("VU/8")(r,c,!1,function(t){a("obIe")},null,null).exports,u={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"my-subscribe"},t._l(t.data,function(e,n){return a("div",{key:n,staticClass:"content",on:{click:t.ToSrc}},[a("img",{attrs:{src:e.src,alt:""}}),t._v(" "),a("div",[a("p",{staticClass:"title"},[t._v(t._s(e.name))]),t._v(" "),a("p",{staticClass:"teacher"},[t._v("授课老师: "+t._s(e.teacher))]),t._v(" "),a("van-button",{attrs:{round:"",type:"info"}},[t._v("取消订阅")])],1),t._v(" "),a("div",{staticClass:"slider"})])}),0)},staticRenderFns:[]};var v=a("VU/8")({data:function(){return{data:[{src:"https://img.yzcdn.cn/vant/cat.jpeg",name:"5G改变未来社会",teacher:"王志民"},{src:"https://img.yzcdn.cn/vant/cat.jpeg",name:"5G改变未来社会",teacher:"王志民"},{src:"https://img.yzcdn.cn/vant/cat.jpeg",name:"5G改变未来社会",teacher:"王志民"}]}},methods:{ToSrc:function(){this.$router.push("/source/course-vedio/detail")}}},u,!1,function(t){a("CvcH")},null,null).exports,f=a("GMXM"),d={props:["isPause"],components:{MySource:function(){return a.e(61).then(a.bind(null,"WYN6"))},PlayBox:function(){return a.e(60).then(a.bind(null,"ov3Z"))}},data:function(){return{hotData:[],videoSrc:"",courseList:[],randoms:[],down:""}},watch:{isPause:function(t){t&&this.$refs.PlayBox.Pause()}},mounted:function(){var t=[new Date(Date.now()+8.64*Math.pow(10,7)*-30),new Date];this.start=Object(f.a)(t[0],"yyyy-MM-dd"),this.end=Object(f.a)(t[1],"yyyy-MM-dd"),this.down=this.$mainHttp.common.downloadURL(),this.LoadData(),this.GetCatory()},methods:{ErrB:function(t,e){this.randoms[t].data[e].imgUrl=a("snXv")},ErrA:function(t){this.hotData[t].videoSrc=a("snXv")},GoLessonDetail:function(){this.$router.push("/source/lesson-detail")},LoadData:function(){var t=this;return o()(i.a.mark(function e(){var a;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$mainHttp.ElaborateCourses.GetECDatas({key:"",psize:6,pno:t.pno,stime:t.start,etime:t.end,sKey:"",type:""});case 2:(a=e.sent).Result&&(t.pno++,t.LoadVideo(a.Datas[0].Info.ECID),a.Datas.forEach(function(e,a){e.Info.ECInfo&&(e.Info.ECInfo=JSON.parse(e.Info.ECInfo)),a<6&&t.hotData.push({id:e.Info.ECID,watchNum:e.Info.Visits,name:e.Info.ECTitle,videoSrc:t.down+"?filename="+e.MaterialID+"&fileType=9"})}));case 4:case"end":return e.stop()}},e,t)}))()},LoadVideo:function(t){var e=this;return o()(i.a.mark(function a(){var n,s;return i.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return n="http://"+e.$root.SrvConfigInfo.VODHost+":"+e.$root.SrvConfigInfo.VODPort,a.next=3,e.$mainHttp.ElaborateCourses.GetData({ecid:t});case 3:(s=a.sent)&&s.Materials&&(e.videoSrc=n+"/vod/"+s.Materials[0].MaterialStorePath);case 5:case"end":return a.stop()}},a,e)}))()},GetCatory:function(){var t=this;return o()(i.a.mark(function e(){var a,n,s;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.randoms=[],e.next=3,t.$mainHttp.Metadata.GetTrees({code:"JPKCLM"});case 3:if(!(a=e.sent).Result){e.next=13;break}n=0;case 6:if(!(n<a.Datas.length)){e.next=13;break}if("JPKCLM"===(s=a.Datas[n]).MetadataCode){e.next=10;break}return e.delegateYield(i.a.mark(function e(){var a,n;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$mainHttp.ElaborateCourses.GetECDatas({key:"",psize:6,pno:t.pno,stime:t.start,etime:t.end,sKey:"",type:s.MetadataCode});case 2:a=e.sent,n=[],a&&a.Datas&&a.Datas.forEach(function(e){n.push({id:e.Info.ECID,imgUrl:t.down+"?filename="+e.MaterialID+"&fileType=9",name:e.Info.ECTitle,watchNum:e.Info.Visits})}),t.randoms.push({value:s.MetadataCode,label:s.MetadataName,data:n});case 6:case"end":return e.stop()}},e,t)})(),"t0",10);case 10:n++,e.next=6;break;case 13:case"end":return e.stop()}},e,t)}))()},ToVideo:function(t){this.$router.push({name:"sourceRecorded",params:{id:t}})}}},h={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"course-suggest"},[a("PlayBox",{ref:"PlayBox",attrs:{Videos:t.videoSrc,SelectAble:!1},on:{"update:Videos":function(e){t.videoSrc=e},"update:videos":function(e){t.videoSrc=e}}}),t._v(" "),a("div",{staticClass:"content hot-course"},[t._m(0),t._v(" "),a("div",{staticClass:"main"},t._l(t.hotData,function(e,n){return a("div",{key:n,on:{click:function(a){return t.ToVideo(e.id)}}},[a("div",{attrs:{name:"text"}},[a("img",{attrs:{src:e.videoSrc,alt:""},on:{error:function(e){return t.ErrA(n)}}})]),t._v(" "),a("div",{staticClass:"text-title"},[a("p",[t._v(t._s(e.name))]),t._v(" "),a("p",[t._v(t._s(e.watchNum)+"次播放")])])])}),0)]),t._v(" "),t._l(t.randoms,function(e,n){return a("div",{key:n,staticClass:"content hot-course "},[a("div",{staticClass:"nav"},[a("i",{staticClass:"iconfont icon-shu",staticStyle:{float:"left"}},[t._v(t._s(e.label))])]),t._v(" "),a("div",{staticClass:"main"},t._l(e.data,function(e,i){return a("div",{key:i,attrs:{span:"12"},on:{click:function(a){return t.ToVideo(e.id)}}},[a("div",{attrs:{name:"text"}},[a("img",{attrs:{src:e.imgUrl,alt:""},on:{error:function(e){return t.ErrB(n,i)}}})]),t._v(" "),a("div",{staticClass:"text-title"},[a("p",[t._v(t._s(e.name))]),t._v(" "),a("p",[t._v(t._s(e.watchNum)+"次播放")])])])}),0)])})],2)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"nav"},[e("i",{staticClass:"iconfont icon-shu",staticStyle:{float:"left"}},[this._v("热门课程")])])}]};var p={data:function(){return{active:0,liveList:[],livePlan:[],liveBG:a("jatd"),planBG:a("snXv"),evalBG:a("7ttc"),overBG:a("OXko"),EvalList:[],liveOver:[],dateRange:"",pagePlan:1,pageOver:1,pageSize:20,loading:!1,finished:!1,refreshing:!1,loadingA:!1,finishedA:!1,refreshingA:!1,IsHubOn:!1,showDetail:!1,detailData:"",timer:0,timerGO:null,countDownTime:"",LiveStartTime:"",down:""}},mounted:function(){var t=this;this.down=this.$mainHttp.common.downloadURL(),this.dateRange=[new Date(Date.now()),new Date(Date.now()+8.64*Math.pow(10,7)*7)],this.LoadData(),this.LoadEvalData(),this.ListenTimer=window.setInterval(function(){t.Listen()},1e3)},beforeDestroy:function(){window.onresize=null,window.hub&&(window.hub.off("ReceiveRBStatus",null),console.log("释放监听")),window.clearInterval(this.timer),this.timerGO=null,this.timer=null},methods:{Listen:function(){if(!this.IsHubOn&&window.hub){this.IsHubOn=!0;var t=this;window.hub.on("ReceiveRBStatus",function(e){var a=JSON.parse(e);if(a&&a.ClsRoomID){if(t.liveList){var n=t.liveList.findIndex(function(t){return t.ClsRoomID===a.ClsRoomID});if(1===a.LiveEstate){if(n<0){if(a.ScheduleInfo){var i=JSON.parse(a.ScheduleInfo);t.$set(a,"ScheduleInfo",i),"["===i.Teachers.slice(0,1)&&this.$set(i,"Teachers",JSON.parse(i.Teachers))}t.liveList.push(a)}}else n>=0&&t.liveList.splice(n,1)}if(t.EvalList){var s=t.EvalList.findIndex(function(t){return t.LiveID===a.LiveTaskID});s>=0&&t.EvalList.splice(s,1)}}})}},Remind:function(t,e,a){var n=this;return o()(i.a.mark(function s(){var o;return i.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(!t.LRID){i.next=7;break}return i.next=3,n.$mainHttp.LiveTask.DelLiveRemind({lrid:t.LRID});case 3:i.sent&&(t.LRID=""),i.next=11;break;case 7:return i.next=9,n.$mainHttp.LiveTask.AddLiveRemind({liveTaskId:e,livePlanId:a});case 9:(o=i.sent)&&(t.LRID=o.LRID);case 11:case"end":return i.stop()}},s,n)}))()},LoadData:function(){var t=this;return o()(i.a.mark(function e(){var a;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$mainHttp.RBConfig.GetLiving();case 2:(a=e.sent)&&a.Datas&&(a.Datas.forEach(function(e){if(e.ScheduleInfo){var a=JSON.parse(e.ScheduleInfo);t.$set(e,"ScheduleInfo",a),a.Teachers&&"["===a.Teachers.slice(0,1)&&t.$set(a,"Teachers",JSON.parse(a.Teachers))}t.$set(e,"imgUrl",t.down+"?filename="+e.LiveTaskID+"&fileType=101")}),t.liveList=a.Datas);case 4:case"end":return e.stop()}},e,t)}))()},LoadEvalData:function(){var t=this;return o()(i.a.mark(function e(){var a;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.EvalList=[],e.next=3,t.$mainHttp.LiveTask.GetEvalTasks();case 3:return e.next=5,e.sent;case 5:(a=e.sent)&&a.Data&&(a.Data.forEach(function(e){if(e.ScheduleInfo){var a=JSON.parse(e.ScheduleInfo);t.$set(e,"ScheduleInfo",a),"["===a.Teachers.slice(0,1)&&t.$set(a,"Teachers",JSON.parse(a.Teachers)),e.RBConfigInfo&&t.$set(e,"RBConfigInfo",JSON.parse(e.RBConfigInfo))}}),t.EvalList=a.Data);case 7:case"end":return e.stop()}},e,t)}))()},LoadLivePlan:function(){var t=this;return o()(i.a.mark(function e(){var a,n,s;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.refreshing&&(t.refreshing=!1),a=Object(f.a)(t.dateRange[0],"yyyy-MM-dd"),n=Object(f.a)(t.dateRange[1],"yyyy-MM-dd"),e.next=5,t.$mainHttp.LiveTask.GetLivePlan({start:a,end:n,pno:t.pagePlan,psize:t.pageSize});case 5:(s=e.sent)&&s.Datas&&(t.pagePlan++,s.Datas.forEach(function(e){t.livePlan.push(e)})),s&&s.Datas||(s.RowsCount=0),t.loading=!1,t.livePlan.length>=s.RowsCount&&(t.finished=!0);case 10:case"end":return e.stop()}},e,t)}))()},Loadover:function(){var t=this;return o()(i.a.mark(function e(){var a,n,s;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.refreshingA&&(t.refreshingA=!1),a=Object(f.a)(t.dateRange[0],"yyyy-MM-dd"),n=Object(f.a)(t.dateRange[1],"yyyy-MM-dd"),e.next=5,t.$mainHttp.LiveTask.GetOverLive({start:a,end:n,pno:t.pageOver,psize:t.pageSize});case 5:(s=e.sent)&&s.Datas&&(t.pageOver++,s.Datas.forEach(function(e){if(e.ScheduleInfo){var a=JSON.parse(e.ScheduleInfo);t.$set(e,"ScheduleInfo",a),"["===a.Teachers.slice(0,1)&&t.$set(a,"Teachers",JSON.parse(a.Teachers))}e.RBConfigInfo&&t.$set(e,"RBConfigInfo",JSON.parse(e.RBConfigInfo)),t.liveOver.push(e)})),s&&s.Datas||(s.RowsCount=0),t.loadingA=!1,t.liveOver.length>=s.RowsCount&&(t.finishedA=!0);case 10:case"end":return e.stop()}},e,t)}))()},onRefresh:function(){this.finished=!1,this.loading=!0,this.livePlan=[],this.pagePlan=1,this.LoadLivePlan()},onRefreshA:function(){this.finishedA=!1,this.loadingA=!0,this.liveOver=[],this.pageOver=1,this.Loadover()},TabClick:function(){this.showDetail=!1},ToDetail:function(t){var e=this;return o()(i.a.mark(function a(){var n,s,o;return i.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return e.showDetail=!0,a.next=3,e.$mainHttp.LiveTask.GetEvalTaskInfo({lid:t});case 3:(n=a.sent)&&n.Datas&&((s=n.Datas[0].Task)&&(o=JSON.parse(s.ScheduleInfo),e.$set(s,"ScheduleInfo",o),"["===o.Teachers.slice(0,1)&&e.$set(o,"Teachers",JSON.parse(o.Teachers))),e.detailData=s,e.detailData.t=s.ScheduleInfo.Teachers.toString()),e.countDownTimer();case 6:case"end":return a.stop()}},a,e)}))()},ToPage:function(t){var e=document.querySelector(".live-name").textContent;this.$router.push({path:"/source/live",query:{id:t,name:e}})},countDownTimer:function(){var t=this;this.timer=setInterval(function(){t.countDown()},1e3)},countDown:function(){var t=this,e=new Date,a=this.detailData.LiveStart;a=a.slice(6,-2);var n=Object(f.b)(e,new Date(Number(a)));n.h<=0&&n.m<=0&&n.s<=0?(this.countDownTime="直播开始了,准备跳转~~",this.timerGO=setTimeout(function(){t.$router.push({path:"/source/live/"+t.detailData.LiveID})},5e3)):this.countDownTime="<em>"+n.h+"</em>时<em>"+n.m+"</em>分<em>"+n.s+"</em>秒"}}},m={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"course-live",attrs:{id:"liveC"}},[a("van-tabs",{attrs:{"title-active-color":"#3399FE",color:"#3399FE"},on:{click:t.TabClick},model:{value:t.active,callback:function(e){t.active=e},expression:"active"}},[a("van-tab",{attrs:{title:"正在直播"}}),t._v(" "),a("van-tab",{attrs:{title:"即将开始"}}),t._v(" "),a("van-tab",{attrs:{title:"直播计划"}}),t._v(" "),a("van-tab",{attrs:{title:"已结束"}})],1),t._v(" "),0==t.active?a("div",{staticClass:"display-wrap"},t._l(t.liveList,function(e,n){return a("div",{key:n,staticClass:"main-live living",on:{click:function(a){return t.ToPage(e.LiveTaskID)}}},[a("div",{attrs:{name:"text"}},[a("van-image",{staticClass:"img",attrs:{src:e.imgUrl}},[a("img",{attrs:{slot:"error",src:t.liveBG},slot:"error"})])],1),t._v(" "),a("div",{staticClass:"text-title"},[a("p",{staticClass:"live-name"},[t._v("\n          "+t._s(e.ScheduleInfo&&e.ScheduleInfo.CourseName?e.ScheduleInfo.CourseName:e.ClsRoomName)+"\n        ")]),t._v(" "),e.ScheduleInfo&&e.ScheduleInfo.Teachers?a("p",[a("span",{staticStyle:{color:"#3399FE"}},[t._v(t._s(e.ScheduleInfo.Teachers.toString()))]),t._v(" "),a("span",{staticStyle:{float:"right"}},[t._v(t._s(t._f("formatDay")(e.LiveStartTime)))])]):a("p",[a("span",{staticStyle:{color:"#3399FE"}},[t._v(" "+t._s(t._f("formatDay")(e.LiveStartTime)))]),t._v(" "),a("span",{staticStyle:{float:"right"}},[t._v(t._s(t._f("formatMinutesTime")(e.LiveStartTime))+" -\n            "+t._s(t._f("formatMinutesTime")(e.LiveEndTime)))])])])])}),0):t._e(),t._v(" "),1!=t.active||t.showDetail?t._e():a("div",{staticClass:"display-wrap"},t._l(t.EvalList,function(e,n){return a("div",{key:n,staticClass:"main-live eval",on:{click:function(a){return t.ToDetail(e.LiveID)}}},[a("div",{attrs:{name:"text"}},[a("img",{attrs:{src:t.evalBG,alt:"",width:"100%"}})]),t._v(" "),a("div",{staticClass:"text-title"},[a("p",[t._v("\n          "+t._s(e.ScheduleInfo&&e.ScheduleInfo.CourseName?e.ScheduleInfo.CourseName:e.RBConfigInfo.ClsRoom.ClsRoomName)+"\n          "),a("i",{class:e.LRID?"iconfont icon-dingyue1":"iconfont icon-dingyue",staticStyle:{float:"right",color:"#F39424"},on:{click:function(a){return a.stopPropagation(),t.Remind(e,e.LiveID,null)}}})]),t._v(" "),e.ScheduleInfo&&e.ScheduleInfo.Teachers?a("p",[a("span",{staticStyle:{color:"#3399FE"}},[t._v(t._s(e.ScheduleInfo.Teachers.toString()))]),t._v(" "),a("span",{staticStyle:{float:"right"}},[t._v(t._s(t._f("formatDay")(e.LiveStart)))])]):a("p",[a("span",{staticStyle:{color:"#3399FE"}},[t._v(" "+t._s(t._f("formatDay")(e.LiveStart)))]),t._v(" "),a("span",{staticStyle:{float:"right"}},[t._v(t._s(t._f("formatMinutesTime")(e.LiveStart))+" -\n            "+t._s(t._f("formatMinutesTime")(e.LiveEnd)))])])])])}),0),t._v(" "),2==t.active?a("div",[a("van-pull-refresh",{on:{refresh:t.onRefresh},model:{value:t.refreshing,callback:function(e){t.refreshing=e},expression:"refreshing"}},[a("van-list",{staticClass:"display-wrap",attrs:{finished:t.finished,offset:50},on:{load:t.LoadLivePlan},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},t._l(t.livePlan,function(e,n){return a("div",{key:n,staticClass:"main-live plan"},[a("div",{attrs:{name:"text"}},[a("img",{attrs:{src:t.planBG,alt:"",width:"100%"}})]),t._v(" "),a("div",{staticClass:"text-title plan"},[a("p",[t._v("\n              『"+t._s(e.objectName)+"』\n              "),1==e.RPType?a("span",[t._v("老师的直播")]):t._e(),t._v(" "),2==e.RPType?a("span",[t._v("课程的直播")]):t._e(),t._v(" "),4==e.RPType?a("span",[t._v("班级的直播")]):t._e(),t._v(" "),6==e.RPType?a("span",[t._v("教室的直播")]):t._e()]),t._v(" "),a("p",[a("span",{staticStyle:{color:"#3399FE"}},[t._v(" "+t._s(t._f("formatDay")(e.RPStart)))]),t._v(" "),a("i",{class:e.LRID?"iconfont icon-dingyue1":"iconfont icon-dingyue",staticStyle:{float:"right",color:"#F39424"},on:{click:function(a){return t.Remind(e,null,e.RPID)}}})])])])}),0)],1)],1):t._e(),t._v(" "),3==t.active?a("div",[a("van-pull-refresh",{on:{refresh:t.onRefreshA},model:{value:t.refreshingA,callback:function(e){t.refreshingA=e},expression:"refreshingA"}},[a("van-list",{staticClass:"display-wrap",attrs:{finished:t.finishedA,offset:50},on:{load:t.Loadover},model:{value:t.loadingA,callback:function(e){t.loadingA=e},expression:"loadingA"}},t._l(t.liveOver,function(e,n){return a("div",{key:n,staticClass:"main-live"},[a("div",{attrs:{name:"text"}},[a("img",{attrs:{src:t.overBG,alt:"",width:"100%"}})]),t._v(" "),a("div",{staticClass:"text-title"},[a("p",[t._v("\n              "+t._s(e.ScheduleInfo&&e.ScheduleInfo.CourseName?e.ScheduleInfo.CourseName:e.RBConfigInfo.ClsRoom.ClsRoomName)+"\n            ")]),t._v(" "),e.ScheduleInfo&&e.ScheduleInfo.Teachers?a("p",[a("span",{staticStyle:{color:"#3399FE"}},[t._v(t._s(e.ScheduleInfo.Teachers.toString()))]),t._v(" "),a("span",{staticStyle:{float:"right"}},[t._v(t._s(t._f("formatDay")(e.LiveStart)))])]):a("p",[a("span",{staticStyle:{color:"#3399FE"}},[t._v(" "+t._s(t._f("formatDay")(e.LiveStart)))]),t._v(" "),a("span",{staticStyle:{float:"right"}},[t._v(t._s(t._f("formatMinutesTime")(e.LiveStart))+" -\n                "+t._s(t._f("formatMinutesTime")(e.LiveEnd)))])])])])}),0)],1)],1):t._e(),t._v(" "),t.showDetail?a("div",{staticClass:"detail"},[a("div",[t._v(t._s(t._f("formatDateTime")(t.detailData.LiveStart))+" 开始直播")]),t._v(" "),a("div",{staticStyle:{background:"#3399fe"}},[a("p",[t._v("\n        "+t._s(t.detailData.ScheduleInfo&&t.detailData.ScheduleInfo.CourseName?t.detailData.ScheduleInfo.CourseName:t.detailData.ClsRoomName)+"\n      ")]),t._v(" "),a("p",[t._v("主讲老师："+t._s(t.detailData.t))]),t._v(" "),a("p",[t._v("\n        "+t._s(t._f("formatMM")(t.detailData.LiveStart))+" ~\n        "+t._s(t._f("formatMM")(t.detailData.LiveEnd))+"\n      ")])]),t._v(" "),a("div",{staticStyle:{background:"#2E2E2E"}},[t._v("距离直播开始还有： "),a("span",{domProps:{innerHTML:t._s(t.countDownTime)}})])]):t._e()],1)},staticRenderFns:[]};var _={data:function(){return{dataList:[],loading:!1,finished:!1,refreshing:!1,pno:1,defaultBG:a("snXv"),start:"",end:"",svalue:""}},mounted:function(){var t=[new Date(Date.now()+8.64*Math.pow(10,7)*-90),new Date];this.start=Object(f.a)(t[0],"yyyy-MM-dd"),this.end=Object(f.a)(t[1],"yyyy-MM-dd")},methods:{LoadData:function(){var t=this;return o()(i.a.mark(function e(){var a,n;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.refreshing&&(t.refreshing=!1),e.next=3,t.$mainHttp.ElaborateCourses.GetECDatas({key:t.svalue,psize:6,pno:t.pno,stime:t.start,etime:t.end,sKey:"",type:""});case 3:(a=e.sent).Result&&(t.pno++,n=t.$mainHttp.common.downloadURL(),a.Datas.forEach(function(e){e.Info.ECInfo&&(e.Info.ECInfo=JSON.parse(e.Info.ECInfo)),"["===e.Info.ECInfo.Teachers.slice(0,1)&&(e.Info.ECInfo.Teachers=JSON.parse(e.Info.ECInfo.Teachers).toString()),t.dataList.push({id:e.Info.ECID,tName:e.Info.ECInfo.Teachers,advatar:"https://img.yzcdn.cn/vant/cat.jpeg",date:e.Info.ECInfo.RecTime,watchNum:e.Info.Visits,name:e.Info.ECTitle,courseImg:n+"?filename="+e.MaterialID+"&fileType=9",focus:!1})})),t.loading=!1,t.svalue="",a&&a.Datas||(a.RowsCount=0),t.dataList.length>=a.RowsCount&&(t.finished=!0);case 9:case"end":return e.stop()}},e,t)}))()},FocusOn:function(t){this.dataList[t].focus=!0},ToVideo:function(t){this.$router.push({name:"sourceRecorded",params:{id:t}})},onRefresh:function(){this.finished=!1,this.loading=!0,this.dataList=[],this.pno=1,this.LoadData()}}},g={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"course-review"},[a("div",{staticClass:"search-input"},[a("van-search",{attrs:{placeholder:"请输入搜索关键词",shape:"round","show-action":""},scopedSlots:t._u([{key:"action",fn:function(){return[a("div",{staticStyle:{fontSize:"15px"},on:{click:t.onRefresh}},[t._v("搜索")])]},proxy:!0}]),model:{value:t.svalue,callback:function(e){t.svalue=e},expression:"svalue"}})],1),t._v(" "),a("van-pull-refresh",{on:{refresh:t.onRefresh},model:{value:t.refreshing,callback:function(e){t.refreshing=e},expression:"refreshing"}},[a("van-list",{attrs:{finished:t.finished,offset:50},on:{load:t.LoadData},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},[a("div",{staticClass:"c-main"},t._l(t.dataList,function(e,n){return a("div",{key:n},[a("div",{staticClass:"c-row"},[a("van-image",{staticStyle:{position:"absolute",left:"0"},attrs:{round:"",width:"1.5rem",height:"1.5rem",src:e.advatar}}),t._v(" "),a("div",{staticStyle:{position:"absolute",left:"1.8rem"}},[a("p",[t._v(t._s(e.tName))]),t._v(" "),a("p",[t._v("上传时间："+t._s(e.date))])]),t._v(" "),e.focus?a("van-button",{staticClass:"c-btn",attrs:{type:"primary",size:"small"},on:{click:function(e){return t.FocusOn(n)}}},[t._v("已关注")]):t._e()],1),t._v(" "),a("div",[a("van-image",{staticClass:"course-img",attrs:{src:e.courseImg,alt:"",width:"100%"},on:{click:function(a){return t.ToVideo(e.id)}}},[a("img",{staticStyle:{width:"100%"},attrs:{slot:"error",src:t.defaultBG},slot:"error"})])],1),t._v(" "),a("div",{attrs:{id:"c-info"}},[a("span",[t._v(t._s(e.name))]),t._v(" "),a("span",[t._v(t._s(e.watchNum)+"次播放")])])])}),0)])],1)],1)},staticRenderFns:[]};var D={components:{MySource:function(){return a.e(61).then(a.bind(null,"WYN6"))}},data:function(){return{show:!1,type:"",iType:-1,iFormat:-1,iSorting:-1,typeList:[{text:"全部我的",value:0},{text:"教案",value:1},{text:"课件",value:2},{text:"素材",value:3},{text:"试卷",value:4},{text:"其他",value:5}],format:"",formatList:[{text:"docx",value:6},{text:"ppt",value:7},{text:"mp4",value:8}],sorting:"",sortingList:[{text:"增序",value:9},{text:"降序",value:10}],source:[{score:5.8,name:"美国共和党极右化和茶党化",contributors:"特朗普",time:"2020-03-03"},{name:"美国共和党极右化和茶党化",contributors:"特朗普",time:"2020-03-03",score:5.8}]}},methods:{ToActive:function(t,e){this[e]=t},ReSet:function(){this.iSorting=-1,this.iType=-1,this.iFormat=-1},Submit:function(){}}},S={render:function(){var t=this,e=this,a=e.$createElement,n=e._self._c||a;return n("div",{staticClass:"course-source"},[n("div",{staticClass:"filter-list"},[n("van-dropdown-menu",{attrs:{"active-color":"#00CBAB"}},[n("van-dropdown-item",{attrs:{options:e.typeList,title:"类型"},model:{value:e.type,callback:function(t){e.type=t},expression:"type"}})],1),e._v(" "),n("van-dropdown-menu",{attrs:{"active-color":"#00CBAB"}},[n("van-dropdown-item",{attrs:{options:e.formatList,title:"格式"},model:{value:e.format,callback:function(t){e.format=t},expression:"format"}})],1),e._v(" "),n("van-dropdown-menu",{attrs:{"active-color":"#00CBAB"}},[n("van-dropdown-item",{attrs:{options:e.sortingList,title:"排序"},model:{value:e.sorting,callback:function(t){e.sorting=t},expression:"sorting"}})],1),e._v(" "),n("div",{attrs:{name:"filter-btn"}},[n("span",{staticClass:"sider"},[e._v("|")]),e._v(" "),n("van-icon",{attrs:{name:"filter-o"}}),e._v(" "),n("span",{on:{click:function(){t.show=!0}}},[e._v("筛选")])],1)],1),e._v(" "),n("MySource",{attrs:{data:e.source}}),e._v(" "),n("van-popup",{attrs:{round:"",position:"right",closeable:""},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[n("div",{staticClass:"poup-filter type"},[n("p",[e._v("类型")]),e._v(" "),e._l(e.typeList,function(t){return n("button",{key:t.value,class:[e.iType==t.value?"btn-active":""],on:{click:function(a){return e.ToActive(t.value,"iType")}}},[e._v("\n        "+e._s(t.text)+"\n      ")])})],2),e._v(" "),n("div",{staticClass:"poup-filter"},[n("p",[e._v("格式")]),e._v(" "),e._l(e.formatList,function(t){return n("button",{key:t.value,class:[e.iFormat==t.value?"btn-active":""],on:{click:function(a){return e.ToActive(t.value,"iFormat")}}},[e._v("\n        "+e._s(t.text)+"\n      ")])})],2),e._v(" "),n("div",{staticClass:"poup-filter"},[n("p",[e._v("排序")]),e._v(" "),e._l(e.sortingList,function(t){return n("button",{key:t.value,class:[e.iSorting==t.value?"btn-active":""],on:{click:function(a){return e.ToActive(t.value,"iSorting")}}},[e._v("\n        "+e._s(t.text)+"\n      ")])})],2),e._v(" "),n("div",{staticClass:"oprate"},[n("button",{on:{click:e.ReSet}},[e._v("重置")]),e._v(" "),n("button",{on:{click:e.Submit}},[e._v("确定")])])])],1)},staticRenderFns:[]};var C={data:function(){return{rData:[],loading:!1,finished:!1,refreshing:!1,pno:1,BG:a("snXv"),IsFav:!0}},mounted:function(){},methods:{LoadData:function(){var t=this;return o()(i.a.mark(function e(){var a,n;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.refreshing&&(t.refreshing=!1),e.next=3,t.$mainHttp.ElaborateCourses.GetFavs({psize:20,pno:t.pno});case 3:(a=e.sent).Datas&&(t.pno=t.pno+1,n=t.$mainHttp.common.downloadURL(),a.Datas.forEach(function(e){t.rData.push({videoSrc:n+"?filename="+e.MaterialID+"&fileType=9",watchNum:e.Info.Visits,name:e.Info.ECTitle,id:e.Info.ECID,IsFav:!0})})),a&&a.Datas||(a.RowsCount=0),t.loading=!1,t.rData.length>=a.RowsCount&&(t.finished=!0);case 8:case"end":return e.stop()}},e,t)}))()},onRefresh:function(){this.finished=!1,this.loading=!0,this.rData=[],this.pno=1,this.LoadData()},ToVideo:function(t){this.$router.push({name:"sourceRecorded",params:{id:t}})},RemoveFav:function(t,e){var a=this;return o()(i.a.mark(function n(){return i.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,a.$mainHttp.ElaborateCourses.DelFav({ecfid:t});case 2:n.sent.Result&&(a.rData[e].IsFav=!1);case 4:case"end":return n.stop()}},n,a)}))()}}},y={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"recent-view "},[a("van-pull-refresh",{on:{refresh:t.onRefresh},model:{value:t.refreshing,callback:function(e){t.refreshing=e},expression:"refreshing"}},[a("van-list",{staticClass:"display-wrap",attrs:{finished:t.finished,offset:50},on:{load:t.LoadData},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},[t._l(t.rData,function(e,n){return[e.IsFav?a("div",{key:n,staticClass:"main-live",on:{click:function(a){return t.ToVideo(e.id)}}},[a("div",{attrs:{name:"text"}},[a("van-image",{attrs:{src:e.videoSrc}},[a("img",{attrs:{slot:"error",src:t.BG,alt:""},slot:"error"})])],1),t._v(" "),e.IsFav?a("div",{staticClass:"text-title"},[a("p",[t._v(t._s(e.name))]),t._v(" "),a("p",[t._v("\n              "+t._s(e.watchNum)+"次播放\n              "),a("i",{staticClass:"iconfont icon-shoucang1",staticStyle:{float:"right",color:"#F39424"},on:{click:function(a){return a.stopPropagation(),t.RemoveFav(e.id,n)}}})])]):t._e()]):t._e()]})],2)],1)],1)},staticRenderFns:[]};var w={components:{RecentView:l,MySubscribe:v,CourseSuggest:a("VU/8")(d,h,!1,function(t){a("EDxe")},null,null).exports,CourseLive:a("VU/8")(p,m,!1,function(t){a("D3di")},null,null).exports,CourseReview:a("VU/8")(_,g,!1,function(t){a("MZST")},null,null).exports,CourseSource:a("VU/8")(D,S,!1,function(t){a("LDBG")},null,null).exports,MyCollection:a("VU/8")(C,y,!1,function(t){a("PLAK")},null,null).exports},data:function(){return{tabOptions:[{title:"最近看过",value:1},{title:"我的收藏",value:2},{title:"推荐课程",value:3},{title:"直播课程",value:4},{title:"课程回看",value:5}],tabSelected:2,isPause:!1}},mounted:function(){localStorage.getItem("tabSelected")&&(this.tabSelected=Number(localStorage.getItem("tabSelected"))),this.GetConfig()},methods:{toMenu:function(){this.$router.push("/source/classification")},handle:function(){localStorage.setItem("tabSelected",this.tabSelected),2===this.tabSelected?this.isPause=!1:this.isPause=!0},GetConfig:function(){var t=this;return o()(i.a.mark(function e(){var a;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$mainHttp.common.serverConfigInfoGet();case 2:(a=e.sent)&&(t.$root.SrvConfigInfo=a.Datas);case 4:case"end":return e.stop()}},e,t)}))()}}},I={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"source"},[a("van-tabs",{attrs:{sticky:"",color:"rgba(0, 203, 171, 1)",ellipsis:!1,"title-inactive-color":"#aaa","line-height":2},on:{click:t.handle},model:{value:t.tabSelected,callback:function(e){t.tabSelected=e},expression:"tabSelected"}},t._l(t.tabOptions,function(e,n){return a("van-tab",{key:n,staticStyle:{"flex-basis":"22%"},attrs:{title:e.title}},[1===e.value?a("recent-view"):2===e.value?a("MyCollection"):3===e.value?a("course-suggest",{attrs:{isPause:t.isPause}}):4===e.value?a("course-live"):5===e.value?a("course-review"):6===e.value?a("course-source"):t._e()],1)}),1),t._v(" "),a("div",{staticClass:"tab_right",on:{click:t.toMenu}},[a("van-icon",{attrs:{"class-prefix":"iconfont icon-caidanguanli",size:"30"}})],1)],1)},staticRenderFns:[]};var L=a("VU/8")(w,I,!1,function(t){a("ExDr")},"data-v-094cb6b0",null);e.default=L.exports},jatd:function(t,e,a){t.exports=a.p+"static/img/onlive.50ce959.png"},obIe:function(t,e){}});
//# sourceMappingURL=5.018ffccef222c1030e5c.js.map