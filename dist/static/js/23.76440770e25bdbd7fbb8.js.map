{"version":3,"sources":["webpack:///src/pages/course/quiz/classPractice.vue","webpack:///./src/pages/course/quiz/classPractice.vue?c33e","webpack:///./src/pages/course/quiz/classPractice.vue"],"names":["classPractice","name","components","DoAnswer","MyAnswer","Survey","props","data","fromID","this","$route","params","id","bankID","bankId","practiceID","operateType","utils_enum","start","practiceInfo","practiceOptions","practiceReply","total","parseInt","practiceAnswer","modulePicture","PractiseAnswer","ableReply","currentIndex","state","ableSwitch","isSurvey","computed","showDoAnswer","showMyAnswer","indexOf","showSurvey","surveyMaster","created","$store","getters","type","no","getDataInfo","methods","_this","keys_default","forEach","item","$delete","$mainHttp","classPractise","getDataByIndex","studentID","cipID","plid","psSerial","then","res","Result","PSData","PAData","SOData","length","findIndex","r","stringify_default","push","catch","getDataInfoById","_this2","getDataById","psID","OSData","getPracticeTypeName","val","Object","nextTo","backTo","answerChange","answer","submitAnswer","_this3","$router","reqData","paid","ciID","courseID","paContent","postDataAnswer","submitPractice","Info","$toast","_this4","postDataPractise","success","setTimeout","selectSurvey","_this5","master","postDataSurvey","paID","paMaster","$set","$refs","resetVal","watch","$store.getters.classPractice","newVal","oldVal","init","survey","acceptAnswer","$nextTick","height","document","body","clientHeight","documentElement","scrollTop","quiz_classPractice","render","_vm","_h","$createElement","_c","_self","attrs","title","_v","staticClass","_s","_l","k","key","_e","question-type","question-option","answer-value","module-picture","on","change","my-answer","analysis","true-answer","get-score","ref","disable","directives","rawName","value","expression","click","$event","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/23.76440770e25bdbd7fbb8.js","sourcesContent":["<template>\n  <div id=\"cs-pra\">\n    <head-top title=\"随堂练习\"></head-top>\n    <div class=\"main\">\n      <div class=\"content\">\n        <div class=\"tt\">\n          {{currentIndex + '.【' + getPracticeTypeName(practiceInfo['PSType']) + '】' + (practiceInfo['PSScore']||0) + '分'}}\n        </div>\n\n        <div class=\"ct\">{{practiceInfo['PSContent']}}</div>\n        <div v-if=\"practiceInfo['PSType']===1 || practiceInfo['PSType']===2 \" class=\"ans\">\n          <div class=\"an\" v-for=\"(item, k) in practiceOptions\" :key=\"k\">\n            <span>{{ item['SOSerial']}}：</span>\n            <span>{{item['SOContent']}}</span>\n            <!-- {{ item['SOSerial'] +'：'+ item['SOContent']}} -->\n          </div>\n        </div>\n      </div>\n\n      <do-answer v-if=\"showDoAnswer\" :question-type=\"practiceInfo['PSType']\" :question-option=\"practiceInfo['PSOption']\"\n        :ableReply=\"ableReply\" :answer-value=\"practiceAnswer\" :module-picture=\"modulePicture\" @change=\"answerChange\">\n      </do-answer>\n      <my-answer v-if=\"showMyAnswer\" :question-type=\"practiceInfo['PSType']\" :my-answer=\"practiceAnswer\" :module-picture=\"modulePicture\"\n        :analysis=\"practiceInfo['PSanalysis']\" :true-answer=\"practiceInfo['PSAnswer']\"\n        :get-score=\"practiceReply? practiceReply['PAScore'] : null\"></my-answer>\n\n      <survey ref=\"survey\" v-if=\"showSurvey\" :disable=\"practiceInfo['State'] !== 4\" :master=\"surveyMaster\" @selectSurvey=\"selectSurvey\">\n      </survey>\n      <div class=\"footer\" v-show=\"ableSwitch\">\n        <button v-show=\"currentIndex> 1\" @click=\"submitAnswer(-1)\">上一题</button>\n        <button v-if=\"currentIndex< total\" @click=\"submitAnswer(1)\">下一题</button>\n        <button v-else-if=\"ableReply && state===2 \" @click=\"submitAnswer(1)\">提交答案</button>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport DoAnswer from \"@/components/Question/DoAnswer\";\nimport MyAnswer from \"@/components/Question/MyAnswer\";\nimport Survey from \"@/components/Question/Survey\";\n\nimport { practiceTypeName, ModulePicture, PracticeFunc } from \"@/utils/enum\";\nexport default {\n  name: \"\",\n  components: { DoAnswer, MyAnswer, Survey },\n  props: {},\n  data() {\n    return {\n      fromID: this.$route.params.id,\n      bankID: this.$route.params.bankId,\n      practiceID: \"\",\n      operateType: PracticeFunc.start, //操作步骤 1开始答题 2获取提问和答题 3下发答案和解析 4调研\n      practiceInfo: {},\n      practiceOptions: [],\n      practiceReply: {},\n      total: parseInt(this.$route.params.total || \"1\"),\n      practiceAnswer: \"\",\n      modulePicture: ModulePicture.PractiseAnswer,\n      ableReply: false,\n      currentIndex: 1,\n      state: parseInt(this.$route.params.state || 1),\n      ableSwitch: true,\n      isSurvey: false\n    };\n  },\n  computed: {\n    showDoAnswer() {\n      if (this.operateType === PracticeFunc.start) {\n        return this.practiceInfo && this.state === 2;\n      } else {\n        return false;\n      }\n    },\n    showMyAnswer() {\n      if (this.operateType === PracticeFunc.start) {\n        return this.practiceInfo && [3, 4].indexOf(this.state) > -1;\n      } else {\n        return true;\n      }\n    },\n    showSurvey() {\n      return this.isSurvey && this.practiceAnswer;\n      // // 没有作答 没权限调研\n      // if (!this.practiceAnswer) {\n      //   return false;\n      // } else if (this.operateType === PracticeFunc.survey) {\n      //   return true;\n      // } else if (this.operateType === PracticeFunc.start) {\n      //   return this.practiceInfo && [3, 4].indexOf(this.state) > -1;\n      // // } else if (this.isSurvey) {\n      // //   return true;\n      // } else {\n      //   return false;\n      // }\n    },\n    surveyMaster() {\n      if (this.practiceReply) {\n        return !this.practiceReply[\"PAMaster\"] &&\n          this.practiceReply[\"PAMaster\"] !== 0\n          ? null\n          : this.practiceReply[\"PAMaster\"] || 0;\n      }\n      return null;\n    }\n  },\n  created() {\n    // 从其它页面进入， 当前界面为更新操作\n    if (!this.$route.params || !this.$route.params.state) {\n      this.operateType = this.$store.getters.classPractice.type || PracticeFunc.start;\n      this.currentIndex = this.$store.getters.classPractice.no || 1;\n      this.total = parseInt(this.$store.getters.classPractice.total || this.currentIndex);\n\n      if (this.$store.getters.classPractice.type === PracticeFunc.start) {\n        this.state = 2;\n      }\n    }\n    this.getDataInfo();\n  },\n  methods: {\n    getDataInfo() {\n      Object.keys(this.practiceInfo).forEach(item => {\n        this.$delete(this.practiceInfo, item);\n      });\n      Object.keys(this.practiceReply).forEach(item => {\n        this.$delete(this.practiceReply, item);\n      });\n      this.practiceOptions = [];\n      this.$mainHttp.classPractise.getDataByIndex({\n        studentID: this.$store.getters.studentID,\n        cipID: this.fromID,\n        plid: this.bankID,\n        psSerial: this.currentIndex\n      }).then(res => {\n        if (res.Result) {\n          this.practiceInfo = res.PSData;\n          this.practiceReply = res.PAData ? res.PAData : {};\n          this.isSurvey = res[\"IsSurvey\"] || false;\n          this.practiceAnswer = this.practiceReply[\"PAContent\"];\n\n          this.ableReply = this.practiceInfo && this.state === 2; //必须答题状态为2\n\n          this.practiceOptions = [];\n          if (res.SOData && res.SOData.length > 0) {\n            res.SOData.forEach(item => {\n              let index = this.practiceOptions.findIndex(\n                r => JSON.stringify(r) === JSON.stringify(item)\n              );\n              if (index === -1) this.practiceOptions.push(item);\n            });\n          }\n        }\n      }).catch(() => { });\n    },\n    getDataInfoById() {\n      this.practiceInfo = {};\n      this.practiceReply = {};\n      this.practiceOptions = [];\n      this.$mainHttp.classPractise.getDataById({\n        studentID: this.$store.getters.studentID,\n        psID: this.practiceID,\n        cipID: this.fromID\n      }).then(res => {\n        if (res.Result) {\n          this.practiceInfo = res.PSData;\n          this.practiceReply = res.PAData ? res.PAData : {};\n          this.practiceAnswer = this.practiceReply[\"PAContent\"];\n          this.ableReply =\n            this.practiceReply && this.practiceReply[\"PAContent\"]\n              ? false\n              : true;\n          if (res.OSData && res.OSData.length > 0) {\n            res.OSData.forEach(item => {\n              this.practiceOptions.push(item);\n            });\n          }\n        }\n      }).catch(() => { });\n    },\n    getPracticeTypeName(val) {\n      return practiceTypeName(val);\n    },\n    nextTo() {\n      this.currentIndex += 1;\n    },\n    backTo() {\n      this.currentIndex -= 1;\n    },\n    answerChange(answer) {\n      this.practiceAnswer = answer;\n    },\n    submitAnswer(val) {\n      // if (val < 0) {\n      //   this.practiceAnswer = \"\";\n      //   this.currentIndex += val;\n      //   this.getDataInfo();\n      //   return;\n      // } else\n      if (!this.ableReply) {\n        if (this.currentIndex >= this.total && val >= 0) {\n          this.$router.push(\"/quiz\");\n        }\n        this.currentIndex += val;\n        this.practiceAnswer = \"\";\n        this.getDataInfo();\n        return;\n      }\n      if (!this.practiceAnswer) {\n        this.$toast(\"请先作答\");\n      } else {\n        let reqData = {\n          cipID: this.fromID,\n          paid: this.practiceReply[\"PAID\"] || \"\",\n          ciID: this.$store.getters.courseID,\n          psID: this.practiceInfo[\"PSID\"],\n          studentID: this.$store.getters.studentID,\n          paContent: this.practiceAnswer\n        };\n        this.$mainHttp.classPractise.postDataAnswer(\n          reqData\n        ).then(res => {\n          if (res.Result) {\n            if (this.currentIndex === this.total && val > 0) {\n              if (this.state === 4) {\n                this.$router.push(\"/quiz\");\n              } else {\n                this.submitPractice();\n              }\n            } else {\n              this.currentIndex += val;\n              this.practiceAnswer = \"\";\n              if (this.currentIndex > this.total) this.$router.push(\"/quiz\");\n              this.getDataInfo();\n            }\n          } else if (res.Info) {\n            this.$toast(res.Info);\n          }\n        }).catch(() => {\n          this.$toast(\"提交失败，请重试\");\n        });\n      }\n    },\n    submitPractice() {\n      let reqData = {\n        ciID: this.$store.getters.courseID,\n        cipID: this.$route.params.id,\n        studentID: this.$store.getters.studentID\n      };\n\n      this.$mainHttp.classPractise.postDataPractise(\n        reqData\n      ).then(res => {\n        if (res.Result) {\n          this.$toast.success(\"交卷成功\");\n          setTimeout(() => {\n            this.$router.push(\"/quiz\");\n          }, 500);\n        }\n      }).catch(() => {\n        this.$toast(\"提交失败，请重试\");\n      });\n    },\n    selectSurvey(val) {\n      let master = val ? 1 : 0;\n      this.$mainHttp.classPractise.postDataSurvey({\n        ciID: this.$store.getters.courseID,\n        paID: this.practiceReply[\"PAID\"],\n        studentID: this.$store.getters.studentID,\n        paMaster: master\n      }).then(res => {\n        this.$set(this.practiceReply, \"PAMaster\", master);\n        this.$refs[\"survey\"].resetVal(master);\n        this.$toast.success(\"提交问卷成功\");\n      }).catch(() => {\n        this.$toast(\"提交失败，请重试\");\n      });\n    }\n  },\n  watch: {\n    \"$store.getters.classPractice\"(newVal, oldVal) {\n      // console.log(\"newVal:\", newVal);\n      if (newVal !== oldVal) {\n        this.operateType = newVal.type || PracticeFunc.start;\n\n        if (this.operateType === PracticeFunc.start) {\n          this.fromID = newVal.id || \"\";\n          this.currentIndex = newVal.no || 1;\n          this.state = 2; //开始答题，肯定可以答题\n          this.total = newVal.total || this.currentIndex;\n          this.getDataInfo();\n          this.ableSwitch = true;\n        } else if (this.operateType === PracticeFunc.init) {\n          this.fromID = newVal.id || \"\";\n          this.currentIndex = newVal.no || 1;\n\n          this.state = 4;\n          this.total =\n            this.total > this.currentIndex ? this.total : this.currentIndex;\n          this.getDataInfo();\n          this.ableSwitch = false;\n        } else {\n          this.practiceID = newVal.id || \"\";\n          this.getDataInfoById();\n          this.ableSwitch = false;\n        }\n\n        //  console.log(\"operateStep:\", this.operateType);\n        if (this.operateType === PracticeFunc.survey || this.operateType === PracticeFunc.acceptAnswer) {\n          this.isSurvey = this.operateType === PracticeFunc.survey;\n\n          this.$nextTick(() => {\n            let height = document.body.clientHeight;\n            document.documentElement.scrollTop = height;\n            setTimeout(() => {\n              document.documentElement.scrollTop = height;\n            }, 1000);\n          });\n        }\n      }\n    }\n  }\n};\n</script>\n\n<style lang='less' scoped>\n@import url(\"./../../../styles/common/base.less\");\n#cs-pra {\n  width: 100%;\n  min-height: 98vh;\n  padding-bottom: 2vh;\n  background: #ebf0ef;\n  .main {\n    text-align: left;\n    .content {\n      width: 92vw;\n      background: rgba(255, 255, 255, 1);\n      padding: 4vw;\n      color: #333333;\n      font-size: @font-sub-title;\n      margin-bottom: 2vh;\n      word-break: break-all;\n      .tt {\n        margin-bottom: 15px;\n      }\n      .ct {\n        text-indent: 2em;\n        margin-bottom: 15px;\n      }\n      .ans {\n        padding-left: 10px;\n        .an {\n          display: flex;\n          margin-bottom: 10px;\n        }\n      }\n    }\n\n    .footer {\n      display: flex;\n      justify-content: space-around;\n      padding-top: 20px;\n      button {\n        background: rgba(0, 203, 171, 1);\n        border-radius: 5px;\n        font-size: @font-info;\n        line-height: 3;\n        color: #fff;\n        padding: 0 15px;\n      }\n    }\n  }\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/pages/course/quiz/classPractice.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"cs-pra\"}},[_c('head-top',{attrs:{\"title\":\"随堂练习\"}}),_vm._v(\" \"),_c('div',{staticClass:\"main\"},[_c('div',{staticClass:\"content\"},[_c('div',{staticClass:\"tt\"},[_vm._v(\"\\n        \"+_vm._s(_vm.currentIndex + '.【' + _vm.getPracticeTypeName(_vm.practiceInfo['PSType']) + '】' + (_vm.practiceInfo['PSScore']||0) + '分')+\"\\n      \")]),_vm._v(\" \"),_c('div',{staticClass:\"ct\"},[_vm._v(_vm._s(_vm.practiceInfo['PSContent']))]),_vm._v(\" \"),(_vm.practiceInfo['PSType']===1 || _vm.practiceInfo['PSType']===2 )?_c('div',{staticClass:\"ans\"},_vm._l((_vm.practiceOptions),function(item,k){return _c('div',{key:k,staticClass:\"an\"},[_c('span',[_vm._v(_vm._s(item['SOSerial'])+\"：\")]),_vm._v(\" \"),_c('span',[_vm._v(_vm._s(item['SOContent']))])])}),0):_vm._e()]),_vm._v(\" \"),(_vm.showDoAnswer)?_c('do-answer',{attrs:{\"question-type\":_vm.practiceInfo['PSType'],\"question-option\":_vm.practiceInfo['PSOption'],\"ableReply\":_vm.ableReply,\"answer-value\":_vm.practiceAnswer,\"module-picture\":_vm.modulePicture},on:{\"change\":_vm.answerChange}}):_vm._e(),_vm._v(\" \"),(_vm.showMyAnswer)?_c('my-answer',{attrs:{\"question-type\":_vm.practiceInfo['PSType'],\"my-answer\":_vm.practiceAnswer,\"module-picture\":_vm.modulePicture,\"analysis\":_vm.practiceInfo['PSanalysis'],\"true-answer\":_vm.practiceInfo['PSAnswer'],\"get-score\":_vm.practiceReply? _vm.practiceReply['PAScore'] : null}}):_vm._e(),_vm._v(\" \"),(_vm.showSurvey)?_c('survey',{ref:\"survey\",attrs:{\"disable\":_vm.practiceInfo['State'] !== 4,\"master\":_vm.surveyMaster},on:{\"selectSurvey\":_vm.selectSurvey}}):_vm._e(),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.ableSwitch),expression:\"ableSwitch\"}],staticClass:\"footer\"},[_c('button',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.currentIndex> 1),expression:\"currentIndex> 1\"}],on:{\"click\":function($event){return _vm.submitAnswer(-1)}}},[_vm._v(\"上一题\")]),_vm._v(\" \"),(_vm.currentIndex< _vm.total)?_c('button',{on:{\"click\":function($event){return _vm.submitAnswer(1)}}},[_vm._v(\"下一题\")]):(_vm.ableReply && _vm.state===2 )?_c('button',{on:{\"click\":function($event){return _vm.submitAnswer(1)}}},[_vm._v(\"提交答案\")]):_vm._e()])],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-f1b76b86\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/pages/course/quiz/classPractice.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-f1b76b86\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!less-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./classPractice.vue\")\n}\nvar normalizeComponent = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./classPractice.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./classPractice.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-f1b76b86\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./classPractice.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-f1b76b86\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/course/quiz/classPractice.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}