webpackJsonp([20],{FRS1:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("aXZl"),s=a("0xDb"),n={name:"",components:{NoteList:i.a},data:function(){return{isLoading:!1,noteDataList:[],startDate:Object(s.h)("date",-3650),endDate:Object(s.f)(),searchText:"",value:"",courseOptions:[],error:!1,finished:!1,pno:0,pageSize:5,total:0}},computed:{},mounted:function(){var t=this;this.$nextTick(function(){t.dataList=[]})},methods:{onSearch:function(){this.error=!1,this.finished=!1,this.pno=0,this.total=0,this.noteDataList=[],this.getDataList()},getDataList:function(){var t=this;if(this.isLoading=!0,!(0===this.pno||this.total>this.pno*this.pageSize))return this.isLoading=!1,void(this.finished=!0);this.pno++;var e={startDate:this.startDate,endDate:this.endDate,psize:this.pageSize,pno:this.pno,snid:"",stuid:this.$store.getters.studentID,estate:1,key:this.searchText};this.$mainHttp.note.getSearchList(e).then(function(e){e.Result&&e.Datas&&e.Datas.length>0&&(e.Datas.sort(function(t,e){return t.Key.CreateTime>e.Key.CreateTime?-1:1}),e.Datas.forEach(function(e){t.noteDataList.push({id:e.Key.SNID,title:e.Key.SNTtile,content:e.Key.SNContent,state:e.Key.State,createTime:e.Key.CreateTime,CHID:e.Key.CHID,CIID:e.Key.CIID,CHName:e.CHName,CourseName:e.CourseName})})),e.RowsCount&&(t.total=e.RowsCount),t.total<=t.pno*t.pageSize&&(t.finished=!0),t.isLoading=!1}).catch(function(e){t.error=!0,t.isLoading=!1})},handleSelectNote:function(t){this.$router.push({path:"/space/noteView",query:{snID:t.id,courseID:t.CIID,courseName:t.CourseName,classHourID:t.CHID,classHourName:t.CHName,title:t.title,content:t.content,createTime:t.createTime}})}}},o={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"space_note"}},[a("head-top",{attrs:{title:"笔记"}},[a("router-link",{attrs:{slot:"right",to:"/space/noteEdit"},slot:"right"},[a("i",{staticClass:"iconfont icon-add head-right"})])],1),t._v(" "),a("div",{staticClass:"search-input"},[a("van-search",{attrs:{placeholder:"请输入搜索关键词"},on:{search:t.onSearch},model:{value:t.searchText,callback:function(e){t.searchText=e},expression:"searchText"}})],1),t._v(" "),a("van-pull-refresh",{staticClass:"pull_fresh",on:{refresh:t.onSearch},model:{value:t.isLoading,callback:function(e){t.isLoading=e},expression:"isLoading"}},[a("van-list",{attrs:{finished:t.finished,"finished-text":"没有更多了",error:t.error,"error-text":"请求失败，点击重新加载"},on:{"update:error":function(e){t.error=e},load:t.getDataList},model:{value:t.isLoading,callback:function(e){t.isLoading=e},expression:"isLoading"}},[t.noteDataList&&t.noteDataList.length>0?a("note-list",{attrs:{"data-list":t.noteDataList},on:{select:t.handleSelectNote}}):t._e()],1)],1)],1)},staticRenderFns:[]};var r=a("VU/8")(n,o,!1,function(t){a("JKCm")},"data-v-c446f074",null);e.default=r.exports},JKCm:function(t,e){}});
//# sourceMappingURL=20.e890fe70857ff0a1e3f3.js.map