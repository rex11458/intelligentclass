webpackJsonp([13],{ejuO:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n("bOdI"),s=n.n(a),i=(n("jti4"),n("uk7J")),o=n("bBUo"),c=n("FwVa"),r=n("j/ZV"),u={name:"",components:s()({headTop:o.a},i.a.name,i.a),props:{},data:function(){return{title:"",contentType:c.b.Text,contentTypeDefault:c.b.Text,content:"",imgBase:"",funType:c.g.StudentNote,saveLoading:!1}},created:function(){},mounted:function(){var t=this;this.$nextTick(function(){window.uploadImage=function(e){t.afterRead(e)}})},methods:{saveData:function(){var t=this;if(!this.saveLoading)return this.saveLoading=!0,this.title?this.content?void this.$gatewayHttp.note.postSaveEdit({courseID:this.$store.getters.courseID,studentID:this.$store.getters.studentID,snTitle:this.title,snForm:this.contentType,snContent:this.content}).then(function(e){e.Result&&(t.$toast.success("添加笔记成功"),t.$router.push("/note")),t.saveLoading=!1}).catch(function(e){t.$toast("添加失败，请重试"),t.saveLoading=!1}):(this.$toast("笔记内容不能为空"),void(this.saveLoading=!1)):(this.$toast("笔记标题不能为空"),void(this.saveLoading=!1))},selectPhoto:function(t){2===t?Object(r.b)(r.a.cameraOpen,""):Object(r.b)(r.a.albumOpen,"")},beforeRead:function(t){return"image/jpeg"!==t.type&&"image/png"!==t.type&&"image/jpg"!==t.type?(this.$toast("请上传 jpg 格式图片"),!1):!(t.size>20971520)||(this.$toast("请上传小于20M的图片"),!1)},afterRead:function(t){var e=this;if(console.log("接收到的文件：",t),t.length>20971520)return this.$toast("请上传小于20M的图片"),!1;if(t){var n={funType:c.g.StudentNote,imgBaseString:t};this.$gatewayHttp.resourse.upload(n).then(function(n){n.Result&&(e.contentType=c.b.Picture,e.imgBase=t,e.content=n.Data)}).catch(function(t){})}}},computed:{},watch:{}},l={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"edit-note"}},[n("head-top",{attrs:{title:"编辑笔记"}},[n("span",{attrs:{slot:"right"},on:{click:t.saveData},slot:"right"},[n("i",{staticClass:"iconfont iconfinish"})])]),t._v(" "),n("div",{staticClass:"main"},[n("div",{staticClass:"tt"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.title,expression:"title"}],attrs:{type:"text",placeholder:"编辑笔记标题",maxlength:"50"},domProps:{value:t.title},on:{input:function(e){e.target.composing||(t.title=e.target.value)}}})]),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.contentType===t.contentTypeDefault||!t.content,expression:"contentType === contentTypeDefault || !content"}],staticClass:"content"},[n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.content,expression:"content"}],attrs:{placeholder:"编辑笔记内容..."},domProps:{value:t.content},on:{input:function(e){e.target.composing||(t.content=e.target.value)}}})]),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.contentType!==t.contentTypeDefault&&t.content,expression:"contentType !== contentTypeDefault && content"}],staticClass:"content"},[n("img",{attrs:{src:t.imgBase}})]),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.contentType!==t.contentTypeDefault||!t.content,expression:"contentType !== contentTypeDefault || !content"}],staticClass:"footer"},[n("div",{staticClass:"pic",on:{click:function(e){return t.selectPhoto(1)}}},[t._m(0),t._v(" "),n("div",{staticClass:"text"},[t._v("图片")])]),t._v(" "),n("div",{staticClass:"line"}),t._v(" "),n("div",{staticClass:"pho",on:{click:function(e){return t.selectPhoto(2)}}},[t._m(1),t._v(" "),n("div",{staticClass:"text"},[t._v("拍照")])])])])],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"icon"},[e("i",{staticClass:"iconfont icontupian"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"icon"},[e("i",{staticClass:"iconfont iconphotograph"})])}]};var v=n("VU/8")(u,l,!1,function(t){n("n1CN")},"data-v-b2d7eb5e",null);e.default=v.exports},n1CN:function(t,e){}});
//# sourceMappingURL=13.44cf59b8109b0f47a238.js.map