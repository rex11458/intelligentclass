{"version":3,"sources":["webpack:///./src/pages/course/course.vue?5c0d","webpack:///./src/pages/course/course.vue","webpack:///src/pages/course/course.vue"],"names":["course_course","render","_vm","this","_h","$createElement","_c","_self","attrs","id","title","courseInfo","CourseName","_v","staticClass","_s","_f","_l","items","key","text","on","click","$event","goTo","path","class","icon","position","model","value","callback","$$v","show","expression","item","i","selected","selectIndex","selectChange","groupName","directives","name","rawName","dialogTitle","currentNum","groupMax","groupList","type","plain","size","confirmDialog","staticRenderFns","__vue_styles__","ssrContext","__webpack_require__","Component","normalizeComponent","course","__webpack_exports__","components","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_defineProperty___default","__WEBPACK_IMPORTED_MODULE_2_vant_es_dialog__","props","beforeRouteEnter","to","from","next","vm","$gatewayHttp","gateway","linkTest","then","res","linkState","catch","err","alert","message","beforeRouteLeave","haveCourse","$store","getters","courseID","isCourseNow","nowCourseID","window","GatewayHub","connection","state","confirm","data","courseDetails","cifmBtnText","created","$gatewaySignalR","startGatewaySignalR","mounted","colors","tempArr","index","length","Jqicon","push","_index","$","css","$nextTick","methods","autoSign","_this","reqData","studentID","qrCodeStr","signCode","sign","getSign","Result","$toast","openGroupDialog","groupID","groupType","__WEBPACK_IMPORTED_MODULE_3__utils_enum__","Free","$router","getGroupDataList","toPath","_this2","dispatch","IsGrouping","Datas","forEach","groupItem","gatewayID","Key","groupingID","Total","Data","getSignWay","_this3","dataList","CIID","SignModel","joinGroup","_this4","groupInfo","Info","onChange","picker","goBack","go","Object","__WEBPACK_IMPORTED_MODULE_4__utils_interFlow__","broadcastStart","goToToupin","goTOxiaoz","goTOQuiz","throwScreenOpen","watch","$store.getters.groupID","newVal","oldVal","$store.getters.groupType"],"mappings":"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","file":"static/js/16.3b18113db0bae99640b3.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"course\"}},[_c('head-top',{attrs:{\"title\":_vm.courseInfo.CourseName||'课程'}}),_vm._v(\" \"),_c('div',{staticClass:\"bg\"},[_c('div',{staticClass:\"bg-title\"}),_vm._v(\" \"),_c('div',{staticClass:\"title\"},[_vm._v(_vm._s(_vm.courseInfo['CHName']))]),_vm._v(\" \"),_c('div',{staticClass:\"flex-evenly\"},[_c('span',[_vm._v(\"老师：\"+_vm._s(_vm.courseInfo['TeacherName']))]),_vm._v(\" \"),_c('span',[_vm._v(\"班级：\"+_vm._s(_vm.courseInfo['ClassName']))])]),_vm._v(\" \"),_c('div',{staticClass:\"flex-evenly bg_foot\"},[_c('span',[_vm._v(\"教室：\"+_vm._s(_vm.courseInfo['ClassroomName']))]),_vm._v(\" \"),_c('span',[_vm._v(\"\\n        时间：\\n        \"+_vm._s(_vm._f(\"formatDate\")(_vm.courseInfo[\"CreateTime\"],_vm.courseInfo[\"CreateTime\"]))+\"\\n      \")])])]),_vm._v(\" \"),_c('div',{staticClass:\"content\"},_vm._l((_vm.courseDetails),function(items){return _c('div',{key:items.text,staticClass:\"item\",on:{\"click\":function($event){return _vm.goTo(items.path)}}},[_c('div',{staticClass:\"icon\"},[_c('i',{staticClass:\"iconfont\",class:items.icon})]),_vm._v(\"\\n      \"+_vm._s(items.text)+\"\\n    \")])}),0),_vm._v(\" \"),_c('van-popup',{staticClass:\"dialog\",attrs:{\"position\":\"top\"},model:{value:(_vm.show),callback:function ($$v) {_vm.show=$$v},expression:\"show\"}},[_vm._l((_vm.groupList),function(item,i){return _c('div',{key:i,staticClass:\"ct\",class:{selected: _vm.selectIndex == i},on:{\"click\":function($event){return _vm.selectChange(item ,i)}}},[_c('div',{staticClass:\"name-info\"},[_c('div',{staticClass:\"name\"},[_vm._v(_vm._s((i + 1 ) + '、' + (item.groupName || '第' + (i + 1 ) + '组')))]),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.dialogTitle==='选择加入小组'),expression:\"dialogTitle==='选择加入小组'\"}],staticClass:\"info\"},[(item.currentNum === item.groupMax)?_c('span',[_vm._v(\"已满\")]):_c('span',[_vm._v(_vm._s(item.currentNum + ' / '+ item.groupMax))])])]),_vm._v(\" \"),_c('div',{staticClass:\"xx\"},[_c('i',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.selectIndex==i),expression:\"selectIndex==i\"}],staticClass:\"iconfont icon-finish\"})])])}),_vm._v(\" \"),_c('div',{staticClass:\"pop_foot\"},[_vm._v(\"\\n      \"+_vm._s(_vm.selectIndex > -1 ? '加入：' + ( _vm.groupList[_vm.selectIndex].groupName || '第' + (_vm.selectIndex + 1 ) + '组') : _vm.dialogTitle)+\"\\n      \"),_c('van-button',{staticClass:\"pop_foot_btn\",attrs:{\"type\":\"primary\",\"plain\":\"\",\"size\":\"small\"},on:{\"click\":function($event){return _vm.confirmDialog()}}},[_vm._v(\"\\n        加入\")])],1)],2)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-3bd4239d\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/pages/course/course.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-3bd4239d\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!less-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./course.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./course.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./course.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-3bd4239d\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./course.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-3bd4239d\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/course/course.vue\n// module id = null\n// module chunks = ","<template>\r\n  <div id=\"course\">\r\n    <head-top :title=\"courseInfo.CourseName||'课程'\" />\r\n    <div class=\"bg\">\r\n      <div class=\"bg-title\"></div>\r\n      <div class=\"title\">{{courseInfo['CHName']}}</div>\r\n      <div class=\"flex-evenly\">\r\n        <span>老师：{{courseInfo['TeacherName']}}</span>\r\n        <span>班级：{{courseInfo['ClassName']}}</span>\r\n      </div>\r\n      <div class=\"flex-evenly bg_foot\">\r\n        <span>教室：{{courseInfo['ClassroomName']}}</span>\r\n        <span>\r\n          时间：\r\n          {{ courseInfo[\"CreateTime\"] | formatDate(courseInfo[\"CreateTime\"]) }}\r\n        </span>\r\n      </div>\r\n    </div>\r\n    <div class=\"content\">\r\n      <div class=\"item\" v-for=\"items in courseDetails\" :key=\"items.text\" @click=\"goTo(items.path)\">\r\n        <div class=\"icon\">\r\n          <i class=\"iconfont\" :class=\"items.icon\"></i>\r\n        </div>\r\n        {{items.text}}\r\n      </div>\r\n    </div>\r\n\r\n    <van-popup class=\"dialog\" position=\"top\" v-model=\"show\">\r\n      <div v-for=\"(item, i) in groupList\" :key=\"i\" class=\"ct\" :class=\"{selected: selectIndex == i}\"\r\n        @click=\"selectChange(item ,i)\">\r\n        <div class=\"name-info\">\r\n          <div class=\"name\">{{ (i + 1 ) + '、' + (item.groupName || '第' + (i + 1 ) + '组')}}</div>\r\n          <div class=\"info\" v-show=\"dialogTitle==='选择加入小组'\">\r\n            <span v-if=\"item.currentNum === item.groupMax\">已满</span>\r\n            <span v-else>{{item.currentNum + ' / '+ item.groupMax }}</span>\r\n          </div>\r\n        </div>\r\n        <div class=\"xx\">\r\n          <i class=\"iconfont icon-finish\" v-show=\"selectIndex==i\"></i>\r\n        </div>\r\n      </div>\r\n      <div class=\"pop_foot\">\r\n        {{ selectIndex > -1 ? '加入：' + ( groupList[selectIndex].groupName || '第' + (selectIndex + 1 ) + '组') : dialogTitle}}\r\n        <van-button class=\"pop_foot_btn\" type=\"primary\" plain size=\"small\" @click=\"confirmDialog()\">\r\n          加入</van-button>\r\n      </div>\r\n    </van-popup>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { Dialog } from \"vant\";\r\nimport { GroupType } from \"@/utils/enum\";\r\nimport { FuncType, sendToAPP } from \"@/utils/interFlow\";\r\nexport default {\r\n  name: \"\",\r\n  components: { [Dialog.Component.name]: Dialog.Component },\r\n  props: {},\r\n  beforeRouteEnter(to, from, next) {\r\n    next(vm => {\r\n      vm.$gatewayHttp.gateway\r\n        .linkTest()\r\n        .then(res => {\r\n          // console.log(\"res:\", res);\r\n          vm.linkState = 1;\r\n        })\r\n        .catch(err => {\r\n          vm.linkState = 0;\r\n          Dialog.alert({\r\n            title: \"警告\",\r\n            message: \"找不到当前课程服务！即将退出\"\r\n          }).then(() => {\r\n            // on confirm\r\n            next(\"/home-course\");\r\n          });\r\n          // .catch(() => {\r\n          //   // on cancel\r\n          //   next();\r\n          // });\r\n        });\r\n    });\r\n  },\r\n  beforeRouteLeave(to, from, next) {\r\n    let haveCourse = this.$store.getters.courseID && to.path === \"/home-course\";\r\n    let isCourseNow =\r\n      this.$store.getters.nowCourseID &&\r\n      this.$store.getters.courseID !== this.$store.getters.nowCourseID;\r\n    if ((haveCourse && isCourseNow) || !this.linkState) {\r\n      next();\r\n    }\r\n\r\n    // (!to.meta.limits || to.meta.limits.indexOf(LimitType.inCourse) === -1) &&\r\n    if (\r\n      haveCourse &&\r\n      window.GatewayHub &&\r\n      window.GatewayHub.connection.state === 1\r\n    ) {\r\n      Dialog.confirm({\r\n        title: \"警告\",\r\n        message: \"是否强制退出当前课程？\"\r\n      })\r\n        .then(() => {\r\n          // on confirm\r\n          next();\r\n        })\r\n        .catch(() => {\r\n          // on cancel\r\n          next(false);\r\n        });\r\n    } else {\r\n      next();\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      linkState: 1,\r\n      selectIndex: -1,\r\n      groupList: [],\r\n      courseInfo: this.$store.getters.course,\r\n      courseDetails: [\r\n        {\r\n          path: \"/signIN\",\r\n          icon: \"icon-qiandao\",\r\n          text: \"签到\"\r\n        },\r\n        {\r\n          path: \"/groupInfo\",\r\n          icon: \"icon-renmai\",\r\n          text: \"我的小组\"\r\n        },\r\n        {\r\n          path: \"/groupDiscussion\",\r\n          icon: \"icon-taolun\",\r\n          text: \"小组讨论\"\r\n        },\r\n        {\r\n          path: \"/teacherscreen\",\r\n          icon: \"icon-pingmu-\",\r\n          text: \"老师屏幕\"\r\n        },\r\n        {\r\n          path: \"/quiz\",\r\n          icon: \"icon-weibiaoti-\",\r\n          text: \"随堂测验\"\r\n        },\r\n        {\r\n          path: \"/question\",\r\n          icon: \"icon-tiwen2\",\r\n          text: \"提问\"\r\n        },\r\n        {\r\n          path: \"/touping\",\r\n          icon: \"icon-touping\",\r\n          text: \"投屏\"\r\n        },\r\n        {\r\n          path: \"/note\",\r\n          icon: \"icon-edu-biji\",\r\n          text: \"笔记\"\r\n        },\r\n        {\r\n          path: \"/blackboardWriting\",\r\n          icon: \"icon-banshubianjiqi-dianji\",\r\n          text: \"板书\"\r\n        },\r\n        {\r\n          path: \"/groupNote\",\r\n          icon: \"icon-groupnote\",\r\n          text: \"小组笔记\"\r\n        },\r\n        {\r\n          path: \"/liveLesson\",\r\n          icon: \"icon-weike\",\r\n          text: \"课堂实况\"\r\n        },\r\n        {\r\n          path: \"/courseware\",\r\n          icon: \"icon-kejian\",\r\n          text: \"课件\"\r\n        }\r\n        // {\r\n        //   path: \"/start\",\r\n        //   icon: \"icon-kejian\",\r\n        //   text: \"多点投屏\"\r\n        // },\r\n        // {\r\n        //   path: \"/close\",\r\n        //   icon: \"icon-kejian\",\r\n        //   text: \"关闭多点\"\r\n        // }\r\n      ],\r\n      show: false,\r\n      dialogTitle: \"\",\r\n      cifmBtnText: \"\"\r\n    };\r\n  },\r\n  created() {\r\n    this.$gatewaySignalR.startGatewaySignalR();\r\n    // sendFreshGroup(false);\r\n  },\r\n\r\n  mounted() {\r\n    let colors = [\r\n      \"#00CBAB\",\r\n      \"#3AA0E0\",\r\n      \"#E38653\",\r\n      \"#F95F5F\",\r\n      \"#A36EE5\",\r\n      \"#E38653\",\r\n      \"#3AA0E0\",\r\n      \"#00CBAB\",\r\n      \"#A36EE5\",\r\n      \"#3AA0E0\",\r\n      \"#E38653\",\r\n      // \"#A36EE5\",\r\n      \"#00CBAB\"\r\n    ];\r\n    let tempArr = [];\r\n    for (let index = 0; index < this.courseDetails.length; index++) {\r\n      const element = this.courseDetails[index];\r\n      let Jqicon = \".\" + element.icon;\r\n      tempArr.push(Jqicon);\r\n    }\r\n    for (let index = 0; index < colors.length; index++) {\r\n      $(tempArr[index]).css(\"color\", colors[index]);\r\n    }\r\n    this.$nextTick(() => {\r\n      // this.openGroupDialog();\r\n      // this.autoSign();\r\n    });\r\n  },\r\n  methods: {\r\n    autoSign() {\r\n      let reqData = {\r\n        studentID: this.$store.getters.studentID,\r\n        qrCodeStr: this.$store.getters.courseID,\r\n        signCode: \"\"\r\n      };\r\n      this.$gatewayHttp.sign\r\n        .getSign(reqData)\r\n        .then(res => {\r\n          if (res.Result) {\r\n            // this.$toast(\"签到成功\");\r\n          } else {\r\n            this.$toast(\"签到失败\");\r\n          }\r\n        })\r\n        .catch(err => {\r\n          this.$toast(\"签到失败，请重新签到\");\r\n        });\r\n    },\r\n    openGroupDialog() {\r\n      if (\r\n        !this.$store.getters.groupID &&\r\n        this.$store.getters.groupType === GroupType.Free\r\n      ) {\r\n        this.$router.push(\"/joinGroup\");\r\n        // this.getGroupDataList(false);\r\n      }\r\n    },\r\n    getGroupDataList(toPath) {\r\n      this.$store\r\n        .dispatch(\"GetGroupByUser\")\r\n        .then(res => {\r\n          if (!res.Result && !res.IsGrouping) {\r\n            this.$toast(\"当前尚无分组~\");\r\n          } else if (res.Result) {\r\n            if (res.Datas && res.Datas.length > 0) {\r\n              this.groupList = [];\r\n              res.Datas.forEach(item => {\r\n                let groupItem = {\r\n                  gatewayID: item.Key[\"GatewayID\"],\r\n                  groupID: item.Key[\"GroupID\"],\r\n                  groupName: item.Key[\"GroupName\"],\r\n                  groupMax: item.Key[\"GroupNumber\"],\r\n                  groupingID: item.Key[\"GroupingID\"],\r\n                  studentID: item.Key[\"StudentID\"],\r\n                  currentNum: item.Total\r\n                };\r\n                this.groupList.push(groupItem);\r\n              });\r\n              // this.show = true;\r\n              // this.selectIndex = -1;\r\n              // this.dialogTitle = \"选择加入小组\";\r\n              // this.cifmBtnText = \"加入\";\r\n              // return;\r\n              this.$router.push(\"/joinGroup\");\r\n            } else if (res.Data) {\r\n              if (this.$store.getters.groupID) {\r\n                let path = toPath;\r\n                this.$router.push(path);\r\n              }\r\n            }\r\n            this.groupList = [];\r\n          }\r\n        })\r\n        .catch(err => {\r\n          this.groupList = [];\r\n        });\r\n    },\r\n\r\n    getSignWay() {\r\n      this.$gatewayHttp.sign\r\n        .dataList({\r\n          CIID: this.$store.getters.courseID,\r\n          studentID: this.$store.getters.studentID\r\n        })\r\n        .then(res => {\r\n          if (res.SignModel) {\r\n            this.$router.push(\r\n              \"/signIN/\" + res.SignModel + \"/\" + (res.Result ? \"1\" : \"0\")\r\n            );\r\n          } else {\r\n            this.$toast(\"获取签到状态失败~\");\r\n          }\r\n        })\r\n        .catch(err => {\r\n          this.$toast(\"获取签到状态异常~\");\r\n        });\r\n    },\r\n    selectChange(item, i) {\r\n      if (item.currentNum === item.groupMax) return;\r\n      this.selectIndex = i;\r\n    },\r\n    confirmDialog() {\r\n      // console.log(dialogName, \"名称\");\r\n      if (this.selectIndex === -1) {\r\n        this.$toast(\"请选择小组\");\r\n        return;\r\n      }\r\n      if (this.dialogTitle === \"选择加入小组\") {\r\n        this.joinGroup();\r\n      } else if (this.dialogTitle === \"投屏选择\") {\r\n        this.$router.push(\"/quiz\");\r\n      }\r\n    },\r\n    joinGroup() {\r\n      let groupInfo = this.groupList[this.selectIndex];\r\n      this.$store\r\n        .dispatch(\"JoinGroup\", groupInfo.groupID, groupInfo)\r\n        .then(res => {\r\n          if (res.Result) {\r\n            this.$toast(\"加入成功~\");\r\n            // this.$router.push(\"/groupDiscussion\");\r\n            this.getGroupDataList(\"/groupInfo\"); //更新小组信息\r\n          } else if (res.Info) {\r\n            this.$toast(res.Info);\r\n          }\r\n        })\r\n        .catch(err => {});\r\n    },\r\n    onChange(picker, value, index) {\r\n      this.$toast(`当前值：${value}, 当前索引：${index}`);\r\n    },\r\n    goBack() {\r\n      this.$router.go(-1);\r\n    },\r\n    goTo(path) {\r\n      if (path === \"/groupDiscussion\" || path === \"/groupInfo\") {\r\n        this.getGroupDataList(path);\r\n      } else if (path === \"/signIN\") {\r\n        this.getSignWay();\r\n      } else if (path === \"/teacherscreen\") {\r\n        // 开启老师屏幕\r\n        sendToAPP(FuncType.broadcastStart, \"10\").then(res => {\r\n          // if (!res) this.$toast(\"请求老师屏幕失败~\");\r\n        });\r\n      } else if (path === \"/touping\") {\r\n        this.goToToupin();\r\n      // } else if (path === \"/start\") {\r\n      //   let value = prompt(\"请输入投屏地址：\", \"192.168.0.28,192.168.0.51\");\r\n      //   if (!value) return;\r\n      //   // 开启多点投屏\r\n      //   sendToAPP(FuncType.throwScreenStart, value).then(res => {\r\n      //     if (!res) this.$toast(\"多点投屏开启失败~\");\r\n      //   });\r\n      // } else if (path === \"/close\") {\r\n      //   let value = prompt(\"请输入关闭的投屏地址\", \"-1\");\r\n      //   if (!value) return;\r\n      //   // 关闭多点投屏\r\n      //   sendToAPP(FuncType.throwScreenStop, value).then(res => {\r\n      //     if (!res) this.$toast(\"多点投屏关闭失败~\");\r\n      //   });\r\n      } else {\r\n        this.$router.push(path);\r\n      }\r\n    },\r\n    goTOxiaoz() {\r\n      this.$router.push(\"/groupDiscussion\");\r\n    },\r\n    goTOQuiz() {\r\n      this.$router.push(\"/quiz\");\r\n    },\r\n    goToToupin() {\r\n      this.$store\r\n        .dispatch(\"GetGroupByUser\")\r\n        .then(() => {\r\n          // 开启投屏\r\n          sendToAPP(FuncType.throwScreenOpen, \"\").then(res => {\r\n            // if (!res) this.$toast(\"请求投屏失败~\");\r\n          });\r\n        })\r\n        .catch(() => {\r\n          // 开启投屏\r\n          sendToAPP(FuncType.throwScreenOpen, \"\").then(res => {\r\n            // if (!res) this.$toast(\"请求投屏失败~\");\r\n          });\r\n        });\r\n    }\r\n  },\r\n  watch: {\r\n    \"$store.getters.groupID\"(newVal, oldVal) {\r\n      if (newVal !== oldVal) {\r\n        this.openGroupDialog();\r\n      }\r\n    },\r\n    \"$store.getters.groupType\"(newVal, oldVal) {\r\n      if (newVal !== oldVal) {\r\n        this.openGroupDialog();\r\n      }\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style lang='less' scoped>\r\n@import url(\"./../../styles/common/base.less\");\r\n#course {\r\n  background: #ebf0ef;\r\n  width: 100%;\r\n  height: 100%;\r\n\r\n  .bg {\r\n    overflow: hidden;\r\n    background: url(\"../../assets/bg_kecheng.png\") 100% 100% no-repeat;\r\n    width: 100vw;\r\n    min-height: 30vw;\r\n    color: rgba(255, 255, 255, 1);\r\n    span {\r\n      display: inline-block;\r\n    }\r\n\r\n    background-size: cover;\r\n    .title {\r\n      font-size: @font-title;\r\n      font-family: MicrosoftYaHei;\r\n      margin: 4vw 0;\r\n    }\r\n    .flex-evenly {\r\n      text-align: left;\r\n      display: flex;\r\n      justify-content: space-evenly;\r\n      margin-bottom: 6px;\r\n      span {\r\n        font-size: @font-info;\r\n        &:nth-child(2) {\r\n          width: 50vw;\r\n        }\r\n      }\r\n    }\r\n    .bg_foot {\r\n      padding-bottom: 4vw;\r\n    }\r\n  }\r\n  .content {\r\n    text-align: left;\r\n    box-sizing: border-box;\r\n    width: 100%;\r\n    height: 52vh;\r\n    background: white;\r\n    .item {\r\n      text-align: center;\r\n      font-size: @font-title;\r\n      width: 24.7vw;\r\n      display: inline-block;\r\n      border: 1PX solid rgba(221, 221, 221, 1);\r\n      border-left: none;\r\n      border-top: none;\r\n      height: 12vh;\r\n      padding-top: 5vh;\r\n      &:nth-child(9) {\r\n        border-bottom: none;\r\n      }\r\n      &:nth-child(10) {\r\n        border-bottom: none;\r\n      }\r\n      &:nth-child(11) {\r\n        border-bottom: none;\r\n      }\r\n      &:nth-child(12) {\r\n        border-bottom: none;\r\n      }\r\n      &:nth-child(4n + 0) {\r\n        border-right: none;\r\n      }\r\n      .icon {\r\n        .iconfont {\r\n          margin-bottom: 10px;\r\n          font-size: @font-title * 1.8;\r\n          margin-bottom: 10px;\r\n        }\r\n        .icon-qiandao {\r\n          color: #00cbab;\r\n        }\r\n        .icon-taolun {\r\n          color: blue;\r\n        }\r\n      }\r\n    }\r\n  }\r\n  .dialog {\r\n    font-size: @font-info;\r\n    margin-top: 44px;\r\n    .van-dialog__content {\r\n      margin-bottom: 4vw;\r\n    }\r\n    .van-dialog__header {\r\n      border-bottom: 1px solid rgba(153, 153, 153, 1);\r\n      box-sizing: border-box;\r\n      padding-bottom: 25px;\r\n      margin-bottom: 25px;\r\n      font-size: @font-title * 1.3;\r\n    }\r\n    .selected {\r\n      font-weight: bold;\r\n      color: #07c160;\r\n    }\r\n    .ct {\r\n      display: flex;\r\n      justify-content: space-between;\r\n      align-items: center;\r\n      position: relative;\r\n      margin: 1vh 5vw;\r\n      font-size: @font-sub-title;\r\n      line-height: 2;\r\n      border-bottom: 1px solid #f3f3f3;\r\n      .name-info {\r\n        width: 76vw;\r\n        display: flex;\r\n        justify-content: space-between;\r\n        .name {\r\n          margin-right: 20vw;\r\n        }\r\n      }\r\n      .xx {\r\n        width: 8vw;\r\n        // height: 20px;\r\n      }\r\n      .icon-finish {\r\n        font-size: @font-sub-title;\r\n      }\r\n    }\r\n  }\r\n  .pop_foot {\r\n    text-align: left;\r\n    margin: 0 5vw;\r\n    padding: 2vh 0;\r\n    border-top: 1px solid #333;\r\n    font-size: @font-sub-title;\r\n    line-height: 30px;\r\n    .pop_foot_btn {\r\n      float: right;\r\n    }\r\n  }\r\n}\r\n</style>\n\n\n// WEBPACK FOOTER //\n// src/pages/course/course.vue"],"sourceRoot":""}