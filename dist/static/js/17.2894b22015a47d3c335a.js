webpackJsonp([17],{Ur7X:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n("Xxa5"),s=n.n(i),o=n("exGp"),a=n.n(o),r={components:{PlayBox:function(){return n.e(60).then(n.bind(null,"ov3Z"))}},data:function(){return{barShow:!1,timer:0,LiveEnd:n("m6i9"),IsLiveEnd:!1,IsMuted:!1,url:"",LiveTaskInfo:null,ListenTimer:null,config:"",full:!1,name:"返回"}},mounted:function(){var e=this;this.url="",this.name=this.$route.query.name,this.LoadData(),this.ListenTimer=window.setInterval(function(){e.Listen()},1e3)},beforeDestroy:function(){clearTimeout(this.timer),window.onresize=null,window.hub&&window.hub.off("ReceiveRBStatus",null),this.Stop()},watch:{barShow:function(e){var t=this;!0===e&&(this.timer=setTimeout(function(){t.barShow=!1},3e3))}},methods:{showHeader:function(){this.barShow=!0},ChangeMuted:function(){this.IsMuted=!this.IsMuted,this.$refs.Player.Muted(this.IsMuted)},goback:function(){this.url="",this.$router.push("/home-source")},Listen:function(){if(!this.IsHubOn&&window.hub){this.IsHubOn=!0;var e=this;window.hub.on("ReceiveRBStatus",function(t){if(e.LiveTaskInfo){var n=JSON.parse(t);n&&n.ClsRoomID===e.LiveTaskInfo.RBConfigInfo.ClsRoom.ClsRoomID&&1!==n.LiveEstate&&(e.IsLiveEnd=!0,e.Stop())}})}},Stop:function(){this.url="",this.$refs.Player&&(console.log("释放监听"),this.$refs.Player.Pause(),this.$refs.Player.Dispose())},LoadData:function(){var e=this;return a()(s.a.mark(function t(){var n,i;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$mainHttp.LiveTask.GetData({liveid:e.$route.query.id});case 2:(n=t.sent)&&n.Data?(e.LiveTaskInfo=n.Data,e.LiveTaskInfo.ExeInfo&&(i=JSON.parse(e.LiveTaskInfo.ExeInfo),e.$set(e.LiveTaskInfo,"ExeInfo",i),2===e.LiveTaskInfo.LiveEstate?(e.url="http://"+e.$root.SrvConfigInfo.LiveHost+":"+e.$root.SrvConfigInfo.LivePort+i+".flv",console.log(e.url)):e.IsLiveEnd=!0)):e.IsLiveEnd=!0;case 4:case"end":return t.stop()}},t,e)}))()}}},u={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"live"},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.IsLiveEnd,expression:"IsLiveEnd"}],staticClass:"handle-bar"},[n("div",{staticClass:"bar-l"},[n("div",{staticClass:"back",on:{click:function(t){return t.stopPropagation(),e.goback(t)}}},[n("van-icon",{attrs:{name:"arrow-left"}}),e._v(" "),n("span",[e._v(e._s(e.name))])],1)])]),e._v(" "),e.IsLiveEnd?e._e():n("PlayBox",{ref:"Player",attrs:{IsLive:!0,IsMuted:!1,Videos:e.url,SelectAble:!1,IsControl:!1,autoFull:!0,name:e.name},on:{"update:Videos":function(t){e.url=t},"update:videos":function(t){e.url=t}}}),e._v(" "),n("van-image",{directives:[{name:"show",rawName:"v-show",value:e.IsLiveEnd,expression:"IsLiveEnd"}],attrs:{src:e.LiveEnd,fit:"none"}})],1)},staticRenderFns:[]};var l=n("VU/8")(r,u,!1,function(e){n("fOwC")},null,null);t.default=l.exports},fOwC:function(e,t){},m6i9:function(e,t,n){e.exports=n.p+"static/img/LiveEnd.20551fc.png"}});
//# sourceMappingURL=17.2894b22015a47d3c335a.js.map