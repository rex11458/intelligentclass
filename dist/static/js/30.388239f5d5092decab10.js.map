{"version":3,"sources":["webpack:///src/pages/course/note/note.vue","webpack:///./src/pages/course/note/note.vue?4914","webpack:///./src/pages/course/note/note.vue"],"names":["note","name","components","defineProperty_default","NoteList","r_note","RQuillEditor","r_quill_editor","dialog","Component","props","data","isLoading","dataList","error","finished","pno","pageSize","total","funType","utils_enum","StudentNote","value","created","mounted","_this","this","$nextTick","onSearch","methods","getDataList","_this2","reqData","ciID","$store","getters","courseID","studentID","$mainHttp","getList","then","res","Result","Datas","length","sort","a","b","CreateTime","forEach","item","push","RowsCount","catch","commit","showDetail","$router","path","query","title","content","createTime","dataDrop","e","_this3","stopPropagation","confirm","message","dataDelete","_this4","postDelete","snid","$toast","computed","searchData","_this5","filter","r","indexOf","watch","$store.getters.noteRefresh","newVal","oldVal","note_note","render","_vm","_h","$createElement","_c","_self","attrs","id","staticClass","slot","to","_v","placeholder","on","search","model","callback","$$v","expression","refresh","_l","k","key","click","$event","size","color","_s","ref","refInFor","is-class","is-edit","max-height","_f","staticRenderFns","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/30.388239f5d5092decab10.js","sourcesContent":["<template>\n  <div id=\"note\">\n    <head-top title=\"笔记\">\n      <router-link slot=\"right\" class=\"head-right\" to=\"/editNote\">\n        <i class=\"iconfont icon-add\"></i>\n      </router-link>\n    </head-top>\n\n    <div class=\"search-input\">\n      <van-search placeholder=\"请输入搜索关键词\" v-model=\"value\" @search=\"onSearch\"/>\n    </div>\n\n    <van-pull-refresh v-model=\"isLoading\" @refresh=\"onSearch\" class=\"pull_fresh\">\n      <div class=\"main\" v-if=\"searchData.length>0\">\n        <div class=\"item\" v-for=\"(item, k) in searchData\" :key=\"k\" @click=\"showDetail(item)\">\n          <div class=\"item_operate\" @click=\"dataDrop($event, item)\">\n            <van-icon name=\"delete\" size=\"18px\" color=\"#f56c6c\"/>\n          </div>\n          <h3 class=\"title\">{{item['SNTtile']||'缺少标题'}}</h3>\n          <r-quill-editor ref=\"REditor\" :funType=\"funType\" :content=\"item['SNContent']\"\n                          :is-class=\"true\" :is-edit=\"false\" :max-height=\"null\">\n          </r-quill-editor>\n          <div class=\"time\">{{item['CreateTime'] | formatDate(item['CreateTime']) }}</div>\n        </div>\n        <div class=\"list_end\">\n          再也没有了~\n        </div>\n      </div>\n      <r-lack-data v-else></r-lack-data>\n    </van-pull-refresh>\n  </div>\n</template>\n\n<script>\nimport NoteList from \"@/components/r-note\";\nimport RQuillEditor from \"@/components/r-quill-editor\";\n\n// import \"quill/dist/quill.snow.css\";\nimport { Dialog } from \"vant\";\nimport { ModulePicture } from \"@/utils/enum\";\n\nexport default {\n  name: \"\",\n  components: {\n    NoteList,\n    RQuillEditor,\n    [Dialog.Component.name]: Dialog.Component\n  },\n  props: {},\n  data () {\n    return {\n      isLoading: false,\n      dataList: [],\n      // form: {\n      //   courseID: this.$store.getters.courseID,\n      //   studentID: this.$store.getters.studentID\n      // },\n      error: false,\n      finished: false,\n      pno: 0,\n      pageSize: 100,\n      total: 0,\n      funType: ModulePicture.StudentNote,\n      value: \"\"\n    };\n  },\n  created () {\n  },\n  mounted () {\n    this.$nextTick(() => {\n      this.onSearch();\n    });\n  },\n  methods: {\n    getDataList () {\n      this.isLoading = true;\n      if (this.pno === 0 || this.total > this.pno * this.pageSize) {\n        this.pno++;\n      } else {\n        this.isLoading = false;\n        this.finished = true;\n        return;\n      }\n      let reqData = {\n        ciID: this.$store.getters.courseID,\n        studentID: this.$store.getters.studentID\n        // psize: this.pageSize,\n        // pno: this.pno\n      };\n      this.$mainHttp.note.getList(reqData).then(res => {\n        if (res.Result && res.Datas && res.Datas.length > 0) {\n          res.Datas.sort((a, b) => {\n            if (a.CreateTime > b.CreateTime) {\n              return -1;\n            } else {\n              return 1;\n            }\n          });\n          res.Datas.forEach(item => {\n            this.dataList.push(item);\n          });\n        }\n        if (res.RowsCount) this.total = res.RowsCount;\n        if (this.total <= this.pno * this.pageSize) this.finished = true;\n        this.isLoading = false;\n      }).catch(() => {\n        this.error = true;\n        this.isLoading = false;\n      });\n      this.$store.commit(\"SET_NOTE_REFRESH\", false);\n    },\n    showDetail (item) {\n      this.$router.push({\n        path: \"/noteDetail\",\n        query: {\n          title: item[\"SNTtile\"],\n          content: item[\"SNContent\"],\n          createTime: item[\"CreateTime\"]\n        }\n      });\n    },\n    dataDrop (e, item) {\n      e.stopPropagation();\n      Dialog.confirm({\n        message: \"确认删除此数据？\"\n      }).then(() => {\n        this.dataDelete(item);\n      }).catch(() => {\n      });\n    },\n    dataDelete (item) {\n      this.$mainHttp.note.postDelete({\n        snid: item[\"SNID\"]\n      }).then(res => {\n        if (res.Result) {\n          this.onSearch();\n        } else {\n          this.$toast(\"删除失败\");\n        }\n      }).catch(() => {\n        this.$toast(\"删除失败,请重试\");\n      });\n    },\n    onSearch () {\n      this.error = false;\n      this.finished = false;\n      this.pno = 0;\n      this.total = 0;\n      this.dataList = [];\n      this.getDataList();\n    }\n  },\n  computed: {\n    searchData () {\n      if (!this.value) {\n        return this.dataList;\n      } else {\n        return this.dataList.filter(\n          r =>\n            r[\"SNTtile\"].indexOf(this.value) > -1 ||\n            r[\"SNContent\"].indexOf(this.value) > -1\n        );\n      }\n    }\n  },\n  watch: {\n    \"$store.getters.noteRefresh\" (newVal, oldVal) {\n      if (newVal !== oldVal && newVal) {\n        this.onSearch();\n      }\n    }\n  }\n};\n</script>\n\n<style lang='less' scoped>\n@import url(\"./../../../styles/common/base.less\");\n\n#note {\n  .head-back {\n    display: none;\n  }\n\n  .search-input {\n    position: fixed;\n    width: 100%;\n    top: 44px;\n    z-index: 9;\n\n    /deep/ .van-search {\n      position: relative;\n\n      &:after {\n        content: \"\";\n        position: absolute;\n        left: 0;\n        bottom: 0;\n        width: 100%;\n        height: 1px;\n        background-color: #ccc;\n        transform: scaleY(0.3);\n      }\n    }\n  }\n\n  .pull_fresh {\n    padding-top: 54px;\n    background: #fff;\n  }\n\n  .main {\n    padding: 7px 0;\n\n    .item {\n      position: relative;\n      padding: 5px 16px;\n      margin-bottom: 6px;\n      text-align: left;\n      background-color: #fff;\n\n      &:after {\n        content: \" \";\n        position: absolute;\n        margin: 0 10px;\n        width: calc(100% - 20px);\n        height: 1px;\n        left: 0;\n        bottom: 0;\n        background-color: #ccc;\n        transform: scaleY(0.3);\n      }\n\n      h3 {\n        font-size: @font-sub-title;\n        margin: 0;\n        line-height: 2.5;\n      }\n\n      .item_operate {\n        position: absolute;\n        top: 3px;\n        right: 2vw;\n        padding: 10px;\n      }\n\n      img {\n        width: 160px;\n        height: 113px;\n      }\n\n      /deep/ .ql-editor {\n        padding: 0;\n        background: #fff;\n        color: #b2bac2;\n        font-size: @font-info;\n\n        overflow: hidden;\n        text-overflow: ellipsis;\n        display: -webkit-box;\n        //这个代表你要在几行显示省略号\n        -webkit-line-clamp: 5;\n        -webkit-box-orient: vertical;\n        word-break: break-all;\n        min-height: 10px;\n        max-height: 5 * 1.4 * @font-info;\n      }\n\n      .time {\n        padding-top: 15px;\n        font-size: @font-sub-title;\n        color: #888;\n      }\n    }\n\n    .list_end {\n      text-align: center;\n      padding: 10px;\n      color: #2c3e50;\n      font-size: @font-sub-title;\n    }\n  }\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/pages/course/note/note.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"note\"}},[_c('head-top',{attrs:{\"title\":\"笔记\"}},[_c('router-link',{staticClass:\"head-right\",attrs:{\"slot\":\"right\",\"to\":\"/editNote\"},slot:\"right\"},[_c('i',{staticClass:\"iconfont icon-add\"})])],1),_vm._v(\" \"),_c('div',{staticClass:\"search-input\"},[_c('van-search',{attrs:{\"placeholder\":\"请输入搜索关键词\"},on:{\"search\":_vm.onSearch},model:{value:(_vm.value),callback:function ($$v) {_vm.value=$$v},expression:\"value\"}})],1),_vm._v(\" \"),_c('van-pull-refresh',{staticClass:\"pull_fresh\",on:{\"refresh\":_vm.onSearch},model:{value:(_vm.isLoading),callback:function ($$v) {_vm.isLoading=$$v},expression:\"isLoading\"}},[(_vm.searchData.length>0)?_c('div',{staticClass:\"main\"},[_vm._l((_vm.searchData),function(item,k){return _c('div',{key:k,staticClass:\"item\",on:{\"click\":function($event){return _vm.showDetail(item)}}},[_c('div',{staticClass:\"item_operate\",on:{\"click\":function($event){return _vm.dataDrop($event, item)}}},[_c('van-icon',{attrs:{\"name\":\"delete\",\"size\":\"18px\",\"color\":\"#f56c6c\"}})],1),_vm._v(\" \"),_c('h3',{staticClass:\"title\"},[_vm._v(_vm._s(item['SNTtile']||'缺少标题'))]),_vm._v(\" \"),_c('r-quill-editor',{ref:\"REditor\",refInFor:true,attrs:{\"funType\":_vm.funType,\"content\":item['SNContent'],\"is-class\":true,\"is-edit\":false,\"max-height\":null}}),_vm._v(\" \"),_c('div',{staticClass:\"time\"},[_vm._v(_vm._s(_vm._f(\"formatDate\")(item['CreateTime'],item['CreateTime'])))])],1)}),_vm._v(\" \"),_c('div',{staticClass:\"list_end\"},[_vm._v(\"\\n        再也没有了~\\n      \")])],2):_c('r-lack-data')],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-95f10582\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/pages/course/note/note.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-95f10582\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!less-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./note.vue\")\n}\nvar normalizeComponent = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./note.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./note.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-95f10582\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./note.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-95f10582\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/course/note/note.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}