webpackJsonp([34],{Oj3z:function(t,s,i){"use strict";Object.defineProperty(s,"__esModule",{value:!0});i("WJbf");var e=i("OhwO"),n=i("0zVH"),a=i("Rh6y"),o=i.n(a),c=i("FwVa"),r=i("j/ZV"),u={name:"",components:{tVideo:n.a},props:{},data:function(){return{courseID:this.$store.getters.courseID,studentID:this.$store.getters.studentID,courseInfo:this.$store.getters.course,imagePreview:null,signList:[],courseScore:{},questionList:[],screenQustionList:[],classPractiseList:[],groupDiscussionList:[],courseWareList:[],boardNoteList:[],groupNoteList:[],miniCourseList:[],noteList:[],show:!1,selectIndex:-1}},created:function(){},mounted:function(){var t=this;this.$nextTick(function(){t.getSign(),t.getCourseScore(),t.getQuestion(),t.getScreenQuestion(),t.getClassPractise(),t.getGroupDiscussion(),t.getCourseWare(),t.getBoardNote(),t.getGroupNote(),t.getMiniCourse(),t.getNote()})},methods:{getSign:function(){var t=this,s={ciID:this.courseID,studentID:this.studentID};this.signList=[],this.$mainHttp.sign.getList(s).then(function(s){s.Result&&s.Datas.forEach(function(s){t.signList.push(s)})}).catch(function(t){})},getCourseScore:function(){var t=this;this.courseScore={};var s={ciID:this.courseID,studentID:this.studentID};this.$mainHttp.classInfo.getStudentScore(s).then(function(s){s.Result&&s.Data&&(t.courseScore=s.Data)}).catch(function(t){})},getQuestion:function(){var t=this;this.questionList=[];var s={CIID:this.courseID,studentID:this.studentID};this.$mainHttp.question.getList(s).then(function(s){s.Result&&s.Datas&&s.Datas.length>0&&s.Datas.forEach(function(s){t.questionList.push(s)})}).catch(function(t){})},getScreenQuestion:function(){var t=this;this.screenQustionList=[];var s={ciID:this.courseID};this.$mainHttp.screenQustion.getListByType(s).then(function(s){s.Result&&s.Datas&&s.Datas.length>0&&s.Datas.forEach(function(s){t.screenQustionList.push({type:s.Type,name:Object(c.o)(s.Type),total:s.Total})})}).catch(function(t){})},getClassPractise:function(){var t=this;this.classPractiseList=[];var s={ciID:this.courseID};this.$mainHttp.classPractise.getStatistic(s).then(function(s){s.Result&&s.Datas&&s.Datas.length>0&&s.Datas.forEach(function(s){t.classPractiseList.push(s)})}).catch(function(t){})},getGroupDiscussion:function(){var t=this;this.groupDiscussionList=[];var s={ciID:this.courseID,studentID:this.studentID};this.$mainHttp.groupDiscussion.getList(s).then(function(s){s.Result&&s.Datas&&s.Datas.length>0&&s.Datas.forEach(function(s){t.groupDiscussionList.push(s)})}).catch(function(t){})},getCourseWare:function(){var t=this;this.courseWareList=[];var s={chID:this.$store.getters.course.CHID,classID:this.$store.getters.classID};this.$mainHttp.courseware.getList(s).then(function(s){s.Result&&s.Datas&&s.Datas.length>0&&s.Datas.forEach(function(s){t.courseWareList.push(s)})}).catch(function(t){})},getBoardNote:function(){var t=this;this.boardNoteList=[];var s={ciID:this.courseID};this.$mainHttp.boardNote.getList(s).then(function(s){s.Result&&s.Datas&&s.Datas.length>0&&s.Datas.forEach(function(s){t.boardNoteList.push({img:t.$mainHttp.resourse.picture(s.BNContent,c.h.BoardNote),state:s.State,title:s.BNTitle,time:s.CreateTime,id:s.BNID,content:s.BNContent})})}).catch(function(t){})},getGroupNote:function(){var t=this;this.boardNoteList=[];var s={ciID:this.courseID,studentID:this.studentID};this.$mainHttp.groupNote.getList(s).then(function(s){s.Result&&s.Datas&&s.Datas.length>0&&s.Datas.forEach(function(s){t.groupNoteList.push({img:t.$mainHttp.resourse.picture(s.GNContent,c.h.groupNote),state:s.State,title:s.GNTitle,time:s.CreateTime,id:s.GNID,content:s.GNContent})})}).catch(function(t){})},getMiniCourse:function(){var t=this;this.miniCourseList=[];var s={ciID:this.courseID};this.$mainHttp.miniCourse.getList(s).then(function(s){s.Result&&s.Datas&&s.Datas.length>0&&s.Datas.forEach(function(s){t.miniCourseList.push({title:s.MLTitle,time:s.StartTime,typeName:Object(c.l)(s.MLType),src:t.$mainHttp.resourse.video(s.MLID,s.FileFormat),poster:o.a})})}).catch(function(t){})},getNote:function(){var t=this;this.noteList=[];var s={ciID:this.courseID,studentID:this.studentID};this.$mainHttp.note.getList(s).then(function(s){s.Result&&s.Datas&&s.Datas.length>0&&s.Datas.forEach(function(s){t.noteList.push(s)})}).catch(function(t){})},getsignStateName:function(t){return 1===t?"正常":2===t?"迟到":""},selectScreenQuestion:function(t){0!==t.total&&this.$router.push("/history/screenQuestion/"+t.type)},selectClassPractise:function(t){this.$router.push("/history/classPractise/"+t.CIPID+"/"+t.Key.PLID+"/"+t.Total)},selectGroupDiscussion:function(t){this.$router.push("/history/groupDiscussion/"+t.Key.GSID+"/"+t.Key.GroupID+"/"+t.GroupName)},selectCourseWare:function(t){},showPopup:function(t){this.selectIndex=t,this.show=!0},download:function(){var t=this.courseWareList[this.selectIndex],s=this.$mainHttp.resourse.file(t.MaterialID);window.webkit?(this.show=!1,Object(r.b)(r.a.downloadFile,s).then(function(t){}).catch(function(t){})):(window.location.href=s,this.show=!1,this.$toast("下载开始"))},previewFile:function(){var t=this.courseWareList[this.selectIndex];this.$router.push("/history/coursewareView/"+t.MaterialID+"/"+t.MaterialFileExt+"/"+t.MaterialName)},selectNote:function(t){this.$router.push({path:"/history/note/detail",query:{title:t.SNTtile,type:t.SNForm,content:t.SNContent,createTime:t.CreateTime}})},preview:function(t){this.imagePreview=Object(e.a)({images:[t],showIndex:!1,onClose:function(){}})}},computed:{},watch:{},destroyed:function(){this.imagePreview&&this.imagePreview.close()}},l={render:function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("div",{attrs:{id:"history"}},[i("head-top",{attrs:{title:"历史课程"}}),t._v(" "),i("div",{staticClass:"main"},[i("div",{staticClass:"item"},[i("div",{staticClass:"tt"},[t._v("课程信息")]),t._v(" "),i("div",{staticClass:"content"},[i("div",{staticClass:"name"},[t._v("课程名称："+t._s(t.courseInfo.CHName))]),t._v(" "),i("div",{staticClass:"name"},[t._v("科目："+t._s(t.courseInfo.CourseName))]),t._v(" "),i("div",{staticClass:"info"},[i("span",{staticClass:"tc"},[t._v("老师："+t._s(t.courseInfo.TeacherName))]),t._v(" "),i("span",{staticClass:"gd"},[t._v("班级："+t._s(t.courseInfo.ClassName))])]),t._v(" "),i("div",{staticClass:"info"},[i("span",{staticClass:"cs"},[t._v("教室："+t._s(t.courseInfo.ClassroomName))]),t._v(" "),i("span",{staticClass:"itime"},[t._v("\n            时间：\n            "+t._s(t._f("formatDate")(t.courseInfo.CreateTime,t.courseInfo.CreateTime))+"\n          ")])])])]),t._v(" "),i("div",{staticClass:"item"},[i("div",{staticClass:"tt"},[t._v("签到记录")]),t._v(" "),i("div",{staticClass:"content"},[t.signList&&t.signList.length>0?i("div",{staticStyle:{display:"flex","justify-content":"space-between","flex-wrap":"wrap"}},[1===t.signList.length?i("van-tag",{staticStyle:{"margin-bottom":"2vw"},attrs:{plain:"",type:"success"}},[t._v("\n            #签到时间："+t._s(t._f("formatDate")(t.signList[0].Key.SignTime,t.signList[0].Key.SignTime))+"\n          ")]):t._l(t.signList,function(s,e){return i("van-tag",{key:e,staticStyle:{"margin-bottom":"2vw"},attrs:{plain:"",type:"success"}},[t._v("\n            #第"+t._s(s.Number)+"次签到：\n            "+t._s(t._f("formatDate")(s.Key.SignTime,s.Key.SignTime))+"\n          ")])})],2):i("div",[t._v("\n          无签到数据\n        ")])])]),t._v(" "),i("div",{staticClass:"item"},[i("div",{staticClass:"tt"},[t._v("课程得分")]),t._v(" "),i("div",{staticClass:"content"},[i("div",{staticClass:"zt"},[t._v("\n          总分：\n          "),i("span",[t._v(t._s(t.courseScore.TotalScore)+" 分")])]),t._v(" "),i("div",{staticClass:"sub"},[i("span",[t._v("\n            截屏提问：\n            "),i("em",[t._v(t._s(t.courseScore.SAScore))])]),t._v(" "),i("span",[t._v("\n            小组讨论：\n            "),i("em",[t._v(t._s(t.courseScore.GDScore))])]),t._v(" "),i("span",[t._v("\n            随堂练习：\n            "),i("em",[t._v(t._s(t.courseScore.PAScore))])])])])]),t._v(" "),i("div",{staticClass:"item"},[i("div",{staticClass:"tt"},[t._v("\n        我的提问\n        "),t.questionList.length>2?i("span",{on:{click:function(s){return t.$router.push("/history/question")}}},[t._v("更多")]):t._e()]),t._v(" "),i("div",{staticClass:"content"},t._l(t.questionList,function(s,e){return i("div",{directives:[{name:"show",rawName:"v-show",value:e<2,expression:"i < 2"}],key:e,staticClass:"questions"},[i("div",{staticClass:"time"},[t._v("\n            "+t._s(t._f("formatDate")(s.CreateTime,s.CreateTime))+"\n          ")]),t._v(" "),i("div",{staticClass:"info"},[t._v(t._s(s.QContent))])])}),0)]),t._v(" "),i("div",{staticClass:"item"},[i("div",{staticClass:"tt"},[t._v("截屏提问")]),t._v(" "),t.screenQustionList.length>0?i("div",{staticClass:"content"},t._l(t.screenQustionList,function(s,e){return i("div",{key:e,staticClass:"sub",on:{click:function(i){return t.selectScreenQuestion(s)}}},[i("span",[t._v(t._s(e+1+"、"+s.name))]),t._v(" "),i("span",[t._v("\n            题数：\n            "),i("em",[t._v(t._s(s.total))]),t._v(" "),i("i",{staticClass:"iconfont icon-qianjin"})])])}),0):i("div",{staticClass:"content"},[i("div",{staticClass:"zt"},[t._v("暂无数据")])])]),t._v(" "),i("div",{staticClass:"item"},[i("div",{staticClass:"tt"},[t._v("随堂练习")]),t._v(" "),i("div",{staticClass:"content"},t._l(t.classPractiseList,function(s,e){return i("div",{key:e,staticClass:"sub",on:{click:function(i){return t.selectClassPractise(s)}}},[i("span",[t._v(t._s(s.PLTitle))]),t._v(" "),i("span",[t._v("\n            题数：\n            "),i("em",[t._v(t._s(s.Total))]),t._v(" "),i("i",{staticClass:"iconfont icon-qianjin"})])])}),0)]),t._v(" "),i("div",{staticClass:"item"},[i("div",{staticClass:"tt"},[t._v("小组讨论")]),t._v(" "),i("div",{staticClass:"content"},t._l(t.groupDiscussionList,function(s,e){return i("div",{key:e,staticClass:"sub",on:{click:function(i){return t.selectGroupDiscussion(s)}}},[i("span",[t._v(t._s(s.GroupName))]),t._v(" "),i("span",[t._v("\n            下发时间：\n            "),i("em",[t._v(t._s(t._f("formatMinutesTime")(s.Key.CreateTime,s.Key.CreateTime)))]),t._v(" "),i("em",[t._v("第"+t._s(s.GroupingNumber||0)+"次分组")]),t._v(" "),i("i",{staticClass:"iconfont icon-qianjin"})])])}),0)]),t._v(" "),i("div",{staticClass:"item"},[i("div",{staticClass:"tt"},[t._v("\n        课件\n        "),t.courseWareList.length>2?i("span",{on:{click:function(s){return t.$router.push("/courseware")}}},[t._v("更多")]):t._e()]),t._v(" "),i("div",{staticClass:"list"},t._l(t.courseWareList,function(s,e){return i("van-cell",{directives:[{name:"show",rawName:"v-show",value:e<2,expression:"index < 2"}],key:e,attrs:{"arrow-direction":"down","is-link":""},on:{click:function(s){return t.showPopup(e)}}},[i("template",{slot:"title"},[i("div",{staticClass:"list_cell"},[i("div",[i("i",{staticClass:"iconfont icon-word"}),t._v(" "),i("span",{staticClass:"title time"},[t._v("\n                  "+t._s(s.MaterialName+"."+s.MaterialFileExt)+"\n                ")])]),t._v(" "),i("div",{staticClass:"size time"},[s.MaterialFileSize>1048576?i("span",[t._v("\n                  "+t._s(Math.round(s.MaterialFileSize/1024/1024))+" MB\n                ")]):i("span",[t._v("\n                  "+t._s(Math.round(s.MaterialFileSize/1024))+" KB\n                ")])])])])],2)}),1)]),t._v(" "),i("div",{staticClass:"item"},[i("div",{staticClass:"tt"},[t._v("\n        板书\n        "),t.boardNoteList.length>0?i("span",{on:{click:function(s){return t.$router.push("/history/boardnote")}}},[t._v("更多")]):t._e()]),t._v(" "),i("div",{staticClass:"content"},[i("div",{staticClass:"sub-img"},t._l(t.boardNoteList,function(s,e){return i("div",{directives:[{name:"show",rawName:"v-show",value:e<2,expression:"index < 2"}],key:e,staticClass:"img"},[i("img",{attrs:{src:s.img,alt:""},on:{click:function(i){return t.preview(s.img)}}})])}),0)])]),t._v(" "),i("div",{staticClass:"item"},[i("div",{staticClass:"tt"},[t._v("\n        小组笔记\n        "),t.groupNoteList.length>0?i("span",{on:{click:function(s){return t.$router.push("/history/groupNote")}}},[t._v("更多")]):t._e()]),t._v(" "),i("div",{staticClass:"content"},[i("div",{staticClass:"sub-img"},t._l(t.groupNoteList,function(s,e){return i("div",{directives:[{name:"show",rawName:"v-show",value:e<2,expression:"index < 2"}],key:e,staticClass:"img"},[i("img",{attrs:{src:s.img,alt:""},on:{click:function(i){return t.preview(s.img)}}})])}),0)])]),t._v(" "),i("div",{staticClass:"item"},[i("div",{staticClass:"tt"},[t._v("\n        笔记\n        "),t.noteList.length>0?i("span",{on:{click:function(s){return t.$router.push("/history/note")}}},[t._v("更多")]):t._e()]),t._v(" "),i("div",{staticClass:"content"},t._l(t.noteList,function(s,e){return i("div",{directives:[{name:"show",rawName:"v-show",value:e<3,expression:"index < 3"}],key:e,staticClass:"sub",on:{click:function(i){return t.selectNote(s)}}},[i("span",[t._v(t._s(e+1+"、"+(s.SNTtile.length>16?s.SNTtile.substring(0,16)+"...":s.SNTtile)))]),t._v(" "),i("span",[i("em",[t._v(t._s(t._f("formatMinutesTime")(s.CreateTime,s.CreateTime)))]),t._v(" "),i("i",{staticClass:"iconfont icon-qianjin"})])])}),0)]),t._v(" "),i("div",{staticClass:"item"},[i("div",{staticClass:"tt"},[t._v("\n        课堂实况\n        "),t.miniCourseList.length>1?i("span",{on:{click:function(s){return t.$router.push("/history/liveLesson")}}},[t._v("更多")]):t._e()]),t._v(" "),i("div",{staticClass:"content"},t._l(t.miniCourseList,function(s,e){return i("div",{directives:[{name:"show",rawName:"v-show",value:e<1,expression:"index < 1"}],key:e,staticClass:"list_item"},[i("t-video",{attrs:{src:s.src,poster:s.poster}}),t._v(" "),i("div",{staticClass:"line_mark"},[s.title?i("span",[t._v(t._s(s.title))]):i("span",[t._v(t._s(t._f("formatDate")(s.time,s.time)))]),t._v(" "),i("span",[t._v("标签:"+t._s(s.RecLabel||"无"))])])],1)}),0)])]),t._v(" "),i("van-popup",{attrs:{position:"bottom"},model:{value:t.show,callback:function(s){t.show=s},expression:"show"}},[i("van-cell",{attrs:{value:"预览"},on:{click:function(s){return s.stopPropagation(),s.preventDefault(),t.previewFile(s)}}},[i("van-icon",{attrs:{slot:"right-icon","class-prefix":"iconfont icon-yulan"},slot:"right-icon"})],1),t._v(" "),i("van-cell",{attrs:{value:"下载"},on:{click:function(s){return s.stopPropagation(),s.preventDefault(),t.download(s)}}},[i("van-icon",{attrs:{slot:"right-icon","class-prefix":"iconfont icon-xiazai"},slot:"right-icon"})],1)],1)],1)},staticRenderFns:[]};var v=i("VU/8")(u,l,!1,function(t){i("Qrn5")},null,null);s.default=v.exports},Qrn5:function(t,s){}});
//# sourceMappingURL=34.cf298cab35d04142a6a4.js.map