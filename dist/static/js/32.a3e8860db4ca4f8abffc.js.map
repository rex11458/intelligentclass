{"version":3,"sources":["webpack:///src/pages/history/note/index.vue","webpack:///./src/pages/history/note/index.vue?1651","webpack:///./src/pages/history/note/index.vue"],"names":["note","name","components","NoteList","props","data","noteDataList","isLoading","value","error","finished","pno","pageSize","total","computed","searchData","_this","this","filter","r","title","indexOf","content","mounted","$nextTick","methods","onSearch","getDataList","_this2","reqData","ciID","$store","getters","courseID","studentID","psize","$mainHttp","getList","then","res","Result","Datas","length","sort","a","b","forEach","item","push","id","state","createTime","CHID","course","CIID","CHName","CourseName","RowsCount","catch","err","handleSelectNote","$router","path","query","snID","history_note","render","_vm","_h","$createElement","_c","_self","attrs","_v","staticClass","placeholder","on","search","model","callback","$$v","expression","refresh","finished-text","error-text","update:error","$event","load","data-list","select","_e","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/32.a3e8860db4ca4f8abffc.js","sourcesContent":["<template>\r\n  <div id=\"note\">\r\n    <head-top title=\"笔记\"></head-top>\r\n\r\n    <div class=\"search-input\">\r\n      <van-search placeholder=\"请输入搜索关键词\" v-model=\"value\" @search=\"onSearch\">\r\n      </van-search>\r\n    </div>\r\n\r\n    <van-pull-refresh v-model=\"isLoading\" @refresh=\"onSearch\" class=\"pull_fresh\">\r\n      <van-list v-model=\"isLoading\" :finished=\"finished\" finished-text=\"没有更多了\" :error.sync=\"error\"\r\n        error-text=\"请求失败，点击重新加载\" @load=\"getDataList\">\r\n        <note-list v-if=\"searchData && searchData.length > 0\" :data-list=\"searchData\"\r\n          @select=\"handleSelectNote\">\r\n        </note-list>\r\n      </van-list>\r\n    </van-pull-refresh>\r\n\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport NoteList from \"@/components/r-note\";\r\nexport default {\r\n  name: \"\",\r\n  components: { NoteList },\r\n  props: {},\r\n  data() {\r\n    return {\r\n      noteDataList: [],\r\n      isLoading: false,\r\n      value: \"\",\r\n\r\n      error: false,\r\n      finished: false,\r\n      pno: 0,\r\n      pageSize: 5,\r\n      total: 0\r\n    };\r\n  },\r\n  computed: {\r\n    searchData() {\r\n      if (!this.value) {\r\n        return this.noteDataList;\r\n      } else {\r\n        return this.noteDataList.filter(\r\n          r =>\r\n            r.title.indexOf(this.value) > -1 ||\r\n            r.content.indexOf(this.value) > -1\r\n        );\r\n      }\r\n    }\r\n  },\r\n  mounted() {\r\n    this.$nextTick(() => {\r\n      // this.getDataList();\r\n    });\r\n  },\r\n  methods: {\r\n    onSearch() {\r\n      this.error = false;\r\n      this.finished = false;\r\n      this.pno = 0;\r\n      this.total = 0;\r\n      // this.dataList = [];\r\n      this.noteDataList = [];\r\n      this.getDataList();\r\n    },\r\n    getDataList() {\r\n      this.isLoading = true;\r\n      if (this.pno === 0 || this.total > this.pno * this.pageSize) {\r\n        this.pno++;\r\n      } else {\r\n        this.isLoading = false;\r\n        this.finished = true;\r\n        return;\r\n      }\r\n      let reqData = {\r\n        ciID: this.$store.getters.courseID,\r\n        studentID: this.$store.getters.studentID,\r\n        psize: this.pageSize,\r\n        pno: this.pno\r\n      };\r\n      this.$mainHttp.note\r\n        .getList(reqData)\r\n        .then(res => {\r\n          if (res.Result && res.Datas && res.Datas.length > 0) {\r\n            res.Datas.sort((a, b) => {\r\n              if (a[\"CreateTime\"] > b[\"CreateTime\"]) {\r\n                return -1;\r\n              } else {\r\n                return 1;\r\n              }\r\n            });\r\n\r\n            res.Datas.forEach(item => {\r\n              // this.dataList.push(item);\r\n              this.noteDataList.push({\r\n                id: item[\"SNID\"],\r\n                title: item[\"SNTtile\"],\r\n                content: item[\"SNContent\"],\r\n                state: item[\"State\"],\r\n                createTime: item[\"CreateTime\"],\r\n                CHID: this.$store.getters.course[\"CHID\"],\r\n                CIID: this.$store.getters.course[\"CIID\"],\r\n                CHName: this.$store.getters.course[\"CHName\"],\r\n                CourseName: this.$store.getters.course[\"CourseName\"]\r\n              });\r\n            });\r\n          }\r\n          if (res.RowsCount) this.total = res.RowsCount;\r\n          if (this.total <= this.pno * this.pageSize) this.finished = true;\r\n          this.isLoading = false;\r\n        })\r\n        .catch(err => {\r\n          this.error = true;\r\n          this.isLoading = false;\r\n        });\r\n    },\r\n    handleSelectNote(item) {\r\n      this.$router.push({\r\n        path: \"/history/note/detail\",\r\n        query: {\r\n          snID: item.id,\r\n          title: item.title,\r\n          content: item.content,\r\n          createTime: item.createTime\r\n        }\r\n      });\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style lang='less' scoped>\r\n@import url(\"./../../../styles/common/base.less\");\r\n#note {\r\n  .head-back {\r\n    display: none;\r\n  }\r\n\r\n  .search-input {\r\n    position: fixed;\r\n    width: 100%;\r\n    top: 43px;\r\n    z-index: 9;\r\n    /deep/ .van-search {\r\n      position: relative;\r\n      &:after {\r\n        content: \"\";\r\n        position: absolute;\r\n        left: 0;\r\n        bottom: 0;\r\n        width: 100%;\r\n        height: 1PX;\r\n        background-color: #ccc;\r\n        transform: scaleY(0.3);\r\n      }\r\n    }\r\n    .van-search__content {\r\n      background: #ebf0ef;\r\n      .van-cell__value--alone {\r\n        font-size: @font-info;\r\n      }\r\n      .van-field__left-icon {\r\n        margin-right: 5px;\r\n        position: absolute;\r\n        right: 10px;\r\n      }\r\n    }\r\n  }\r\n\r\n  .pull_fresh {\r\n    padding-top: 54px;\r\n    background: #fff;\r\n  }\r\n}\r\n</style>\n\n\n// WEBPACK FOOTER //\n// src/pages/history/note/index.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"note\"}},[_c('head-top',{attrs:{\"title\":\"笔记\"}}),_vm._v(\" \"),_c('div',{staticClass:\"search-input\"},[_c('van-search',{attrs:{\"placeholder\":\"请输入搜索关键词\"},on:{\"search\":_vm.onSearch},model:{value:(_vm.value),callback:function ($$v) {_vm.value=$$v},expression:\"value\"}})],1),_vm._v(\" \"),_c('van-pull-refresh',{staticClass:\"pull_fresh\",on:{\"refresh\":_vm.onSearch},model:{value:(_vm.isLoading),callback:function ($$v) {_vm.isLoading=$$v},expression:\"isLoading\"}},[_c('van-list',{attrs:{\"finished\":_vm.finished,\"finished-text\":\"没有更多了\",\"error\":_vm.error,\"error-text\":\"请求失败，点击重新加载\"},on:{\"update:error\":function($event){_vm.error=$event},\"load\":_vm.getDataList},model:{value:(_vm.isLoading),callback:function ($$v) {_vm.isLoading=$$v},expression:\"isLoading\"}},[(_vm.searchData && _vm.searchData.length > 0)?_c('note-list',{attrs:{\"data-list\":_vm.searchData},on:{\"select\":_vm.handleSelectNote}}):_vm._e()],1)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-6b3b3bc9\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/pages/history/note/index.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-6b3b3bc9\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!less-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./index.vue\")\n}\nvar normalizeComponent = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./index.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./index.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-6b3b3bc9\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./index.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-6b3b3bc9\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/history/note/index.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}