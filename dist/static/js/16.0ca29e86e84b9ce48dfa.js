webpackJsonp([16],{CgjN:function(t,e){},ORMB:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o("UDsO"),s={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{attrs:{id:"course"}},[o("head-top",{attrs:{title:t.courseInfo.CourseName||"课程"}}),t._v(" "),o("div",{staticClass:"bg"},[o("div",{staticClass:"bg-title"}),t._v(" "),o("div",{staticClass:"title"},[t._v(t._s(t.courseInfo.CHName))]),t._v(" "),o("div",{staticClass:"flex-evenly"},[o("span",[t._v("老师："+t._s(t.courseInfo.TeacherName))]),t._v(" "),o("span",[t._v("班级："+t._s(t.courseInfo.ClassName))])]),t._v(" "),o("div",{staticClass:"flex-evenly bg_foot"},[o("span",[t._v("教室："+t._s(t.courseInfo.ClassroomName))]),t._v(" "),o("span",[t._v("\n        时间：\n        "+t._s(t._f("formatDate")(t.courseInfo.CreateTime,t.courseInfo.CreateTime))+"\n      ")])])]),t._v(" "),o("div",{staticClass:"content"},t._l(t.courseDetails,function(e){return o("div",{key:e.text,staticClass:"item",on:{click:function(o){return t.goTo(e.path)}}},[o("div",{staticClass:"icon"},[o("i",{staticClass:"iconfont",class:e.icon})]),t._v("\n      "+t._s(e.text)+"\n    ")])}),0),t._v(" "),o("van-popup",{staticClass:"dialog",attrs:{position:"top"},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[t._l(t.groupList,function(e,n){return o("div",{key:n,staticClass:"ct",class:{selected:t.selectIndex==n},on:{click:function(o){return t.selectChange(e,n)}}},[o("div",{staticClass:"name-info"},[o("div",{staticClass:"name"},[t._v(t._s(n+1+"、"+(e.groupName||"第"+(n+1)+"组")))]),t._v(" "),o("div",{directives:[{name:"show",rawName:"v-show",value:"选择加入小组"===t.dialogTitle,expression:"dialogTitle==='选择加入小组'"}],staticClass:"info"},[e.currentNum===e.groupMax?o("span",[t._v("已满")]):o("span",[t._v(t._s(e.currentNum+" / "+e.groupMax))])])]),t._v(" "),o("div",{staticClass:"xx"},[o("i",{directives:[{name:"show",rawName:"v-show",value:t.selectIndex==n,expression:"selectIndex==i"}],staticClass:"iconfont icon-finish"})])])}),t._v(" "),o("div",{staticClass:"pop_foot"},[t._v("\n      "+t._s(t.selectIndex>-1?"加入："+(t.groupList[t.selectIndex].groupName||"第"+(t.selectIndex+1)+"组"):t.dialogTitle)+"\n      "),o("van-button",{staticClass:"pop_foot_btn",attrs:{type:"primary",plain:"",size:"small"},on:{click:function(e){return t.confirmDialog()}}},[t._v("\n        加入")])],1)],2)],1)},staticRenderFns:[]};var i=function(t){o("CgjN")},a=o("VU/8")(n.a,s,!1,i,"data-v-9d35c49a",null);e.default=a.exports},UDsO:function(t,e,o){"use strict";(function(t){var n=o("bOdI"),s=o.n(n),i=(o("XmAh"),o("il3B")),a=o("FwVa"),r=o("j/ZV");e.a={name:"",components:s()({},i.a.Component.name,i.a.Component),props:{},beforeRouteEnter:function(t,e,o){o(function(t){t.$gatewayHttp.gateway.linkTest().then(function(e){t.linkState=1}).catch(function(e){t.linkState=0,i.a.alert({title:"警告",message:"找不到当前课程服务！即将退出"}).then(function(){o("/homeCourse")})})})},beforeRouteLeave:function(t,e,o){var n=this.$store.getters.courseID&&"/homeCourse"===t.path,s=this.$store.getters.nowCourseID&&this.$store.getters.courseID!==this.$store.getters.nowCourseID;(n&&s||!this.linkState)&&o(),n&&window.GatewayHub&&1===window.GatewayHub.connection.state?i.a.confirm({title:"警告",message:"是否强制退出当前课程？"}).then(function(){o()}).catch(function(){o(!1)}):o()},data:function(){return{linkState:1,selectIndex:-1,groupList:[],courseInfo:this.$store.getters.course,courseDetails:[{path:"/signIN",icon:"icon-qiandao",text:"签到"},{path:"/groupInfo",icon:"icon-renmai",text:"我的小组"},{path:"/groupDiscussion",icon:"icon-taolun",text:"小组讨论"},{path:"/teacherscreen",icon:"icon-pingmu-",text:"老师屏幕"},{path:"/quiz",icon:"icon-weibiaoti-",text:"随堂测验"},{path:"/question",icon:"icon-tiwen2",text:"提问"},{path:"/touping",icon:"icon-touping",text:"投屏"},{path:"/note",icon:"icon-edu-biji",text:"笔记"},{path:"/blackboardWriting",icon:"icon-banshubianjiqi-dianji",text:"板书"},{path:"/groupNote",icon:"icon-groupnote",text:"小组笔记"},{path:"/liveLesson",icon:"icon-weike",text:"课堂实况"},{path:"/courseware",icon:"icon-kejian",text:"课件"}],show:!1,dialogTitle:"",cifmBtnText:""}},created:function(){this.$gatewaySignalR.startGatewaySignalR()},mounted:function(){for(var e=["#00CBAB","#3AA0E0","#E38653","#F95F5F","#A36EE5","#E38653","#3AA0E0","#00CBAB","#A36EE5","#3AA0E0","#E38653","#00CBAB"],o=[],n=0;n<this.courseDetails.length;n++){var s="."+this.courseDetails[n].icon;o.push(s)}for(var i=0;i<e.length;i++)t(o[i]).css("color",e[i]);this.$nextTick(function(){})},methods:{autoSign:function(){var t=this,e={studentID:this.$store.getters.studentID,qrCodeStr:this.$store.getters.courseID,signCode:""};this.$gatewayHttp.sign.getSign(e).then(function(e){e.Result||t.$toast("签到失败")}).catch(function(e){t.$toast("签到失败，请重新签到")})},openGroupDialog:function(){this.$store.getters.groupID||this.$store.getters.groupType!==a.e.Free||this.$router.push("/joinGroup")},getGroupDataList:function(t){var e=this;this.$store.dispatch("GetGroupByUser").then(function(o){if(o.Result||o.IsGrouping){if(o.Result){if(o.Datas&&o.Datas.length>0)e.groupList=[],o.Datas.forEach(function(t){var o={gatewayID:t.Key.GatewayID,groupID:t.Key.GroupID,groupName:t.Key.GroupName,groupMax:t.Key.GroupNumber,groupingID:t.Key.GroupingID,studentID:t.Key.StudentID,currentNum:t.Total};e.groupList.push(o)}),e.$router.push("/joinGroup");else if(o.Data&&e.$store.getters.groupID){var n=t;e.$router.push(n)}e.groupList=[]}}else e.$toast("当前尚无分组~")}).catch(function(t){e.groupList=[]})},getSignWay:function(){var t=this;this.$gatewayHttp.sign.dataList({CIID:this.$store.getters.courseID,studentID:this.$store.getters.studentID}).then(function(e){e.SignModel?t.$router.push("/signIN/"+e.SignModel+"/"+(e.Result?"1":"0")):t.$toast("获取签到状态失败~")}).catch(function(e){t.$toast("获取签到状态异常~")})},selectChange:function(t,e){t.currentNum!==t.groupMax&&(this.selectIndex=e)},confirmDialog:function(){-1!==this.selectIndex?"选择加入小组"===this.dialogTitle?this.joinGroup():"投屏选择"===this.dialogTitle&&this.$router.push("/quiz"):this.$toast("请选择小组")},joinGroup:function(){var t=this,e=this.groupList[this.selectIndex];this.$store.dispatch("JoinGroup",e.groupID,e).then(function(e){e.Result?(t.$toast("加入成功~"),t.getGroupDataList("/groupInfo")):e.Info&&t.$toast(e.Info)}).catch(function(t){})},onChange:function(t,e,o){this.$toast("当前值："+e+", 当前索引："+o)},goBack:function(){this.$router.go(-1)},goTo:function(t){var e=this;if("/groupDiscussion"===t||"/groupInfo"===t)this.getGroupDataList(t);else if("/signIN"===t)this.getSignWay();else if("/teacherscreen"===t)Object(r.b)(r.a.broadcastStart,"10").then(function(t){});else if("/touping"===t)this.goToToupin();else if("/start"===t){var o=prompt("请输入投屏地址：","192.168.0.28,192.168.0.51");if(!o)return;Object(r.b)(r.a.throwScreenStart,o).then(function(t){t||e.$toast("多点投屏开启失败~")})}else if("/close"===t){var n=prompt("请输入关闭的投屏地址","-1");if(!n)return;Object(r.b)(r.a.throwScreenStop,n).then(function(t){t||e.$toast("多点投屏关闭失败~")})}else this.$router.push(t)},goTOxiaoz:function(){this.$router.push("/groupDiscussion")},goTOQuiz:function(){this.$router.push("/quiz")},goToToupin:function(){this.$store.dispatch("GetGroupByUser").then(function(){Object(r.b)(r.a.throwScreenOpen,"").then(function(t){})}).catch(function(){Object(r.b)(r.a.throwScreenOpen,"").then(function(t){})})}},watch:{"$store.getters.groupID":function(t,e){t!==e&&this.openGroupDialog()},"$store.getters.groupType":function(t,e){t!==e&&this.openGroupDialog()}}}}).call(e,o("7t+N"))}});
//# sourceMappingURL=16.0ca29e86e84b9ce48dfa.js.map