(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-69e1f158"],{7506:function(e,t,s){"use strict";var n=s("ca73"),i=s.n(n);i.a},"78ee":function(e,t,s){"use strict";s.r(t);var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"screen-question-view"},[s("head-top",{attrs:{title:"截屏提问明细"}}),s("div",{staticClass:"sub_nav"},[s("span",[e._v(e._s(e.screenQuestion.index)+"、"+e._s(e.typeNames[e.screenQuestion.type-1]))]),s("van-tag",{attrs:{plain:"",type:"success"}},[e._v(e._s(e.screenQuestion.ModeName))]),s("span",[e._v(e._s(e.screenQuestion.stateName))])],1),s("div",{staticClass:"sub_module"},[s("r-image",{staticClass:"item-left",attrs:{width:"90vw",height:"30vw",src:e.screenQuestion.imgSrc}})],1),s("div",{staticClass:"sub_module"},[s("div",{staticClass:"flex-between"},[s("span",[e._v("时长："+e._s(e.screenQuestion.time))]),s("span",[e._v("分数："+e._s(e.screenQuestion.score))]),s("span",[e._v("下发："+e._s(e.screenQuestion.createTime))])])]),e._m(0),s("div",{staticClass:"sub_module"},[s("p",[e._v(e._s(e.screenQuestion.answer||""))])]),e.screenQuestion.type+""!=="4"?[e._m(1),s("div",{staticClass:"sub_module"},[s("div",{staticClass:"flex-wrap-between"},[e._l(e.optionPersons,(function(t,n){return s("div",{key:n,staticClass:"van-hairline--surround list-col",on:{click:function(s){return e.showOptionPersons(t)}}},[s("span",[e._v(e._s(t.name)+"："+e._s(t.total))])])})),e._l((4-e.optionPersons.length%4)%4,(function(e){return s("div",{key:-e,staticClass:" list-col"})}))],2)])]:[s("div",{staticClass:"sub_nav"},[s("span",[e._v("提交成员")]),s("span",[e._v(e._s(e.submitPersonList.length)+"人")])]),s("div",{staticClass:"sub_module"},[0===e.submitPersonList.length?s("r-lack-data"):s("div",{staticClass:"flex-wrap-between"},[e._l(e.submitPersonList,(function(t,n){return s("div",{key:n,staticClass:"student_card van-hairline--surround",on:{click:function(s){return e.toAnswer(t)}}},[s("img",{directives:[{name:"real-img",rawName:"v-real-img",value:[t.userID,t.studentID],expression:"[sub.userID, sub.studentID]"}],staticClass:"col_4",attrs:{src:e.defaultHead,alt:""}}),s("div",[e._v(e._s(t.studentName))]),s("van-tag",{attrs:{type:"success",plain:""}},[e._v(e._s(t.score||0)+"分")])],1)})),e._l(Math.abs(4-e.submitPersonList.length%4)%4,(function(e){return s("div",{key:-e,staticClass:"student_card",staticStyle:{width:"19vw"}})}))],2)],1)],1!==e.screenQuestion.state&&e.screenQuestion.questionMode===e.allAnswer?[s("div",{staticClass:"sub_nav"},[s("span",[e._v("调研情况")]),1!==e.screenQuestion.survey&&2===e.screenQuestion.state?s("span",[e._v(" 未调研 ")]):1===e.screenQuestion.survey?s("span",[e._v("已调研")]):e._e()]),1===e.screenQuestion.survey?s("div",{staticClass:"sub_module"},[1!==e.screenQuestion.state?s("div",{staticClass:"flex-between"},[s("div",{staticClass:"van-hairline--surround list-col"},[s("span",[e._v("已掌握："+e._s(e.surveyInfo.yes))])]),s("div",{staticClass:"van-hairline--surround list-col"},[s("span",[e._v("未掌握："+e._s(e.surveyInfo.no))])])]):s("r-lack-data")],1):e._e()]:e._e(),s("van-popup",{attrs:{position:"bottom",closeable:""},model:{value:e.optionPersonsShow,callback:function(t){e.optionPersonsShow=t},expression:"optionPersonsShow"}},[e.optionPersonsSelected?s("div",{staticClass:"sub_nav",staticStyle:{"line-height":"48px"}},[s("span",[e._v("以下人员，提交选项为"+e._s(e.optionPersonsSelected.name))])]):e._e(),e.optionPersonsSelected?s("div",{staticClass:"sub_module"},[0===e.optionPersonsSelected.persons.length?s("span",[e._v("暂无数据")]):s("div",{staticClass:"flex-wrap-between"},[e._l(e.optionPersonsSelected.persons,(function(t,n){return s("div",{key:n,staticClass:"student_card van-hairline--surround"},[s("img",{directives:[{name:"real-img",rawName:"v-real-img",value:[t.userID,t.studentID],expression:"[sub.userID, sub.studentID]"}],staticClass:"col_4",attrs:{src:e.defaultHead,alt:""}}),s("div",[e._v(e._s(t.studentName))])])})),e._l(Math.abs(4-e.optionPersonsSelected.persons.length%4)%4,(function(e){return s("div",{key:-e,staticClass:"student_card",staticStyle:{width:"19vw"}})}))],2)]):e._e()]),s("van-popup",{attrs:{position:"bottom",closeable:""},model:{value:e.submitPersonsShow,callback:function(t){e.submitPersonsShow=t},expression:"submitPersonsShow"}},[s("div",{staticClass:"sub_nav",staticStyle:{"line-height":"48px"}},[4!==e.screenQuestion.type?s("span",[e._v("作答明细")]):s("span",[e._v("答题评分")])]),e.submitPersonSelected?s("div",[s("van-field",{attrs:{label:"提交学生：",disabled:""},model:{value:e.submitPersonSelected.studentName,callback:function(t){e.$set(e.submitPersonSelected,"studentName",t)},expression:"submitPersonSelected.studentName"}}),s("van-field",{attrs:{label:"正确答案：",type:"textarea",disabled:""},model:{value:e.screenQuestion.answer,callback:function(t){e.$set(e.screenQuestion,"answer",t)},expression:"screenQuestion.answer"}}),s("van-field",{attrs:{label:"提交答案：",disabled:""},scopedSlots:e._u([{key:"input",fn:function(){return[4!==e.screenQuestion.type?s("span",{style:{color:"#969799"}},[e._v(e._s(e.submitPersonSelected.answer))]):s("div",{staticClass:"answer-content",domProps:{innerHTML:e._s(e.transform(e.submitPersonSelected.answer))}})]},proxy:!0}],null,!1,4107279172)}),1===e.screenQuestion.survey?s("van-field",{attrs:{label:"问卷调研：",disabled:""},scopedSlots:e._u([{key:"input",fn:function(){return[1===e.submitPersonSelected.master?s("van-tag",{attrs:{type:"success"}},[e._v("已掌握")]):0===e.submitPersonSelected.master?s("van-tag",{attrs:{type:"danger"}},[e._v("未掌握")]):s("van-tag",[e._v("未参与")])]},proxy:!0}],null,!1,1206316893)}):e._e(),s("van-field",{attrs:{label:"本题分数：",disabled:""},model:{value:e.screenQuestion.score,callback:function(t){e.$set(e.screenQuestion,"score",t)},expression:"screenQuestion.score"}}),s("van-field",{attrs:{name:"stepper",label:"作答得分："},scopedSlots:e._u([{key:"input",fn:function(){return[4!==e.screenQuestion.type?s("span",{style:{color:"#969799"}},[e._v(e._s(e.submitPersonSelected.score||0))]):s("van-stepper",{attrs:{integer:"",min:"0",max:e.screenQuestion.score},model:{value:e.submitPersonSelected.score,callback:function(t){e.$set(e.submitPersonSelected,"score",t)},expression:"submitPersonSelected.score"}}),s("span",{staticStyle:{"padding-left":"10px"}},[e._v("分")])]},proxy:!0}],null,!1,4141152733)}),s("van-field",{attrs:{label:"老师点评：",placeholder:"请填写老师点评",type:"textarea",maxlength:"100",autosize:"","show-word-limit":""},model:{value:e.submitPersonSelected.comment,callback:function(t){e.$set(e.submitPersonSelected,"comment",t)},expression:"submitPersonSelected.comment"}}),4===e.screenQuestion.type?s("van-button",{staticStyle:{width:"100%"},attrs:{type:"primary"},on:{click:e.toScore}},[e._v("提交 ")]):e._e()],1):s("r-lack-data")],1)],2)},i=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"sub_nav"},[s("span",[e._v("正确答案")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"sub_nav"},[s("span",[e._v("作答情况")])])}],o=(s("4160"),s("b0c0"),s("159b"),s("cb60")),a=s("ed08"),r=s("08f3"),c={name:"screen-question-view",components:{RImage:o["a"]},data:function(){return{defaultHead:s("a5b7"),screenQuestion:this.$store.getters.screenQuestion,typeNames:["单选题","多选题","判断题","问答题"],optionPersons:[],optionPersonsSelected:null,optionPersonsShow:!1,submitPersonList:[],submitPersonsShow:!1,submitPersonSelected:null,allAnswer:r["f"].all,randomPick:r["f"].random,surveyInfo:{yes:0,no:0}}},mounted:function(){4!==this.screenQuestion.type?this.getAnswerStatistics():this.getSubmitPerson(),this.getSurveyStatistic()},methods:{transform:function(e){return Object(a["h"])("show",e,this.$mainHttp.common.picture)},getAnswerStatistics:function(){var e=this;this.optionPersons=[],this.$mainHttp.screenQuestion.answerStatistics({ssid:this.screenQuestion.id}).then((function(t){t.Result&&t.Datas&&t.Datas.length>0&&t.Datas.forEach((function(t){e.optionPersons.push({name:t["OptionName"],total:t["Total"],persons:[]})}))})).catch((function(){}))},showOptionPersons:function(e){e.total>0&&(this.optionPersonsSelected=e,this.optionPersonsShow=!0,this.getOptionPerson())},getOptionPerson:function(){var e=this;this.optionPersonsSelected.persons=[],this.$mainHttp.screenQuestion.answerPerson({ssid:this.screenQuestion.id,answer:this.optionPersonsSelected.name}).then((function(t){t.Datas&&t.Datas.length>0?t.Datas.forEach((function(t){e.optionPersonsSelected.persons.push({studentID:t.Key["StudentID"],userID:t.Key["UserID"],studentName:t.Key["StudentName"]})})):t.Info&&e.$toast(t.Info)})).catch((function(){}))},getSubmitPerson:function(){var e=this;this.submitPersonList=[],this.$mainHttp.screenQuestion.answerSubmit({ssid:this.screenQuestion.id}).then((function(t){t.Datas&&t.Datas.length>0?t.Datas.forEach((function(t){e.submitPersonList.push({studentID:t.Key["StudentID"],userID:t["UserID"],studentName:t["StudentName"],trueAnswer:t["SSAnswer"],answer:t.Key["SAContent"],master:t.Key["SAMaster"],score:t.Key["SAScore"],comment:t.Key["SAComment"],submitTime:t.Key["SubmitTime"],id:t.Key["SAID"]})})):t.Info&&e.$toast(t.Info)})).catch((function(){}))},toAnswer:function(e){this.submitPersonsShow=!0,this.submitPersonSelected=e},toScore:function(){var e=this;this.$mainHttp.screenQuestion.postSetComment({said:this.submitPersonSelected.id,saScore:this.submitPersonSelected.score,comment:this.submitPersonSelected.comment}).then((function(t){t.Result?(e.submitPersonsShow=!1,e.$toast("更新评分成功"),e.getSubmitPerson()):t.Info?e.$toast(t.Info):e.$toast("更新评分失败")})).catch((function(){e.$toast("操作失败")}))},getSurveyStatistic:function(){var e=this;this.$mainHttp.screenQuestion.surveyInfo({ssID:this.screenQuestion.id}).then((function(t){t.Result?e.surveyInfo={yes:t["YesMaster"],no:t["NoMaster"]}:t.Info&&e.$toast(t.Info)})).catch((function(){}))}}},u=c,l=(s("7506"),s("2877")),d=Object(l["a"])(u,n,i,!1,null,"694334a3",null);t["default"]=d.exports},ca73:function(e,t,s){},cb60:function(e,t,s){"use strict";var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("van-image",{style:{width:e.width,height:e.height},attrs:{fit:e.fit,src:e.src},on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.preview(t)}},scopedSlots:e._u([{key:"loading",fn:function(){return[s("van-loading",{attrs:{type:"spinner",size:"20"}})]},proxy:!0},{key:"error",fn:function(){return[e._v(e._s(e.errMsg))]},proxy:!0}])}),s("van-image-preview",{attrs:{showIndex:!1,images:e.images},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}})],1)},i=[],o=(s("b0c0"),s("ade3")),a=s("1e55"),r={name:"r-image",components:Object(o["a"])({},a["ImagePreview"].Component.name,a["ImagePreview"].Component),props:{width:{type:String,default:"100px"},height:{type:String,default:"100px"},fit:{type:String,default:"scale-down"},src:{type:String,default:""},errMsg:{type:String,default:"加载失败"}},data:function(){return{show:!1,images:[]}},methods:{preview:function(){this.images=[this.src],this.show=!0}}},c=r,u=s("2877"),l=Object(u["a"])(c,n,i,!1,null,null,null),d=l.exports;t["a"]=d}}]);