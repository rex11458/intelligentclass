(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-319b4a9f"],{"1e3a":function(t,e,s){},"6cb6":function(t,e,s){"use strict";s.r(e);var o=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"course-power"},[s("head-top",[s("span",{staticClass:"header_title",attrs:{slot:""},slot:"default"},[s("span",[t._v("班级邀请码")]),s("van-icon",{staticClass:"cell_icon",attrs:{name:"qr-invalid"},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.toShow(e)}}})],1),s("div",{staticClass:"head-right",style:{fontSize:"16px"},on:{click:function(e){return t.$router.push("/course/link")}}},[t._v(" 连接码 ")])]),s("div",{style:{width:"0",height:"0",overflow:"hidden"}},[s("r-qrcode",{ref:"erCode",attrs:{codeValue:t.classCode,title:"邀请码","sub-title":"学生扫一扫加入当前课堂"}},[s("div",{staticClass:"code_operate",attrs:{slot:"footer"},slot:"footer"},[t._v(" 班级： "),s("span",{on:{click:t.editClass}},[t._v(" "+t._s(t.className)+" "),s("van-icon",{attrs:{name:"edit"}})],1)])])],1),s("div",{staticClass:"black_board"},[s("div",{staticClass:"board_title"},[t._v(t._s(t.courseInfo.classHourName))]),s("div",{staticClass:"flex-evenly"},[s("span",[t._v("老师："+t._s(t.courseInfo.teacherName))]),s("span",[t._v("班级："+t._s(t.courseInfo.className))])]),s("div",{staticClass:"flex-evenly bg_foot"},[s("span",[t._v("教室："+t._s(t.courseInfo.classRoomName))]),s("span",[t._v(" 日期："+t._s(t.courseInfo.classDate)+" ")])])]),t._m(0),s("div",{staticClass:"flex-wrap-around func_list"},[t._l(t.activity,(function(e,o){return s("div",{key:o,staticClass:"func_card",class:{disabled:e.operate===t.operateType.screen&&t.screenLock||e.operate===t.operateType.question&&t.questionLock||e.operate===t.operateType.video&&t.videoStart||e.disabled},on:{click:function(s){return t.funcClick(e)}}},[s("div",{staticClass:"func_icon activity"},[s("i",{staticClass:"iconfont",class:e.icon})]),s("div",{staticClass:"card_info"},[t._v(t._s(e.title))])])})),t._l((4-t.activity.length%4)%4,(function(t){return s("div",{key:-t,staticClass:"func_card"})}))],2),t._m(1),s("div",{staticClass:"flex-wrap-around func_list"},[t._l(t.contents,(function(e,o){return s("div",{key:o,staticClass:"func_card",on:{click:function(s){return t.contentClick(e)}}},[s("div",{staticClass:"func_icon content"},[s("i",{staticClass:"iconfont",class:e.icon})]),s("div",{staticClass:"card_info"},[t._v(t._s(e.title))])])})),t._l((4-t.contents.length%4)%4,(function(t){return s("div",{key:-t,staticClass:"func_card"})}))],2),t._m(2),s("van-popup",{attrs:{position:"bottom",closeable:""},model:{value:t.videoShow,callback:function(e){t.videoShow=e},expression:"videoShow"}},[s("div",{staticClass:"sub_nav",staticStyle:{"line-height":"48px"}},[s("span",[t._v("设置标签")])]),s("van-field",{attrs:{label:"标签名称：",placeholder:"请填写标签名称",type:"textarea",maxlength:"30",autosize:"","show-word-limit":""},model:{value:t.videoLabel,callback:function(e){t.videoLabel=e},expression:"videoLabel"}}),s("van-button",{staticStyle:{width:"100%"},attrs:{type:"primary"},on:{click:t.saveVideo}},[t._v("确定 ")])],1)],1)},i=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"sub_nav"},[s("span",[t._v("课堂交互")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"sub_nav"},[s("span",[t._v("资源")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"sub_nav"},[s("span",{staticClass:"sub_visible"},[t._v("ios下异常，临时处理")])])}],n=(s("99af"),s("7db0"),s("c740"),s("a434"),s("b0c0"),function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("span",{staticClass:"r-qrcode",on:{click:function(t){t.stopPropagation()}}},[s("van-icon",{staticClass:"cell_icon",attrs:{name:"qr-invalid"},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.qrCodeClick(e)}}}),s("van-popup",{style:{maxHeight:"unset"},model:{value:t.codeShow,callback:function(e){t.codeShow=e},expression:"codeShow"}},[s("div",{staticClass:"invite-code"},[s("div",{staticClass:"code-info"},[t._v(" "+t._s(t.title)+"： "),s("span",{staticClass:"code-value"},[t._v(t._s(t.codeValue))])]),s("p",{staticClass:"code-remark"},[t._v(t._s(t.subTitle))]),s("canvas",{attrs:{id:t.divName}}),t.$scopedSlots["footer"]?t._t("footer"):t._e()],2)])],1)}),a=[],c=s("d055"),r=s.n(c),l={name:"r-qrcode",components:{},props:{title:{type:String,default:"邀请码"},codeValue:{type:String,default:"888888"},subTitle:{type:String,default:"睿课学首页右上角输入"}},data:function(){return{divName:"QrSign"+(new Date).getTime(),codeShow:!1}},methods:{qrCodeClick:function(){var t=this,e={CIID:this.$store.getters.courseID,CodeValue:this.codeValue};this.codeShow=!0,setTimeout((function(){r.a.toCanvas(document.getElementById(t.divName),JSON.stringify(e,null,"\t"),{errorCottectionLevel:"H",margin:1,width:300},(function(t){t&&console.log(t)}))}),0)}}},u=l,h=s("2877"),d=Object(h["a"])(u,n,a,!1,null,null,null),p=d.exports,f=p,v=s("1e55"),m=s("6828"),g=s("08f3"),S={screen:g["l"].AllowThrowScreen,question:g["l"].AllowQuestion,video:g["l"].IsRec,stopCourse:"exit"},y={name:"course-power",components:{RQrcode:f},data:function(){return{courseInfo:{classHourName:this.$store.getters.classHour.name||"课时名称",teacherName:this.$store.getters.teacher["TeacherName"]||"教师名称",className:this.$store.getters.class.name||"默认班级",classRoomName:this.$store.getters.course.classRoomName||"默认教室",classDate:Object(m["a"])(this.$store.getters.course.classDate,"yyyy-MM-dd"),updateTime:Object(m["a"])(this.$store.getters.course.updateTime,"yyyy-MM-dd hh:mm")},className:this.$store.getters.class.name||"默认班级",classCode:this.$store.getters.class.code||"",allowJoin:!!this.$store.getters.class.isJoin,screenLock:1!==this.$store.getters.screenState,questionLock:1!==this.$store.getters.questionState,videoStart:1!==this.$store.getters.videoStart,operateType:S,contents:[{icon:"icon-cloud-folder",title:"云盘",switchType:g["l"].CloudDisk,url:"/course/cloud-disk"},{icon:"icon-yulan",title:"题库",url:"/course/practise-library"}],activeIndex:-1,videoLabel:"",videoLabelErr:"",videoShow:!1}},computed:{activity:function(){var t=[{icon:"icon-qiandao",title:"签到",operate:null,switchType:g["l"].Sign,url:"/course/sign"},{icon:"icon-renmai",title:"分组",operate:null,switchType:g["l"].Group,url:"/course/group"},{icon:"icon-taolun",title:"分组讨论",operate:null,switchType:g["l"].GroupDiscussion,url:"/course/group-discussion"},{icon:"icon-notebook",title:"小组笔记",operate:null,switchType:g["l"].GroupNote,url:"/course/group-note"},{icon:"icon-suijiyonghu",title:"随机挑人",operate:null,switchType:g["l"].RandomPick,url:"/course/random"},{icon:"icon-jieping",title:"截屏提问",operate:null,switchType:g["l"].ScreenQuestion,url:"/course/screen-question"},{icon:"icon-edu-biji",title:"随堂练习",operate:null,switchType:g["l"].ClassPractise,url:"/course/class-practise"},{icon:"icon-kejian",title:"课堂课件",operate:null,switchType:g["l"].CloudDisk,url:"/course/course-ware"},{icon:this.screenLock?"icon-lock":"icon-unlock",title:this.screenLock?"禁止投屏":"允许投屏",operate:S.screen,url:""},{icon:this.questionLock?"icon-jinzhifayan":"icon-fayan",title:this.questionLock?"禁止提问":"允许提问",operate:S.question,url:""},{icon:"icon-tiwen2",title:"课堂提问",operate:null,switchType:g["l"].Question,url:"/course/question"},{icon:"icon-fenxiang",title:"板书分享",operate:null,switchType:g["l"].BoardNote,url:"/course/board-note"},{icon:this.videoStart?"icon-xindeluzhi-zanting":"icon-xindeluzhi",title:this.videoStart?"停止录制":"开始录制",operate:S.video,url:""},{icon:"icon-xiake",title:"下课",operate:S.stopCourse,switchType:null,url:""}],e={icon:"icon-weike1",title:"屏幕广播",disabled:!1,operate:null,url:"/course/broadcast"};return t.splice(9,0,e),t}},created:function(){var t=this,e=this.activity.findIndex((function(e){return e.operate===t.operateType.screen}));e>-1&&this.activity.splice(e,1,{icon:this.screenLock?"icon-lock":"icon-unlock",title:this.screenLock?"禁止投屏":"允许投屏",operate:this.operateType.screen,url:""}),this.getDefaultState(),this.getGatewayList()},methods:{getDefaultState:function(){var t=this;this.$mainHttp.classInfo.existCourse({chID:this.$store.getters.classHourID,classID:this.$store.getters.classID}).then((function(e){if(e.Result&&e.Data){var s=e.Data;t.questionLock=s["AllowQuestion"];var o=t.activity.findIndex((function(e){return e.operate===t.operateType.question}));o>-1&&t.activity.splice(o,1,{icon:t.questionLock?"icon-jinzhifayan":"icon-fayan",title:t.questionLock?"禁止提问":"允许提问",operate:t.operateType.question,url:""}),t.screenLock=s["AllowThrowScreen"];var i=t.activity.findIndex((function(e){return e.operate===t.operateType.screen}));i>-1&&t.activity.splice(i,1,{icon:t.screenLock?"icon-lock":"icon-unlock",title:t.screenLock?"禁止投屏":"允许投屏",operate:t.operateType.screen,url:""}),t.videoStart=s["IsRec"]?1:0,t.$store.commit("SET_VIDEO_START",t.videoStart);var n=t.activity.findIndex((function(e){return e.operate===t.operateType.video}));n>-1&&t.activity.splice(n,1,{icon:t.videoStart?"icon-xindeluzhi-zanting":"icon-xindeluzhi",title:t.videoStart?"停止录制":"开始录制",operate:t.operateType.video,url:""})}})).catch((function(){}))},getGatewayList:function(){var t=this;this.$store.getters.course["classRoomID"]?this.$mainHttp.gateway.roomDeviceList({classroomID:this.$store.getters.course["classRoomID"]}).then((function(e){if(e.Result&&e.Datas&&e.Datas.length>0){var s=e.Datas.findIndex((function(t){return t["GatewayType"]+""==="0"}));t.$store.commit("SET_VICE_SCREEN",e.Datas[s])}else t.$store.commit("SET_VICE_SCREEN",null)})).catch((function(){})):this.$store.commit("SET_VICE_SCREEN",null)},toShow:function(){console.log(this.$refs["erCode"]),this.$refs["erCode"].qrCodeClick()},editClass:function(){this.$router.push("/class/edit/".concat(this.$store.getters.classID,"/").concat(this.$store.getters.class.name,"/").concat(this.$store.getters.class.allowJoin))},funcClick:function(t){switch((t.switchType||"0"===t.switchType)&&this.$store.dispatch("InteractSwitchPage",t.switchType),t.operate){case this.operateType.screen:"允许投屏"===t.title?this.setScreenState(t,!0):"禁止投屏"===t.title?this.setScreenState(t,!1):this.screenLock?this.$toast("当前禁止投屏，请先开启投屏！"):t.url&&this.$router.push(t.url);break;case this.operateType.question:"允许提问"===t.title?this.setQuestionState(t,!0):"禁止提问"===t.title?this.setQuestionState(t,!1):this.questionLock?this.$toast("当前禁止提问，请先允许提问！"):t.url&&this.$router.push(t.url);break;case this.operateType.video:"开始录制"===t.title?this.setVideoStart(t,!0):"停止录制"===t.title?this.toStopVideo():t.url&&this.$router.push(t.url);break;case this.operateType.stopCourse:this.toStopCourse();break;default:t.url&&this.$router.push(t.url)}},contentClick:function(t){t.url&&((t.switchType||"0"===t.switchType)&&this.$store.dispatch("InteractSwitchPage",t.switchType),this.$router.push(t.url))},setQuestionState:function(t,e){var s=this;this.$mainHttp.classInfo.switchWork({ciID:this.$store.getters.courseID,function:t.operate,state:e,param:""}).then((function(t){t.Result?(s.questionLock=e,s.$store.commit("SET_QUESTION_STATE",e?0:1),s.$toast("设置成功")):t.Info?s.$toast(t.Info):s.$toast("设置失败")})).catch((function(){s.$toast("操作失败")}))},setScreenState:function(t,e){var s=this;this.$mainHttp.classInfo.switchWork({ciID:this.$store.getters.courseID,function:t.operate,state:e,param:""}).then((function(t){t.Result?(s.screenLock=e,s.$store.commit("SET_SCREEN_STATE",e?0:1),s.$toast("设置成功")):t.Info?s.$toast(t.Info):s.$toast("设置失败")})).catch((function(){s.$toast("操作失败")}))},getVideoState:function(){},toStopVideo:function(){var t=this;v["Dialog"].confirm({title:"提示",message:"确定要停止录制吗？"}).then((function(){t.videoLabelErr="",t.videoLabel=t.getNowDateTime(),t.videoShow=!0})).catch((function(){}))},getNowDateTime:function(){var t=new Date,e=t.getFullYear(),s=t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1,o=t.getDate()<10?"0"+t.getDate():t.getDate(),i=t.getHours()<10?"0"+t.getHours():t.getHours(),n=t.getMinutes()<10?"0"+t.getMinutes():t.getMinutes(),a=t.getSeconds()<10?"0"+t.getSeconds():t.getSeconds();return e+s+o+i+n+a},saveVideo:function(){var t=this;if(this.videoLabelErr="",this.videoLabel.length<=0)this.videoLabelErr="请填写标签名称";else{var e=this.activity.find((function(e){return e.operate===t.operateType.video}));this.setVideoStop(e,!1)}},setVideoStart:function(t,e){var s=this;this.$mainHttp.recordLesson.switchStart({ciID:this.$store.getters.courseID}).then((function(o){o.Result?(s.videoStart=e,s.$store.commit("SET_VIDEO_START",e?0:1),s.$toast(e?"设置成功":"保存成功"),s.videoShow=!1,s.$mainHttp.classInfo.switchWork({ciID:s.$store.getters.courseID,function:t.operate,state:e,param:""}).then((function(t){t.Result||t.Info&&s.$toast(t.Info)})).catch((function(){s.$toast("操作失败")}))):o.Info?s.$toast(o.Info):s.$toast("设置失败")})).catch((function(){s.$toast("操作失败")}))},setVideoStop:function(t,e){var s=this;this.$mainHttp.recordLesson.switchStop({ciID:this.$store.getters.courseID,rlLabel:this.videoLabel}).then((function(o){o.Result?(s.videoStart=e,s.$store.commit("SET_VIDEO_START",e?0:1),s.$toast(e?"设置成功":"保存成功"),s.videoShow=!1,s.$mainHttp.classInfo.switchWork({ciID:s.$store.getters.courseID,function:t.operate,state:e,param:""}).then((function(t){t.Result||t.Info&&s.$toast(t.Info)})).catch((function(){s.$toast("操作失败")}))):o.Info?s.$toast(o.Info):s.$toast("设置失败")})).catch((function(){s.$toast("操作失败")}))},toStopCourse:function(){var t=this;v["Dialog"].confirm({title:"提示",message:"确定要下课吗？"}).then((function(){t.$mainHttp.classInfo.setCourseState({ciID:t.$store.getters.courseID,isEndClass:!0}).then((function(e){e.Result?(t.$store.commit("QUIT_COURSE"),t.$router.push("/subject/view"),t.$toast("下课成功")):t.$toast("下课失败")})).catch((function(){t.$toast("操作失败")}))})).catch((function(){}))}},watch:{"$store.getters.videoStart":function(t,e){t!==e&&this.getVideoState()},"$store.getters.switchState":function(t,e){this.getDefaultState()}}},$=y,_=(s("77c5"),Object(h["a"])($,o,i,!1,null,"1d3cb561",null));e["default"]=_.exports},"77c5":function(t,e,s){"use strict";var o=s("1e3a"),i=s.n(o);i.a},"7db0":function(t,e,s){"use strict";var o=s("23e7"),i=s("b727").find,n=s("44d2"),a=s("ae40"),c="find",r=!0,l=a(c);c in[]&&Array(1)[c]((function(){r=!1})),o({target:"Array",proto:!0,forced:r||!l},{find:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),n(c)},a434:function(t,e,s){"use strict";var o=s("23e7"),i=s("23cb"),n=s("a691"),a=s("50c4"),c=s("7b0b"),r=s("65f0"),l=s("8418"),u=s("1dde"),h=s("ae40"),d=u("splice"),p=h("splice",{ACCESSORS:!0,0:0,1:2}),f=Math.max,v=Math.min,m=9007199254740991,g="Maximum allowed length exceeded";o({target:"Array",proto:!0,forced:!d||!p},{splice:function(t,e){var s,o,u,h,d,p,S=c(this),y=a(S.length),$=i(t,y),_=arguments.length;if(0===_?s=o=0:1===_?(s=0,o=y-$):(s=_-2,o=v(f(n(e),0),y-$)),y+s-o>m)throw TypeError(g);for(u=r(S,o),h=0;h<o;h++)d=$+h,d in S&&l(u,h,S[d]);if(u.length=o,s<o){for(h=$;h<y-o;h++)d=h+o,p=h+s,d in S?S[p]=S[d]:delete S[p];for(h=y;h>y-o+s;h--)delete S[h-1]}else if(s>o)for(h=y-o;h>$;h--)d=h+o-1,p=h+s-1,d in S?S[p]=S[d]:delete S[p];for(h=0;h<s;h++)S[h+$]=arguments[h+2];return S.length=y-o+s,u}})}}]);