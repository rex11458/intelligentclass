(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-75fe5488"],{"3c0b":function(t,i,r){"use strict";r.r(i);var e=function(){var t=this,i=t.$createElement,r=t._self._c||i;return r("div",{staticClass:"course-practise-library"},[r("head-top",{attrs:{title:"题库"}},[r("van-icon",{staticClass:"head-right",attrs:{name:"plus"},on:{click:t.toAdd}})],1),r("van-pull-refresh",{staticClass:"pull_fresh",attrs:{"head-height":80},on:{refresh:t.getLibraryList},model:{value:t.isLoading,callback:function(i){t.isLoading=i},expression:"isLoading"}},[t.libraryList&&t.libraryList.length>0?r("van-cell-group",t._l(t.libraryList,(function(i,e){return r("van-cell",{key:e,staticClass:"cell_main",attrs:{"is-link":""},on:{click:function(r){return t.libraryClick(i)}},scopedSlots:t._u([{key:"icon",fn:function(){return[r("van-icon",{staticClass:"cell_icon",attrs:{name:"orders-o"}})]},proxy:!0},{key:"title",fn:function(){return[t._v(" "+t._s(i.name)+" ")]},proxy:!0},{key:"label",fn:function(){return[r("span",[t._v(t._s(i.createTime))]),t.inCourse&&t.courseLibraryList&&t.courseLibraryList.find((function(t){return t.libraryID===i.id}))?r("van-tag",{staticStyle:{"margin-left":"3vw"},attrs:{plain:"",type:"success"}},[t._v(" 课中 ")]):t._e()]},proxy:!0}],null,!0)})})),1):r("r-lack-data")],1),r("van-popup",{attrs:{position:"bottom"},model:{value:t.libraryOperate,callback:function(i){t.libraryOperate=i},expression:"libraryOperate"}},[r("van-cell",{attrs:{value:"预览"},on:{click:function(i){return i.stopPropagation(),i.preventDefault(),t.toPreView(i)}}},[r("van-icon",{attrs:{slot:"right-icon","class-prefix":"iconfont icon-chakan_yulan"},slot:"right-icon"})],1),t.inCourse&&t.courseLibraryList&&t.librarySelected&&!t.courseLibraryList.find((function(i){return i.libraryID===t.librarySelected.id}))?r("van-cell",{attrs:{value:"设为备课"},on:{click:function(i){return i.stopPropagation(),i.preventDefault(),t.setCourse(i)}}},[r("van-icon",{attrs:{slot:"right-icon","class-prefix":"iconfont icon-xinxitongbu"},slot:"right-icon"})],1):t._e(),t.inCourse&&t.courseLibraryList&&t.librarySelected&&t.courseLibraryList.find((function(i){return i.libraryID===t.librarySelected.id}))?r("van-cell",{attrs:{value:"取消备课"},on:{click:function(i){return i.stopPropagation(),i.preventDefault(),t.cancelCourse(i)}}},[r("van-icon",{attrs:{slot:"right-icon","class-prefix":"iconfont icon-xinxitongbu"},slot:"right-icon"})],1):t._e(),r("van-cell",{attrs:{value:"编辑"},on:{click:function(i){return i.stopPropagation(),i.preventDefault(),t.toEdit(i)}}},[r("van-icon",{attrs:{slot:"right-icon",name:"edit","class-prefix":"iconfont icon-edu-biji"},slot:"right-icon"})],1),r("van-cell",{attrs:{value:"删除"},on:{click:function(i){return i.stopPropagation(),i.preventDefault(),t.toDrop(i)}}},[r("van-icon",{attrs:{slot:"right-icon","class-prefix":"iconfont icon-shanchu"},slot:"right-icon"})],1)],1)],1)},a=[],n=(r("c740"),r("4160"),r("c975"),r("a434"),r("159b"),r("1e55")),s=r("6828"),o={name:"practiseLibrary",data:function(){return{libraryList:[],isLoading:!1,librarySelected:null,libraryOperate:!1,inCourse:this.$route.path.indexOf("course")>-1,course:this.$store.getters.course,courseLibraryList:[]}},mounted:function(){this.getLibraryList(),this.getCourseLibraryList()},methods:{getLibraryList:function(){var t=this;this.libraryList=[],this.isLoading=!0,this.$mainHttp.classPractise.LibraryList({token:this.$store.getters.token}).then((function(i){i.Result?(i.Datas.sort((function(t,i){return t["CreateTime"]>i["CreateTime"]?-1:1})),i.Datas.forEach((function(i){t.libraryList.push({name:i["PLTitle"],createTime:Object(s["a"])(i["CreateTime"],"yyyy-MM-dd"),type:i["PLType"],id:i["PLID"]})}))):i.Info&&t.$toast(i.Info),t.isLoading=!1})).catch((function(){t.isLoading=!1}))},libraryClick:function(t){this.librarySelected=t,this.libraryOperate=!0},toPreView:function(){this.$store.commit("SET_PRACTISE_LIBRARY",this.librarySelected),this.$router.push("/practise-library/view")},toAdd:function(){this.$store.commit("SET_PRACTISE_LIBRARY",null),this.$router.push("/practise-library/title-edit")},toEdit:function(){this.$store.commit("SET_PRACTISE_LIBRARY",this.librarySelected),this.$router.push("/practise-library/edit")},toDrop:function(){var t=this;n["Dialog"].confirm({message:"确认删除当前题库？"}).then((function(){t.toDelete()})).catch((function(){}))},toDelete:function(){var t=this;this.$mainHttp.classPractise.LibraryDelete({ids:this.librarySelected.id,state:-1}).then((function(i){i.Result?(t.libraryOperate=!1,t.getLibraryList(),t.$toast("删除成功")):i.Info?t.$toast(i.Info):t.$toast("删除失败")})).catch((function(){t.$toast("操作失败")}))},setCourse:function(){var t=this;this.$mainHttp.classPractise.dataAdd({cpID:"",chID:this.course.classHourID,plID:this.librarySelected.id,attribute:2}).then((function(i){i.Result?(t.libraryOperate=!1,t.getCourseLibraryList(),t.$toast("设为备课成功")):i.Info?t.$toast(i.Info):t.$toast("设为备课失败")})).catch((function(){t.$toast("操作失败")}))},cancelCourse:function(){var t=this,i=this.courseLibraryList.findIndex((function(i){return i.libraryID===t.librarySelected.id})),r=this.courseLibraryList[i].id;this.$mainHttp.classPractise.dataDelete({ids:r}).then((function(r){r.Result?(i>-1&&t.courseLibraryList.splice(i,1),t.libraryOperate=!1,t.$toast("取消备课成功")):r.Info?t.$toast(r.Info):t.$toast("取消备课失败")})).catch((function(){t.$toast("操作失败")}))},getCourseLibraryList:function(){var t=this;this.courseLibraryList=[],this.$mainHttp.classPractise.dataList({chID:this.course.classHourID,attribute:2}).then((function(i){i.Result?i.Datas.forEach((function(i){t.courseLibraryList.push({id:i.Datas["CPID"],taskId:i["CIPID"],libraryID:i.Datas["PLID"]})})):i.Info&&t.$toast(i.Info)})).catch((function(){}))}}},c=o,l=(r("ce34"),r("2877")),u=Object(l["a"])(c,e,a,!1,null,"36d78630",null);i["default"]=u.exports},a434:function(t,i,r){"use strict";var e=r("23e7"),a=r("23cb"),n=r("a691"),s=r("50c4"),o=r("7b0b"),c=r("65f0"),l=r("8418"),u=r("1dde"),f=r("ae40"),h=u("splice"),d=f("splice",{ACCESSORS:!0,0:0,1:2}),p=Math.max,b=Math.min,y=9007199254740991,L="Maximum allowed length exceeded";e({target:"Array",proto:!0,forced:!h||!d},{splice:function(t,i){var r,e,u,f,h,d,g=o(this),v=s(g.length),m=a(t,v),I=arguments.length;if(0===I?r=e=0:1===I?(r=0,e=v-m):(r=I-2,e=b(p(n(i),0),v-m)),v+r-e>y)throw TypeError(L);for(u=c(g,e),f=0;f<e;f++)h=m+f,h in g&&l(u,f,g[h]);if(u.length=e,r<e){for(f=m;f<v-e;f++)h=f+e,d=f+r,h in g?g[d]=g[h]:delete g[d];for(f=v;f>v-e+r;f--)delete g[f-1]}else if(r>e)for(f=v-e;f>m;f--)h=f+e-1,d=f+r-1,h in g?g[d]=g[h]:delete g[d];for(f=0;f<r;f++)g[f+m]=arguments[f+2];return g.length=v-e+r,u}})},c93d:function(t,i,r){},ce34:function(t,i,r){"use strict";var e=r("c93d"),a=r.n(e);a.a}}]);