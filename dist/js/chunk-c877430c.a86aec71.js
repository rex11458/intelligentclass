(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c877430c"],{a434:function(e,t,s){"use strict";var n=s("23e7"),a=s("23cb"),o=s("a691"),i=s("50c4"),r=s("7b0b"),c=s("65f0"),u=s("8418"),l=s("1dde"),d=s("ae40"),p=l("splice"),h=d("splice",{ACCESSORS:!0,0:0,1:2}),f=Math.max,m=Math.min,v=9007199254740991,w="Maximum allowed length exceeded";n({target:"Array",proto:!0,forced:!p||!h},{splice:function(e,t){var s,n,l,d,p,h,S=r(this),_=i(S.length),g=a(e,_),b=arguments.length;if(0===b?s=n=0:1===b?(s=0,n=_-g):(s=b-2,n=m(f(o(t),0),_-g)),_+s-n>v)throw TypeError(w);for(l=c(S,n),d=0;d<n;d++)p=g+d,p in S&&u(l,d,S[p]);if(l.length=n,s<n){for(d=g;d<_-n;d++)p=d+n,h=d+s,p in S?S[h]=S[p]:delete S[h];for(d=_;d>_-n+s;d--)delete S[d-1]}else if(s>n)for(d=_-n;d>g;d--)p=d+n-1,h=d+s-1,p in S?S[h]=S[p]:delete S[h];for(d=0;d<s;d++)S[d+g]=arguments[d+2];return S.length=_-n+s,l}})},ad15:function(e,t,s){"use strict";s.r(t);var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"course-screen-question-view"},[s("head-top",{attrs:{title:"截屏提问"}},[1===e.screenQuestion.state?s("span",{attrs:{slot:"right"},on:{click:e.toEnd},slot:"right"},[s("van-icon",{staticClass:"head-right",attrs:{"class-prefix":"iconfont icon-jieshu",color:"#fff"}})],1):e._e()]),s("div",{staticClass:"sub_nav"},[s("span",[e._v(e._s(e.screenQuestion.index)+"、"+e._s(e.typeNames[e.screenQuestion.type-1]))]),s("van-tag",{attrs:{plain:"",type:"success"}},[e._v(e._s(e.screenQuestion.ModeName))]),s("span",[e._v(e._s(e.screenQuestion.stateName))])],1),s("div",{staticClass:"sub_module"},[s("r-image",{staticClass:"item-left",attrs:{width:"90vw",height:"30vw",src:e.screenQuestion.imgSrc}})],1),s("div",{staticClass:"sub_module"},[s("div",{staticClass:"flex-between"},[s("span",[e._v("时长："+e._s(e.screenQuestion.time))]),s("span",[e._v("分数："+e._s(e.screenQuestion.score))]),s("span",[e._v("下发："+e._s(e.screenQuestion.createTime))])])]),e.screenQuestion.questionMode===e.randomPick?[e._m(0),s("div",{staticClass:"sub_module"},[0===e.answerPersons.length?s("span",[e._v("暂无数据")]):s("div",{staticClass:"flex-wrap-between"},[e._l(e.answerPersons,(function(t,n){return s("div",{key:n,staticClass:"student_card van-hairline--surround"},[s("img",{directives:[{name:"real-img",rawName:"v-real-img",value:[t.userID,t.studentID],expression:"[sub.userID, sub.studentID]"}],staticClass:"col_4",attrs:{src:e.defaultHead,alt:""}}),s("div",[e._v(e._s(t.studentName))]),s("van-tag",{attrs:{plain:"",type:"primary"}},[e._v(e._s(t.answer))])],1)})),e._l(Math.abs(4-e.answerPersons.length%4)%4,(function(e){return s("div",{key:-e,staticClass:"student_card",staticStyle:{width:"19vw"}})}))],2)])]:[s("div",{staticClass:"sub_nav"},[s("span",[e._v("提交成员")]),s("span",[e._v(e._s(e.submitInfo.subNum)+" / "+e._s(e.submitInfo.total))])]),s("div",{staticClass:"sub_module"},[0===e.submitInfo.persons.length?s("span",[e._v("暂无数据")]):s("div",{staticClass:"flex-wrap-between"},[e._l(e.submitInfo.persons,(function(t,n){return s("div",{key:n,staticClass:"student_card van-hairline--surround",on:{click:function(s){return e.toAnswer(t)}}},[s("img",{directives:[{name:"real-img",rawName:"v-real-img",value:[t.userID,t.studentID],expression:"[sub.userID, sub.studentID]"}],staticClass:"col_4",attrs:{src:e.defaultHead,alt:""}}),s("div",[e._v(e._s(t.studentName))])])})),e._l(Math.abs(4-e.submitInfo.persons.length%4)%4,(function(e){return s("div",{key:-e,staticClass:"student_card",staticStyle:{width:"19vw"}})}))],2)])],2===e.screenQuestion.state?[e._m(1),s("div",{staticClass:"sub_module"},[s("div",[e._v(e._s(e.screenQuestion.answer))]),e.screenQuestion.type+""!=="4"?s("div",{staticClass:"flex-between"},[s("div",{staticClass:"van-hairline--surround list-col"},[s("span",[e._v("正确率： "),s("span",{style:{color:"#07c160"}},[e._v(e._s(e.screenQuestion.trueRate||"0%"))])])]),s("div",{staticClass:"van-hairline--surround list-col"},[s("span",[e._v("错误率： "),s("span",{style:{color:"#ee0a24"}},[e._v(e._s(e.screenQuestion.falseRate||"0%"))])])])]):e._e()])]:e._e(),e.screenQuestion.type+""!=="4"?[e._m(2),s("div",{staticClass:"sub_module"},[s("div",{staticClass:"flex-wrap-between"},[e._l(e.optionPersons,(function(t,n){return s("div",{key:n,staticClass:"van-hairline--surround list-col",on:{click:function(s){return e.showOptionPersons(t)}}},[s("span",[e._v(e._s(t.name)+"："+e._s(t.total))])])})),e._l((4-e.optionPersons.length%4)%4,(function(e){return s("div",{key:-e,staticClass:" list-col"})}))],2)])]:e._e(),1!==e.screenQuestion.state&&e.screenQuestion.questionMode===e.allAnswer?[s("div",{staticClass:"sub_nav"},[s("span",[e._v("调研情况")]),1!==e.screenQuestion.survey&&2===e.screenQuestion.state?s("van-button",{attrs:{type:"info",size:"small"},on:{click:e.toSurvey}},[e._v(" 下发调研 ")]):1===e.screenQuestion.survey?s("span",[e._v("已下发")]):e._e()],1),1===e.screenQuestion.survey?s("div",{staticClass:"sub_module"},[1!==e.screenQuestion.state?s("div",{staticClass:"flex-between"},[s("div",{staticClass:"van-hairline--surround list-col"},[s("span",[e._v("已掌握："+e._s(e.surveyInfo.yes))])]),s("div",{staticClass:"van-hairline--surround list-col"},[s("span",[e._v("未掌握："+e._s(e.surveyInfo.no))])])]):s("r-lack-data")],1):e._e()]:e._e(),s("van-popup",{attrs:{position:"bottom"},model:{value:e.selectAnswerShow,callback:function(t){e.selectAnswerShow=t},expression:"selectAnswerShow"}},[s("van-cell",[s("span",{staticStyle:{color:"#1989fa"},attrs:{slot:"icon"},on:{click:function(t){e.selectAnswerShow=!1}},slot:"icon"},[e._v("取消")]),s("span",{attrs:{slot:"title"},slot:"title"},[e._v(" "+e._s("4"===e.screenQuestionType?"请填写答案":"请选择正确答案")+" ")]),s("span",{staticStyle:{color:"#1989fa"},attrs:{slot:"right-icon"},on:{click:e.onConfirm},slot:"right-icon"},[e._v("确定")])]),"1"===e.screenQuestionType?s("van-radio-group",{model:{value:e.answer,callback:function(t){e.answer=t},expression:"answer"}},[s("van-cell-group",e._l(e.answers,(function(t){return s("van-cell",{key:t,attrs:{title:t,clickable:""},on:{click:function(s){e.answer=t}}},[s("van-radio",{attrs:{slot:"right-icon",name:t},slot:"right-icon"})],1)})),1)],1):"2"===e.screenQuestionType?s("van-checkbox-group",{model:{value:e.multiAnswer,callback:function(t){e.multiAnswer=t},expression:"multiAnswer"}},[s("van-cell-group",e._l(e.answers,(function(t){return s("van-cell",{key:t,attrs:{title:t,clickable:""},on:{click:function(s){return e.multiChecked(t)}}},[s("van-checkbox",{attrs:{slot:"right-icon",sharp:"square",name:t},slot:"right-icon"})],1)})),1)],1):"3"===e.screenQuestionType?s("van-radio-group",{model:{value:e.answer,callback:function(t){e.answer=t},expression:"answer"}},[s("van-cell-group",e._l(e.judgeValues,(function(t){return s("van-cell",{key:t,attrs:{title:t,clickable:""},on:{click:function(s){e.answer=t}}},[s("van-radio",{attrs:{slot:"right-icon",name:t},slot:"right-icon"})],1)})),1)],1):s("van-field",{attrs:{name:"答案",label:"",placeholder:"请填写答案",type:"textarea",maxlength:"100",autofocus:"",autosize:"","show-word-limit":"",rules:[{required:!1,message:"请填写答案"}]},model:{value:e.answer,callback:function(t){e.answer=t},expression:"answer"}})],1),s("van-popup",{attrs:{position:"bottom",closeable:""},model:{value:e.optionPersonsShow,callback:function(t){e.optionPersonsShow=t},expression:"optionPersonsShow"}},[e.optionPersonsSelected?s("div",{staticClass:"sub_nav",staticStyle:{"line-height":"48px"}},[s("span",[e._v("以下人员，提交选项为"+e._s(e.optionPersonsSelected.name))])]):e._e(),e.optionPersonsSelected?s("div",{staticClass:"sub_module"},[0===e.optionPersonsSelected.persons.length?s("span",[e._v("暂无数据")]):s("div",{staticClass:"flex-wrap-between"},[e._l(e.optionPersonsSelected.persons,(function(t,n){return s("div",{key:n,staticClass:"student_card van-hairline--surround"},[s("img",{directives:[{name:"real-img",rawName:"v-real-img",value:[t.userID,t.studentID],expression:"[sub.userID, sub.studentID]"}],staticClass:"col_4",attrs:{src:e.defaultHead,alt:""}}),s("div",[e._v(e._s(t.studentName))])])})),e._l(Math.abs(4-e.optionPersonsSelected.persons.length%4)%4,(function(e){return s("div",{key:-e,staticClass:"student_card",staticStyle:{width:"19vw"}})}))],2)]):e._e()]),s("van-popup",{attrs:{position:"bottom",closeable:""},model:{value:e.answerPersonsShow,callback:function(t){e.answerPersonsShow=t},expression:"answerPersonsShow"}},[s("div",{staticClass:"sub_nav",staticStyle:{"line-height":"48px"}},[4!==e.screenQuestion.type?s("span",[e._v("作答明细")]):s("span",[e._v("答题评分")])]),e.answerPersonsSelected?s("div",[s("van-field",{attrs:{label:"提交学生：",disabled:""},model:{value:e.answerPersonsSelected.studentName,callback:function(t){e.$set(e.answerPersonsSelected,"studentName",t)},expression:"answerPersonsSelected.studentName"}}),s("van-field",{attrs:{label:"正确答案：",type:"textarea",disabled:""},model:{value:e.screenQuestion.answer,callback:function(t){e.$set(e.screenQuestion,"answer",t)},expression:"screenQuestion.answer"}}),s("van-field",{attrs:{label:"提交答案：",disabled:""},scopedSlots:e._u([{key:"input",fn:function(){return[4!==e.screenQuestion.type?s("span",{style:{color:"#969799"}},[e._v(e._s(e.answerPersonsSelected.answer))]):s("div",{staticClass:"answer-content",domProps:{innerHTML:e._s(e.transform(e.answerPersonsSelected.answer))}})]},proxy:!0}],null,!1,3504402916)}),s("van-field",{attrs:{label:"本题分数：",disabled:""},model:{value:e.screenQuestion.score,callback:function(t){e.$set(e.screenQuestion,"score",t)},expression:"screenQuestion.score"}}),s("van-field",{attrs:{name:"stepper",label:"作答得分："},scopedSlots:e._u([{key:"input",fn:function(){return[4!==e.screenQuestion.type?s("span",{style:{color:"#969799"}},[e._v(e._s(e.answerPersonsSelected.score||0))]):s("van-stepper",{attrs:{integer:"",min:"0",max:e.screenQuestion.score},model:{value:e.answerPersonsSelected.score,callback:function(t){e.$set(e.answerPersonsSelected,"score",t)},expression:"answerPersonsSelected.score"}}),s("span",{staticStyle:{"padding-left":"10px"}},[e._v("分")])]},proxy:!0}],null,!1,3558115613)}),4===e.screenQuestion.type?s("van-button",{staticStyle:{width:"100%"},attrs:{type:"primary"},on:{click:e.toScore}},[e._v("提交 ")]):e._e()],1):s("r-lack-data")],1)],2)},a=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"sub_nav"},[s("span",[e._v("随机挑人")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"sub_nav"},[s("span",[e._v("正确答案")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"sub_nav"},[s("span",[e._v("作答情况")])])}],o=(s("c740"),s("4160"),s("c975"),s("a15b"),s("fb6a"),s("a434"),s("b0c0"),s("159b"),s("cb60")),i=s("1e55"),r=s("6828"),c=s("ed08"),u=s("08f3"),l={name:"screenQuestionView",components:{RImage:o["a"]},data:function(){return{defaultHead:s("a5b7"),screenQuestion:this.$store.getters.screenQuestion,typeNames:["单选题","多选题","判断题","问答题"],submitInfo:{total:0,subNum:0,persons:[]},judgeValues:["对","错"],options:["A","B","C","D","E","F","G","H","I","J"],optionPersons:[],optionPersonsSelected:null,optionPersonsShow:!1,answerPersons:[],answerPersonsShow:!1,answerPersonsSelected:null,allAnswer:u["f"].all,randomPick:u["f"].random,surveyInfo:{yes:0,no:0},answer:"",multiAnswer:[],realAnswer:"",answerPictureType:u["e"].ScreenAnswer,selectAnswerShow:!1}},computed:{screenQuestionType:function(){return this.screenQuestion?this.screenQuestion.type+"":"1"},answers:function(){return["1","2"].indexOf(this.screenQuestionType)>-1?this.options.slice(0,this.screenQuestion.optionsNum):"3"===this.screenQuestionType?["对","错"]:[]}},mounted:function(){this.getDataInfo(),this.getSubmitPerson(),this.screenQuestion.questionMode===this.randomPick&&this.getAnswerPerson(),1===this.screenQuestion.survey&&this.getSurveyPerson()},methods:{transform:function(e){return Object(c["h"])("show",e,this.$mainHttp.common.picture)},multiChecked:function(e){var t=this.multiAnswer.findIndex((function(t){return t===e}));t>-1?this.multiAnswer.splice(t,1):this.multiAnswer.push(e)},getDataInfo:function(){var e=this;this.optionPersons=[],this.$mainHttp.screenQuestion.getDataInfo({ssid:this.screenQuestion.id}).then((function(t){t.Result?(e.screenQuestion={id:t.Data["SSID"],type:t.Data["SSType"],imgSrc:e.$mainHttp.common.picture(t.Data["SSContent"],u["e"].ScreenSubject),state:t.Data["State"],stateName:Object(u["g"])(t.Data["State"]),time:t.Data["SSTime"],score:t.Data["SSScore"],optionsNum:t.Data["SSOption"],questionMode:t.Data["SSPattern"],ModeName:Object(u["j"])(t.Data["SSPattern"]),index:t.Data["SSSerial"],answer:t.Data["SSAnswer"],survey:t.Data["SSSurvey"],createTime:Object(r["a"])(t.Data["CreateTime"],"hh:mm:ss"),trueRate:t["CorrectRate"],falseRate:t["ErrorRate"]},t.Options&&t.Options.length>0&&t.Options.forEach((function(t){e.optionPersons.push({name:t["OptionName"],total:t["Total"],persons:[]})}))):t.Info&&e.$toast(t.Info)})).catch((function(){}))},getSubmitPerson:function(){var e=this;this.submitInfo={total:0,subNum:0,persons:[]},this.$mainHttp.screenQuestion.getSubmitPerson({ssID:this.screenQuestion.id,ciID:this.$store.getters.courseID}).then((function(t){t.Result?(e.submitInfo.subNum=t["SubNum"]||0,e.submitInfo.total=t["Total"]||0,t.Datas&&t.Datas.length>0&&t.Datas.forEach((function(t){e.submitInfo.persons.push({studentID:t["StudentID"],studentName:t["StudentName"],userID:t["UserID"]})}))):t.Info&&e.$toast(t.Info)})).catch((function(){}))},showOptionPersons:function(e){e.total>0&&(this.optionPersonsSelected=e,this.optionPersonsShow=!0,this.getOptionPerson())},getOptionPerson:function(){var e=this;this.optionPersonsSelected.persons=[],this.$mainHttp.screenQuestion.answerPerson({ssid:this.screenQuestion.id,answer:this.optionPersonsSelected.name}).then((function(t){t.Datas&&t.Datas.length>0?t.Datas.forEach((function(t){e.optionPersonsSelected.persons.push({studentID:t.Key["StudentID"],studentName:t.Key["StudentName"],userID:t.Key["UserID"]})})):t.Info&&e.$toast(t.Info)})).catch((function(){}))},getAnswerPerson:function(){var e=this;this.answerPersons=[],this.$mainHttp.screenQuestion.answerSubmit({ssID:this.screenQuestion.id}).then((function(t){t.Result?t.Datas&&t.Datas.length>0&&t.Datas.forEach((function(t){e.answerPersons.push({userID:t["UserID"],studentID:t.Key["StudentID"],studentName:t["StudentName"],answer:t.Key["SAContent"]||"未作答",isTrue:t["SSAnswer"]===t.Key["SAContent"],comment:t.Key["SAComment"]})})):t.Info&&e.$toast(t.Info)})).catch((function(){}))},getSurveyPerson:function(){var e=this;this.$mainHttp.screenQuestion.surveyInfo({ssID:this.screenQuestion.id}).then((function(t){t.Result?e.surveyInfo={yes:t["YesMaster"],no:t["NoMaster"]}:t.Info&&e.$toast(t.Info)})).catch((function(){}))},toSurvey:function(){var e=this;i["Dialog"].confirm({title:"提示",message:"是否下发调研？"}).then((function(){e.$mainHttp.screenQuestion.postSetSurvey({ssID:e.screenQuestion.id,ciID:e.$store.getters.courseID}).then((function(t){t.Result?(e.$toast("下发调研成功"),e.getDataInfo()):t.Info?e.$toast(t.Info):e.$toast("下发调研失败")})).catch((function(){e.$toast("操作失败")}))})).catch((function(){}))},toEnd:function(){var e=this;this.screenQuestion.type+""!=="4"?this.selectAnswerShow=!0:i["Dialog"].confirm({title:"提示",message:"是否结束答题？"}).then((function(){e.onConfirm()})).catch((function(){}))},onConfirm:function(){var e=this;this.answer||0!==this.multiAnswer.length||"4"===this.screenQuestionType?(this.realAnswer=this.answer||this.multiAnswer.sort().join(""),this.$mainHttp.screenQuestion.postSetAnswer({ciID:this.$store.getters.courseID,ssID:this.screenQuestion.id,ssAnswer:this.realAnswer}).then((function(t){t.Result?(e.selectAnswerShow=!1,e.getDataInfo(),e.$toast("结束答题成功")):t.Info?e.$toast(t.Info):e.$toast("设置答案失败")})).catch((function(){e.$toast("操作失败")}))):this.$toast("请先选择答案")},toStop:function(){var e=this;this.$mainHttp.screenQuestion.postSetStop({ciID:this.$store.getters.courseID,ssiD:this.screenQuestion.id}).then((function(t){t.Result?(e.selectAnswerShow=!1,e.getDataInfo(),e.$toast("结束答题成功")):t.Info?e.$toast(t.Info):e.$toast("结束答题失败")})).catch((function(){e.$toast("操作失败")}))},toAnswer:function(e){1!==this.screenQuestion.state&&(this.answerPersonsShow=!0,this.getAnswerInfo(e))},getAnswerInfo:function(e){var t=this;this.answerPersonsSelected=null,this.$mainHttp.screenQuestion.getAnswerInfo({ssID:this.screenQuestion.id,studentID:e.studentID||""}).then((function(s){s.Result?t.answerPersonsSelected={createTime:Object(r["a"])(s.Data["SubmitTime"],"hh:mm:ss"),studentID:s.Data["StudentID"]+"",studentName:e.studentName,id:s.Data["SAID"]+"",answer:s.Data["SAContent"]+"",comment:s.Data["SAComment"]+"",score:s.Data["SAScore"]||0,master:s.Data["SAMaster"]}:s.Info&&t.$toast(s.Info)})).catch((function(){}))},toScore:function(){var e=this;this.$mainHttp.screenQuestion.postChangeComment({ssID:this.screenQuestion.id,saID:this.answerPersonsSelected.id,score:this.answerPersonsSelected.score,saComment:this.answerPersonsSelected.comment}).then((function(t){t.Result?(e.answerPersonsShow=!1,e.$toast("答题评分成功")):t.Info?e.$toast(t.Info):e.$toast("答题评分失败")})).catch((function(){e.$toast("操作失败")}))}},beforeDestroy:function(){}},d=l,p=(s("e2af"),s("2877")),h=Object(p["a"])(d,n,a,!1,null,"0aadc3a7",null);t["default"]=h.exports},cb60:function(e,t,s){"use strict";var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("van-image",{style:{width:e.width,height:e.height},attrs:{fit:e.fit,src:e.src},on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.preview(t)}},scopedSlots:e._u([{key:"loading",fn:function(){return[s("van-loading",{attrs:{type:"spinner",size:"20"}})]},proxy:!0},{key:"error",fn:function(){return[e._v(e._s(e.errMsg))]},proxy:!0}])}),s("van-image-preview",{attrs:{showIndex:!1,images:e.images},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}})],1)},a=[],o=(s("b0c0"),s("ade3")),i=s("1e55"),r={name:"r-image",components:Object(o["a"])({},i["ImagePreview"].Component.name,i["ImagePreview"].Component),props:{width:{type:String,default:"100px"},height:{type:String,default:"100px"},fit:{type:String,default:"scale-down"},src:{type:String,default:""},errMsg:{type:String,default:"加载失败"}},data:function(){return{show:!1,images:[]}},methods:{preview:function(){this.images=[this.src],this.show=!0}}},c=r,u=s("2877"),l=Object(u["a"])(c,n,a,!1,null,null,null),d=l.exports;t["a"]=d},d30f:function(e,t,s){},e2af:function(e,t,s){"use strict";var n=s("d30f"),a=s.n(n);a.a}}]);