(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0a304b2c"],{1313:function(e,t,n){"use strict";var i=n("3b81"),s=n.n(i);s.a},"3b81":function(e,t,n){},6976:function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"live"},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.IsLiveEnd,expression:"IsLiveEnd"}],staticClass:"handle-bar"},[n("div",{staticClass:"bar-l"},[n("div",{staticClass:"back",on:{click:function(t){return t.stopPropagation(),e.goback(t)}}},[n("van-icon",{attrs:{name:"arrow-left"}}),n("span",[e._v(e._s(e.name))])],1)])]),e.IsLiveEnd?e._e():n("PlayBox",{ref:"Player",attrs:{IsLive:!0,IsMuted:!1,Videos:e.url,SelectAble:!1,IsControl:!1,autoFull:!0,name:e.name},on:{"update:Videos":function(t){e.url=t},"update:videos":function(t){e.url=t}}}),n("van-image",{directives:[{name:"show",rawName:"v-show",value:e.IsLiveEnd,expression:"IsLiveEnd"}],attrs:{src:e.LiveEnd,fit:"none"}})],1)},s=[],o=(n("99af"),n("b0c0"),n("d3b7"),n("96cf"),n("1da1")),a={components:{PlayBox:function(){return n.e("chunk-068158d6").then(n.bind(null,"2b22"))}},data:function(){return{barShow:!1,timer:0,LiveEnd:n("dfec"),IsLiveEnd:!1,IsMuted:!1,url:"",LiveTaskInfo:null,ListenTimer:null,config:"",full:!1,name:"返回"}},mounted:function(){var e=this;this.url="",this.name=this.$route.query.name,this.LoadData(),this.timer=window.setInterval((function(){e.Listen()}),1e3)},beforeDestroy:function(){clearTimeout(this.timer),window.onresize=null,window.hub&&window.hub.off("ReceiveRBStatus",null),this.Stop()},watch:{barShow:function(e){var t=this;!0===e&&(this.timer=setTimeout((function(){t.barShow=!1}),3e3))}},methods:{showHeader:function(){this.barShow=!0},ChangeMuted:function(){this.IsMuted=!this.IsMuted,this.$refs.Player.Muted(this.IsMuted)},goback:function(){this.url="",this.$router.push("/home-source")},Listen:function(){if(!this.IsHubOn&&window.hub){this.IsHubOn=!0;var e=this;window.hub.on("ReceiveRBStatus",(function(t){if(e.LiveTaskInfo){var n=JSON.parse(t);n&&n.ClsRoomID===e.LiveTaskInfo.RBConfigInfo.ClsRoom.ClsRoomID&&1!==n.LiveEstate&&(e.IsLiveEnd=!0,e.Stop())}}))}},Stop:function(){this.url="",this.$refs.Player&&(console.log("释放监听"),this.$refs.Player.Pause(),this.$refs.Player.Dispose())},LoadData:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var n,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$mainHttp.LiveTask.GetData({liveid:e.$route.query.id});case 2:n=t.sent,n&&n.Data?(e.LiveTaskInfo=n.Data,e.LiveTaskInfo.ExeInfo&&(i=JSON.parse(e.LiveTaskInfo.ExeInfo),e.$set(e.LiveTaskInfo,"ExeInfo",i),2===e.LiveTaskInfo.LiveEstate?e.url="http://".concat(e.$root.SrvConfigInfo.LiveHost,":").concat(e.$root.SrvConfigInfo.LivePort).concat(i,".flv"):e.IsLiveEnd=!0)):e.IsLiveEnd=!0;case 4:case"end":return t.stop()}}),t)})))()}}},r=a,u=(n("1313"),n("2877")),c=Object(u["a"])(r,i,s,!1,null,null,null);t["default"]=c.exports},dfec:function(e,t,n){e.exports=n.p+"img/LiveEnd.20551fc7.png"}}]);