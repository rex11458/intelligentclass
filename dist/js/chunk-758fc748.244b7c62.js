(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-758fc748"],{"0862":function(t,e,s){"use strict";var i=s("1d07"),o=s.n(i);o.a},"1d07":function(t,e,s){},3622:function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"class-record-group-discussion"},[s("head-top",{attrs:{title:"分组讨论"}}),s("div",{staticClass:"sub_nav"},[s("span",[t._v("分组次数")]),t.groupTimeOptions&&t.groupTimeOptions.length>0?s("van-dropdown-menu",[s("van-dropdown-item",{attrs:{options:t.groupTimeOptions},on:{change:t.changeGroupTime},model:{value:t.groupTime,callback:function(e){t.groupTime=e},expression:"groupTime"}})],1):t._e()],1),s("van-pull-refresh",{staticClass:"pull_fresh",on:{refresh:function(e){return t.changeGroupTime(t.groupTime)}},model:{value:t.isLoading,callback:function(e){t.isLoading=e},expression:"isLoading"}},[t.discussionList&&t.discussionList.length>0?t._l(t.discussionList,(function(e,i){return s("div",{key:i,staticClass:"image_card van-hairline--surround"},[s("div",{staticClass:"flex-between card-line"},[s("van-tag",{attrs:{mark:"",plain:""}},[t._v(t._s(e.groupName))]),s("div",{staticClass:"flex-between"},[s("van-button",{attrs:{type:"primary",size:"mini"},on:{click:function(s){return t.showNote(e)}}},[t._v("笔记")]),s("van-button",{style:{marginLeft:"3vw"},attrs:{type:"primary",size:"mini"},on:{click:function(s){return t.showView(e)}}},[t._v(" 详情 ")])],1)],1),s("div",{staticClass:"flex-between card-line card-mark"},[s("span",[t._v("论题 "),s("span",{staticClass:"mark-value"},[t._v(t._s(e.sort))])]),s("span",[t._v("得分 "),s("span",{staticClass:"mark-value"},[t._v(t._s(e.scoreTotal))])]),s("span",[t._v("获赞 "),s("span",{staticClass:"mark-value"},[t._v(t._s(e.goodTotal))])]),s("span",{class:{"mark-doing":1===e.state,"mark-end":1!==e.state}},[t._v(t._s(1===e.state?"进行中":"已结束"))])]),s("div",{staticClass:"flex-wrap card-line"},[s("span",[t._v("论题：")]),e.titleType===t.defaultType?s("span",[t._v(t._s(e.titleContent))]):s("img",{attrs:{src:e.titleContent,alt:""},on:{click:function(s){return t.preview(e.titleContent)}}})])])})):s("r-lack-data")],2)],1)},o=[],n=(s("c740"),s("4160"),s("159b"),s("a5b7")),a=s.n(n),r=s("08f3"),u={name:"discussion",beforeRouteEnter:function(t,e,s){s((function(t){e.params&&e.params.groupTime&&(t.groupTimeLastSelected=e.params.groupTime)}))},data:function(){return{courseID:this.$store.getters.courseID,courseInfo:this.$store.getters.course,defaultHead:a.a,defaultType:r["a"].Text,groupTime:"",groupTimeOptions:[],groupTimeLastSelected:"",discussionList:[],isLoading:!1}},created:function(){this.getGroupTimes()},methods:{getGroupTimes:function(){var t=this;this.groupTimeOptions=[],this.$mainHttp.group.getGroupTimeList({ciID:this.courseID}).then((function(e){e.Result?e.Datas&&e.Datas.length>0&&(e.Datas.sort((function(t,e){return t["GroupingNumber"]>e["GroupingNumber"]?1:-1})),e.Datas.forEach((function(e){t.groupTimeOptions.push({text:"第".concat(e["GroupingNumber"],"次分组"),value:e["GroupingNumber"],number:e["GroupingNumber"],courseID:e["CIID"]})})),t.groupTimeLastSelected&&t.groupTimeOptions.findIndex((function(e){return e.value===+t.groupTimeLastSelected}))>-1?t.groupTime=+t.groupTimeLastSelected:t.groupTime=e.Datas[0]["GroupingNumber"],t.changeGroupTime(t.groupTime)):e.Info&&t.$toast(e.Info)})).catch((function(){}))},changeGroupTime:function(t){this.groupList=[],this.$route.params.index=t,this.getGroupDiscussion(t)},getGroupDiscussion:function(t){var e=this;this.isLoading=!0,this.discussionList=[],this.$mainHttp.groupDiscussion.dataList({ciID:this.$store.getters.courseID,number:t}).then((function(t){t.Result?t.Datas&&t.Datas.length>0&&t.Datas.forEach((function(t){var s=t.Key;e.discussionList.push({id:s["GSID"],sort:s["GSSort"],groupName:t["GroupName"],groupID:s["GroupID"],goodTotal:t["TotalGood"],scoreTotal:t["TotalScore"],titleType:s["GSForm"],titleContent:s["GSForm"]===e.defaultType?s["GSContent"]:e.$mainHttp.common.picture(s["GSContent"],r["e"].GroupSubject),state:s["State"]})})):t.Info&&e.$toast(t.Info),e.isLoading=!1})).catch((function(){e.isLoading=!1}))},preview:function(t){this.$store.commit("SET_IMAGE_PREVIEW",t)},showNote:function(t){this.$router.push("/course/record/group-note/"+t.groupID+"/"+this.groupTime)},showView:function(t){this.$router.push({path:"/course/record/discussion-info/"+this.groupTime,query:t})}}},c=u,p=(s("0862"),s("2877")),l=Object(p["a"])(c,i,o,!1,null,"2875a14a",null);e["default"]=l.exports}}]);