(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a8902ebc"],{"4f45":function(t,e,a){},"7db0":function(t,e,a){"use strict";var c=a("23e7"),n=a("b727").find,s=a("44d2"),o=a("ae40"),i="find",r=!0,l=o(i);i in[]&&Array(1)[i]((function(){r=!1})),c({target:"Array",proto:!0,forced:r||!l},{find:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}}),s(i)},b1f9:function(t,e,a){"use strict";var c=a("4f45"),n=a.n(c);n.a},c878:function(t,e,a){"use strict";a.r(e);var c=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"course-broadcast"},[a("head-top",{attrs:{title:"屏幕广播"}},[a("span",{staticClass:"head-right",attrs:{slot:"right"},on:{click:t.toBroadcast},slot:"right"},[a("span",{staticClass:"head_span"},[t._v(t._s(t.broadcastIP?"停止广播":"开始广播")+" ")])])]),a("van-radio-group",{staticStyle:{"text-align":"left"},attrs:{disabled:t.broadcastIP.length>0},on:{change:t.changeTeachScreen},model:{value:t.teachScreenSelected,callback:function(e){t.teachScreenSelected=e},expression:"teachScreenSelected"}},[a("van-cell-group",t._l(t.options,(function(e,c){return a("van-cell",{key:c,attrs:{title:e.text,clickable:""},on:{click:function(a){return t.teachScreenSelect(e.value)}}},[a("van-radio",{attrs:{slot:"right-icon",name:e.value},slot:"right-icon"})],1)})),1)],1),t.gatewayList.length>0?[t._m(0),t.gatewayList&&t.gatewayList.length>0?a("van-radio-group",{staticStyle:{"text-align":"left"},attrs:{disabled:t.broadcastIP.length>0},on:{change:t.changeGatewayScreen},model:{value:t.gatewayScreenSelected,callback:function(e){t.gatewayScreenSelected=e},expression:"gatewayScreenSelected"}},[a("van-cell-group",t._l(t.gatewayList,(function(e,c){return a("van-cell",{key:c,attrs:{title:e.text,clickable:""},on:{click:function(a){return t.gatewayScreenSelect(e.value)}}},[a("van-radio",{attrs:{slot:"right-icon",name:e.value},slot:"right-icon"})],1)})),1)],1):a("r-lack-data")]:t._e()],2)},n=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"sub_nav"},[a("span",[t._v("小组屏幕")])])}],s=(a("7db0"),a("c740"),a("4160"),a("159b"),a("2241")),o={name:"broadcast",data:function(){return{broadcastIP:"",options:[{text:"主屏",value:"123"},{text:"副屏",value:"123456"}],teachScreenSelected:"",gatewayList:[],gatewayScreenSelected:""}},created:function(){var t=this;if(this.broadcastIP){var e=this.options.findIndex((function(e){return e.value===t.broadcastIP})),a=this.gatewayList.findIndex((function(e){return e.value===t.broadcastIP}));e>-1?this.teachScreenSelected=this.broadcastIP:a>-1&&(this.gatewayScreenSelected=this.broadcastIP)}this.getDataInfo()},methods:{getDataInfo:function(){var t=this;this.$gatewayHttp.broadcast.getDataInfo().then((function(e){e.Result?(t.broadcastIP=e["ID"],t.options.find((function(t){return t.value===e["ID"]}))?(t.teachScreenSelected=e["ID"],t.gatewayScreenSelected=""):(t.teachScreenSelected="",t.gatewayScreenSelected=e["ID"])):e.Info&&t.$toast(e.Info)})).catch((function(){}))},getGatewayList:function(){var t=this;this.gatewayList=[],this.$gatewayHttp.broadcast.getGatewayList().then((function(e){e.Result?e.Datas&&e.Datas.length>0&&e.Datas.forEach((function(e){t.gatewayList.push({text:e["GatewayName"],value:e["GatewayID"],IP:e["GatewayIP"],state:e["State"],online:e["IsOnline"]})})):e.Info&&t.$toast(e.Info)})).catch((function(){}))},teachScreenSelect:function(t){0===this.broadcastIP.length&&(this.teachScreenSelected=t)},changeTeachScreen:function(t){t&&(this.teachScreenSelected=t,this.gatewayScreenSelected="")},gatewayScreenSelect:function(t){0===this.broadcastIP.length&&(this.gatewayScreenSelected=t)},changeGatewayScreen:function(t){t&&(this.gatewayScreenSelected=t,this.teachScreenSelected="")},toBroadcast:function(){var t=this;this.broadcastIP?s["a"].confirm({message:"确认停止广播？"}).then((function(){t.stopBroadcast()})).catch((function(){})):s["a"].confirm({message:"确认开始广播？"}).then((function(){t.startBroadcast()})).catch((function(){}))},startBroadcast:function(){var t=this,e=this.teachScreenSelected||this.gatewayScreenSelected;this.$gatewayHttp.broadcast.setStart({id:e}).then((function(a){a.Result?(t.broadcastIP=e,t.$store.commit("SET_BROADCAST_IP",t.broadcastIP),t.$toast("成功发送开始广播")):a.Info?t.$toast(a.Info):t.$toast("发送开始广播失败")})).catch((function(){t.$toast("操作失败")}))},stopBroadcast:function(){var t=this;this.$gatewayHttp.broadcast.setStop({id:this.broadcastIP}).then((function(e){e.Result?(t.gatewayScreenSelected="",t.teachScreenSelected="",t.broadcastIP="",t.$store.commit("SET_BROADCAST_IP",""),t.$toast("成功发送停止广播")):e.Info?t.$toast(e.Info):t.$toast("发送停止广播失败")})).catch((function(){t.$toast("操作失败")}))}}},i=o,r=(a("b1f9"),a("2877")),l=Object(r["a"])(i,c,n,!1,null,"cf5524be",null);e["default"]=l.exports}}]);
//# sourceMappingURL=chunk-a8902ebc.1e413587.js.map