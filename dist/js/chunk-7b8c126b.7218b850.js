(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7b8c126b"],{1050:function(e,t,i){},"21d9":function(e,t,i){"use strict";var n=i("1050"),a=i.n(n);a.a},"4d63":function(e,t,i){var n=i("83ab"),a=i("da84"),s=i("94ca"),o=i("7156"),l=i("9bf2").f,c=i("241c").f,r=i("44e7"),f=i("ad6d"),u=i("9f7f"),d=i("6eeb"),h=i("d039"),p=i("69f3").set,v=i("2626"),m=i("b622"),g=m("match"),k=a.RegExp,y=k.prototype,x=/a/g,C=/a/g,w=new k(x)!==x,M=u.UNSUPPORTED_Y,D=n&&s("RegExp",!w||M||h((function(){return C[g]=!1,k(x)!=x||k(C)==C||"/a/i"!=k(x,"i")})));if(D){var b=function(e,t){var i,n=this instanceof b,a=r(e),s=void 0===t;if(!n&&a&&e.constructor===b&&s)return e;w?a&&!s&&(e=e.source):e instanceof b&&(s&&(t=f.call(e)),e=e.source),M&&(i=!!t&&t.indexOf("y")>-1,i&&(t=t.replace(/y/g,"")));var l=o(w?new k(e,t):k(e,t),n?this:y,b);return M&&i&&p(l,{sticky:i}),l},_=function(e){e in b||l(b,e,{configurable:!0,get:function(){return k[e]},set:function(t){k[e]=t}})},S=c(k),L=0;while(S.length>L)_(S[L++]);y.constructor=b,b.prototype=y,d(a,"RegExp",b)}v("RegExp")},6828:function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));i("fb6a"),i("4d63"),i("ac1f"),i("25f0"),i("5319");function n(e,t){if(e){var i=e;if(/(y+)/.test("yyyy-MM-dd hh:mm:ss"))try{t=t.replace(RegExp.$1,(i.getFullYear()+"").substr(4-RegExp.$1.length))}catch(a){if(i=new Date(parseInt(e.slice(6,19))),!i||"Invalid Date"===i.toUTCString())return""}else if(i=new Date(parseInt(e.slice(6,19))),!i||"Invalid Date"===i.toUTCString())return"";var n={M:i.getMonth()+1,d:i.getDate(),h:i.getHours(),m:i.getMinutes(),s:i.getSeconds(),q:Math.floor((i.getMonth()+3)/3),S:i.getMilliseconds()};return t=t.replace(/([yMdhmsqS])+/g,(function(e,t){var a=n[t];return void 0!==a?(e.length>1&&(a="0"+a,a=a.substr(a.length-2)),a):"y"===t?(i.getFullYear()+"").substr(4-e.length):e})),t}}},"6d9c":function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"course-cloud-disk"},[i("head-top",{attrs:{title:"云盘"}},[i("span",{directives:[{name:"show",rawName:"v-show",value:1===e.activeIndex&&e.typeValue,expression:"activeIndex === 1 && typeValue"}],staticClass:"head-back head-first",attrs:{slot:"left"},on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.toBack(t)}},slot:"left"},[i("i",{staticClass:"iconfont icon-fanhui"})]),i("span",{directives:[{name:"show",rawName:"v-show",value:e.fileList.length>0,expression:"fileList.length>0"}],attrs:{slot:"right"},slot:"right"},[e.editMode?i("span",[i("van-icon",{directives:[{name:"show",rawName:"v-show",value:e.fileChecked.length>0,expression:"fileChecked.length>0"}],staticClass:"head-right",attrs:{name:"delete"},on:{click:e.toAllDrop}}),i("van-icon",{staticClass:"head-right",attrs:{"class-prefix":"iconfont icon-fanhui1"},on:{click:function(t){e.editMode=!1}}})],1):i("van-icon",{staticClass:"head-right",attrs:{"class-prefix":"iconfont icon-duoxuananniu"},on:{click:e.changeMode}})],1)]),i("div",{directives:[{name:"show",rawName:"v-show",value:1===e.activeIndex&&!e.typeValue,expression:"activeIndex === 1 && !typeValue"}],staticClass:"content"},e._l(e.typeList,(function(t,n){return i("van-cell-group",{key:n,staticClass:"cell_group"},[i("van-cell",{staticClass:"cell_main",attrs:{title:t.name,"is-link":""},on:{click:function(i){return e.typeClick(t)}}})],1)})),1),i("div",{directives:[{name:"show",rawName:"v-show",value:0===e.activeIndex||e.typeValue,expression:"activeIndex === 0 || typeValue"}],staticClass:"content"},[i("div",{directives:[{name:"show",rawName:"v-show",value:!e.editMode,expression:"!editMode"}],staticClass:"search_input"},[i("van-search",{attrs:{placeholder:"请输入搜索关键词"},on:{search:e.searchData},model:{value:e.keyValue,callback:function(t){e.keyValue=t},expression:"keyValue"}})],1),i("van-pull-refresh",{directives:[{name:"show",rawName:"v-show",value:!e.editMode,expression:"!editMode"}],staticClass:"pull_fresh",attrs:{"head-height":80},on:{refresh:e.searchData},model:{value:e.isLoading,callback:function(t){e.isLoading=t},expression:"isLoading"}},[e.fileList&&e.fileList.length>0?i("van-cell-group",e._l(e.fileList,(function(t,n){return i("van-cell",{key:n,staticClass:"cell_main",on:{click:function(i){return e.fileClick(t)}}},[i("template",{slot:"icon"},[i("van-icon",{staticClass:"cell_icon",attrs:{"class-prefix":"iconfont icon-kejian"}})],1),i("template",{slot:"title"},[i("div",{staticClass:"line_title"},[e._v(e._s(t.fileName+"."+t.fileExt))])]),i("template",{slot:"label"},[i("div",{staticClass:"line_title"},[t.fileSize>1048576?i("span",[e._v(" "+e._s(Math.round(t.fileSize/1024/10.24)/100)+" MB ")]):i("span",[e._v(" "+e._s(Math.round(t.fileSize/10.24)/100)+" KB ")])])])],2)})),1):i("r-lack-data")],1),i("div",{directives:[{name:"show",rawName:"v-show",value:e.editMode,expression:"editMode"}]},[i("van-checkbox-group",{model:{value:e.fileChecked,callback:function(t){e.fileChecked=t},expression:"fileChecked"}},[i("van-cell-group",e._l(e.fileList,(function(t,n){return i("van-cell",{key:n,staticClass:"cell_main",attrs:{clickable:""},on:{click:function(i){return e.fileCheck(t)}},scopedSlots:e._u([{key:"icon",fn:function(){return[i("van-icon",{staticClass:"cell_icon",attrs:{"class-prefix":"iconfont icon-kejian"}})]},proxy:!0},{key:"title",fn:function(){return[i("div",{staticClass:"line_title"},[e._v(" "+e._s(t.fileName+"."+t.fileExt))])]},proxy:!0},{key:"label",fn:function(){return[i("div",{staticClass:"line_title"},[t.fileSize>1048576?i("span",[e._v(" "+e._s(Math.round(t.fileSize/1024/10.24)/100)+" MB ")]):i("span",[e._v(" "+e._s(Math.round(t.fileSize/10.24)/100)+" KB ")])])]},proxy:!0}],null,!0)},[i("van-checkbox",{attrs:{slot:"right-icon",sharp:"square",name:t.id},slot:"right-icon"})],1)})),1)],1)],1)],1),i("div",{staticClass:"footer"},[i("van-tabbar",{model:{value:e.activeIndex,callback:function(t){e.activeIndex=t},expression:"activeIndex"}},e._l(e.menus,(function(t,n){return i("van-tabbar-item",{key:n,on:{click:function(i){return e.handleClick(t)}}},[i("i",{staticClass:" iconfont",class:t.icon,attrs:{slot:"icon"},slot:"icon"}),i("span",[e._v(e._s(t.name))])])})),1)],1),i("van-popup",{attrs:{position:"bottom"},model:{value:e.fileOperate,callback:function(t){e.fileOperate=t},expression:"fileOperate"}},[i("van-cell",{directives:[{name:"show",rawName:"v-show",value:e.fileSelected&&(e.canOpenFileExt.indexOf(e.fileSelected.fileExt)>-1||2===e.fileSelected.fileTransformed),expression:"fileSelected && (canOpenFileExt.indexOf(fileSelected.fileExt) > -1 || fileSelected.fileTransformed === 2)"}],attrs:{value:"预览"},on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.toPreView(t)}}},[i("van-icon",{attrs:{slot:"right-icon","class-prefix":"iconfont icon-chakan_yulan"},slot:"right-icon"})],1),i("van-cell",{attrs:{value:"删除"},on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.toDrop(t)}}},[i("van-icon",{attrs:{slot:"right-icon","class-prefix":"iconfont icon-shanchu"},slot:"right-icon"})],1)],1)],1)},a=[],s=(i("c740"),i("4160"),i("a15b"),i("a434"),i("159b"),i("2241")),o=i("6828"),l={name:"cloudDisk",data:function(){return{activeIndex:0,menus:[{name:"全部文件",index:0,icon:"icon-quanbuwenjian"},{name:"分类文件",index:1,icon:"icon-fenlei"}],typeList:[],keyValue:"",typeValue:"",fileList:[],isLoading:!1,fileSelected:null,fileOperate:!1,canOpenFileExt:["txt","bmp","gif","jpg","png","ico","mp4"],fileChecked:[],editMode:!1}},mounted:function(){this.getTypeList(),this.handleClick(this.menus[0])},methods:{getTypeList:function(){var e=this;this.typeList=[],this.$mainHttp.materialType.typeList().then((function(t){t.Result?t.Datas&&t.Datas.length>0&&t.Datas.forEach((function(t){e.typeList.push({id:t["MTypeID"],isSystem:t["MTIsSystem"],code:t["MTCode"],name:t["MTypename"],remark:t["MTDescription"]})})):t.Info&&e.$toast(t.Info)})).catch((function(){}))},handleClick:function(e){this.fileList=[],this.typeValue="",this.keyValue="",0===e.index&&this.searchData()},typeClick:function(e){this.typeValue=e.id,this.searchData()},searchData:function(){var e=this;this.fileList=[],this.isLoading=!0,this.$mainHttp.material.dataList({key:this.keyValue,mtid:this.typeValue,uid:this.$store.getters.userID,sfield:"",sdir:""}).then((function(t){t.Result?t.Data&&t.Data.length>0&&t.Data.forEach((function(t){e.fileList.push({id:t["MaterialID"],directoryID:t["DirectoryID"],fileName:t["MaterialName"],fileExt:t["MaterialFileExt"],fileSize:t["MaterialFileSize"]||0,fileTransformed:t["MaterialLowStreamEstate"],createTime:Object(o["a"])(t["MaterialCreateDate"],"yyyy-MM-dd")})})):t.Info&&e.$toast(t.Info),e.isLoading=!1})).catch((function(){e.isLoading=!1}))},changeMode:function(){this.fileChecked=[],this.editMode=!0},toBack:function(){this.typeValue=""},fileCheck:function(e){var t=this.fileChecked.findIndex((function(t){return t===e.id}));t>-1?this.fileChecked.splice(t,1):this.fileChecked.push(e.id)},toAllDrop:function(){var e=this;0===this.fileCheck.length?this.$toast("请选择需要删除的文件"):s["a"].confirm({message:"确认删除所有选中的文件？"}).then((function(){e.toALLDelete()})).catch((function(){}))},toALLDelete:function(){var e=this;this.$mainHttp.dirs.dataDelete({ids:this.fileChecked.join(","),token:this.$store.getters.token}).then((function(t){t.Result?(e.editMode=!1,e.searchData(),e.$toast("批量删除成功")):t.Info?e.$toast(t.Info):e.$toast("批量删除失败")})).catch((function(){e.$toast("操作失败")}))},fileClick:function(e){this.fileOperate=!0,this.fileSelected=e},toDrop:function(){var e=this;s["a"].confirm({message:"确认删除当前课时？"}).then((function(){e.toDelete()})).catch((function(){}))},toDelete:function(){var e=this;this.$mainHttp.dirs.dataDelete({ids:this.fileSelected.id,token:this.$store.getters.token}).then((function(t){t.Result?(e.searchData(),e.fileOperate=!1,e.$toast("删除成功")):t.Info?e.$toast(t.Info):e.$toast("删除失败")})).catch((function(){e.$toast("操作失败")}))},toPreView:function(){this.$store.commit("SET_CLOUD_FILE",this.fileSelected),this.$store.getters.course&&this.$gatewayHttp.broadcast.openSource({materialID:this.fileSelected.id,materialName:this.fileSelected.fileName,materialFileExt:this.fileSelected.fileExt}),this.$router.push("/cloud-disk/file-view")}}},c=l,r=(i("21d9"),i("2877")),f=Object(r["a"])(c,n,a,!1,null,"22d8dc2a",null);t["default"]=f.exports},7156:function(e,t,i){var n=i("861d"),a=i("d2bb");e.exports=function(e,t,i){var s,o;return a&&"function"==typeof(s=t.constructor)&&s!==i&&n(o=s.prototype)&&o!==i.prototype&&a(e,o),e}},a434:function(e,t,i){"use strict";var n=i("23e7"),a=i("23cb"),s=i("a691"),o=i("50c4"),l=i("7b0b"),c=i("65f0"),r=i("8418"),f=i("1dde"),u=i("ae40"),d=f("splice"),h=u("splice",{ACCESSORS:!0,0:0,1:2}),p=Math.max,v=Math.min,m=9007199254740991,g="Maximum allowed length exceeded";n({target:"Array",proto:!0,forced:!d||!h},{splice:function(e,t){var i,n,f,u,d,h,k=l(this),y=o(k.length),x=a(e,y),C=arguments.length;if(0===C?i=n=0:1===C?(i=0,n=y-x):(i=C-2,n=v(p(s(t),0),y-x)),y+i-n>m)throw TypeError(g);for(f=c(k,n),u=0;u<n;u++)d=x+u,d in k&&r(f,u,k[d]);if(f.length=n,i<n){for(u=x;u<y-n;u++)d=u+n,h=u+i,d in k?k[h]=k[d]:delete k[h];for(u=y;u>y-n+i;u--)delete k[u-1]}else if(i>n)for(u=y-n;u>x;u--)d=u+n-1,h=u+i-1,d in k?k[h]=k[d]:delete k[h];for(u=0;u<i;u++)k[u+x]=arguments[u+2];return k.length=y-n+i,f}})}}]);
//# sourceMappingURL=chunk-7b8c126b.7218b850.js.map