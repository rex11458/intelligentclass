(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3dd097ab"],{1592:function(t,s,e){},"5e31":function(t,s,e){"use strict";e.r(s);var n=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"discussion-info"},[e("head-top",{attrs:{title:"小组讨论"}},[(t.titleInfo.state,t._e())]),e("div",{staticClass:"sub_nav"},[e("span",[t._v("当前论题")]),e("div",[e("span",[t._v(" 获赞："+t._s(t.titleInfo.goodTotal||0)+" ")]),e("span",{staticStyle:{"padding-left":"1rem"}},[t._v(" 得分："+t._s(t.titleInfo.scoreTotal||0)+" ")])])]),e("div",{staticClass:"sub_module"},[e("span",{staticClass:"module-title"},[t._v(" 论题"+t._s(t.titleInfo.sort)+"： "),t.titleInfo.titleType===t.defaultType?e("span",[t._v(t._s(t.titleInfo.titleContent))]):e("img",{attrs:{alt:"",src:t.titleInfo.titleContent},on:{click:function(s){return t.preview(t.titleInfo.titleContent)}}})])]),e("div",{staticClass:"sub_nav"},[e("span",[e("van-tag",{attrs:{mark:"",plain:""}},[t._v(t._s(t.titleInfo.groupName))]),t._v(" 的讨论 ")],1),e("van-icon",{attrs:{"class-prefix":"iconfont icon-renmai",color:"#07c160"},on:{click:function(s){t.groupPersonsShow=!0}}})],1),e("div",{ref:"chat",staticClass:"chat"},[t.discussList&&t.discussList.length>0?e("div",{staticClass:"chat_content"},t._l(t.discussList,(function(s,n){return e("div",{key:n,staticClass:"chat_item left_item"},[e("div",{staticClass:"chat_icon"},[e("img",{directives:[{name:"real-img",rawName:"v-real-img",value:[s.userID,s.studentID],expression:"[sub.userID, sub.studentID]"}],attrs:{src:t.defaultHead,alt:""}})]),e("div",{staticClass:"chat_news"},[e("div",{staticClass:"chat_news_name"},[t._v(" "+t._s(s.studentName)+" "),e("span",{staticClass:"time"},[t._v(t._s(s.createTime))]),e("span",{staticClass:"operate",staticStyle:{"justify-content":"flex-end"}},[s.score?e("span",{staticClass:"score"},[t._v(t._s(s.score)+"分")]):t._e(),s.good?e("van-icon",{staticClass:"check",attrs:{name:"good-job"}}):t._e()],1)]),e("div",{staticClass:"chat_news_cont"},[s.type===t.defaultType?e("span",[t._v(t._s(s.content))]):e("img",{attrs:{src:s.content,alt:""},on:{click:function(e){return t.preview(s.content)}}}),e("div",{staticClass:"chat_news_arrow"})])])])})),0):e("r-lack-data")],1),e("van-popup",{attrs:{position:"bottom",closeable:""},model:{value:t.groupPersonsShow,callback:function(s){t.groupPersonsShow=s},expression:"groupPersonsShow"}},[e("div",{staticClass:"sub_nav"},[t._v(" 小组成员 ")]),t.personList&&t.personList.length>0?e("van-cell-group",t._l(t.personList,(function(s,n){return e("van-cell",{key:n,staticClass:"cell_main",scopedSlots:t._u([{key:"icon",fn:function(){return[e("img",{directives:[{name:"real-img",rawName:"v-real-img",value:[s.userID,s.studentID],expression:"[item.userID, item.studentID]"}],attrs:{src:t.defaultHead,alt:""}})]},proxy:!0},{key:"title",fn:function(){return[e("div",{staticClass:"flex-between line_title"},[e("span",[t._v(t._s(s.name))]),e("span",[t._v("排名： "),e("van-tag",{attrs:{type:"primary"}},[t._v(t._s(s.rank))])],1)])]},proxy:!0},{key:"label",fn:function(){return[e("div",{staticClass:"flex-between line_title"},[e("van-tag",{attrs:{plain:"",type:s.isLeader?"warning":"success"}},[t._v(" "+t._s(s.isLeader?"组长":"成员")+" ")]),e("span"),e("span",[t._v(" 总分："+t._s(s.scoreTotal||0))]),e("span",[t._v(" 总赞："+t._s(s.goodTotal||0))])],1)]},proxy:!0}],null,!0)})})),1):e("r-lack-data")],1)],1)},a=[],i=(e("4160"),e("159b"),e("08f3")),o=e("6828"),c={name:"discussion-info",data:function(){return{titleInfo:this.$route.query,defaultHead:e("a5b7"),discussList:[],defaultType:i["a"].Text,groupPersonsShow:!1,personList:[]}},mounted:function(){this.getGroupDiscussList(),this.getGroupPerson()},methods:{getGroupDiscussList:function(){var t=this;this.discussList=[],this.$mainHttp.groupDiscussion.dataDetail({gsid:this.titleInfo.id}).then((function(s){s.Result?s.GAData&&s.GAData&&(s.GAData.sort((function(t,s){return t.Key["SubmitTime"]>s.Key["SubmitTime"]?1:-1})),s.GAData.forEach((function(s){t.discussList.push({studentID:s["StudentID"],userID:s["UserID"],studentName:s["StudentName"],id:s.Key["GDID"],type:s.Key["GDForm"],content:s.Key["GDForm"]===i["a"].Text?s.Key["GDContent"]:t.$mainHttp.common.picture(s.Key["GDContent"],i["e"].GroupDiscuss),createTime:Object(o["a"])(s.Key["SubmitTime"],"hh:mm:ss"),good:s.Key["GDGood"]||0,score:s.Key["GDScore"]||0})}))):s.Info&&t.$toast(s.Info)})).catch((function(){}))},preview:function(t){this.$store.commit("SET_IMAGE_PREVIEW",t)},getGroupPerson:function(){var t=this;this.personList=[],this.$mainHttp.group.subjectMemberRanking({groupID:this.titleInfo.groupID,gsid:this.titleInfo.id}).then((function(s){s.Result&&s.Datas&&s.Datas.length>0&&s.Datas.forEach((function(s){t.personList.push({studentID:s["StudentID"],userID:s["UserID"],name:s["StudentName"],isLeader:s["IsGroupLeader"],rank:s["Ranking"],goodTotal:s["TotalGood"],scoreTotal:s["TotalScore"]})}))})).catch((function(){}))}}},r=c,u=(e("93c6"),e("2877")),l=Object(u["a"])(r,n,a,!1,null,"85fb1228",null);s["default"]=l.exports},"93c6":function(t,s,e){"use strict";var n=e("1592"),a=e.n(n);a.a}}]);