{"version":3,"sources":["webpack:///./src/assets/boy_img.png","webpack:///./src/pages/my-course/course/group/group.vue?42e2","webpack:///./src/pages/my-course/course/group/group.vue?a4e1","webpack:///src/pages/my-course/course/group/group.vue","webpack:///./src/pages/my-course/course/group/group.vue?cee9","webpack:///./src/pages/my-course/course/group/group.vue"],"names":["module","exports","render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","_v","_s","groupTimes","typeName","on","groupReset","dataList","length","ref","model","value","callback","$$v","selectIndex","expression","_l","item","index","key","refInFor","slot","groupName","staticStyle","personList","groupMax","sub","k","$event","studentClick","imgSrc","studentName","isLeader","studentSno","show","studentSelected","stopPropagation","preventDefault","setLeader","toMove","moveVisible","groupArr","moveConfirm","groupVisible","studentType","radioSelected","groupRandomNum","groupNum","directives","name","rawName","groupPersonNum","groupSubmit","staticRenderFns","components","data","gatewayList","studentList","groupList","studentSelectIndex","groupingID","courseID","computed","map","text","r","groupID","disabled","mounted","getGroupInfo","methods","$gatewayHttp","group","getDataInfo","then","res","Result","Data","getGroupList","getDataList","Datas","forEach","Key","gatewayID","studentID","tab","inited","getGroupMemberList","getGroupPersonList","push","studentSex","postSetLeader","postSetMove","oldGroupID","newGroupID","postSetGroup","groupingType","groupNumber","peopleNumber","component"],"mappings":"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","file":"js/chunk-71178a8d.deed3b6c.js","sourcesContent":["module.exports = __webpack_public_path__ + \"img/boy_img.8267a8ec.png\";","import mod from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./group.vue?vue&type=style&index=0&id=106d0f7f&lang=less&scoped=true&\"; export default mod; export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./group.vue?vue&type=style&index=0&id=106d0f7f&lang=less&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"course-group\"},[_c('head-top',{attrs:{\"title\":\"分组教学\"}}),_c('div',{staticClass:\"sub_nav\"},[_c('span',[_vm._v(\"第\"+_vm._s(_vm.groupTimes)+\"次分组：\"+_vm._s(_vm.typeName))]),_c('van-button',{attrs:{\"type\":\"primary\",\"size\":\"small\"},on:{\"click\":_vm.groupReset}},[_vm._v(\"重新分组\")])],1),(_vm.dataList && _vm.dataList.length>0)?_c('van-tabs',{ref:\"groups\",attrs:{\"animated\":\"\",\"swipeable\":\"\"},model:{value:(_vm.selectIndex),callback:function ($$v) {_vm.selectIndex=$$v},expression:\"selectIndex\"}},_vm._l((_vm.dataList),function(item,index){return _c('van-tab',{key:index,ref:'group_tab'+index,refInFor:true},[_c('div',{attrs:{\"slot\":\"title\"},slot:\"title\"},[_vm._v(\" \"+_vm._s(item.groupName)+\" \")]),_c('van-cell-group',[_c('div',{staticClass:\"sub_nav van-hairline--bottom\",staticStyle:{\"background-color\":\"#fff\",\"color\":\"#888\"}},[_c('span'),_c('div',[_vm._v(\"小组成员：\"+_vm._s(item.personList.length)+\"/\"+_vm._s(item.groupMax))])]),_vm._l((item.personList),function(sub,k){return _c('van-cell',{key:k,staticClass:\"cell_main\",attrs:{\"is-link\":\"\"},on:{\"click\":function($event){return _vm.studentClick(sub, k)}}},[_c('template',{slot:\"icon\"},[_c('img',{attrs:{\"src\":sub.imgSrc,\"alt\":\"\"}})]),_c('template',{slot:\"title\"},[_c('span',{staticClass:\"line_title\"},[_vm._v(_vm._s(sub.studentName))]),(!sub.isLeader)?_c('van-tag',{staticStyle:{\"margin-left\":\"20px\"},attrs:{\"type\":\"success\"}},[_vm._v(\"成员\")]):_c('van-tag',{staticStyle:{\"margin-left\":\"20px\"},attrs:{\"type\":\"danger\"}},[_vm._v(\"组长\")])],1),_c('template',{slot:\"label\"},[_c('span',{staticClass:\"line_title\"},[_vm._v(_vm._s(sub.studentSno))])])],2)})],2)],1)}),1):_c('r-lack-data'),_c('van-popup',{attrs:{\"position\":\"bottom\"},model:{value:(_vm.show),callback:function ($$v) {_vm.show=$$v},expression:\"show\"}},[_c('van-cell',{staticStyle:{\"align-items\":\"center\"},attrs:{\"value\":_vm.studentSelected.isLeader?'设为成员':'设为组长'},on:{\"click\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.setLeader($event)}}},[_c('van-icon',{attrs:{\"slot\":\"right-icon\",\"name\":\"award-o\"},slot:\"right-icon\"})],1),_c('van-cell',{attrs:{\"value\":\"移动到\"},on:{\"click\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.toMove($event)}}},[_c('van-icon',{attrs:{\"slot\":\"right-icon\",\"name\":\"share\"},slot:\"right-icon\"})],1)],1),_c('van-popup',{attrs:{\"position\":\"bottom\"},model:{value:(_vm.moveVisible),callback:function ($$v) {_vm.moveVisible=$$v},expression:\"moveVisible\"}},[_c('van-picker',{attrs:{\"show-toolbar\":\"\",\"columns\":_vm.groupArr},on:{\"cancel\":function($event){_vm.moveVisible = false},\"confirm\":_vm.moveConfirm}})],1),_c('van-popup',{attrs:{\"position\":\"bottom\",\"closeable\":\"\"},model:{value:(_vm.groupVisible),callback:function ($$v) {_vm.groupVisible=$$v},expression:\"groupVisible\"}},[_c('div',{staticClass:\"sub_nav\"},[_c('span',[_vm._v(\"进行第\"+_vm._s(_vm.groupTimes + 1)+\"次分组\")])]),_c('van-cell',[_c('span',{attrs:{\"slot\":\"icon\"},slot:\"icon\"},[_vm._v(\"选择成员\")]),_c('span',{attrs:{\"slot\":\"title\"},slot:\"title\"}),_c('van-radio-group',{attrs:{\"slot\":\"right-icon\",\"direction\":\"horizontal\"},slot:\"right-icon\",model:{value:(_vm.studentType),callback:function ($$v) {_vm.studentType=$$v},expression:\"studentType\"}},[_c('van-radio',{attrs:{\"name\":1}},[_vm._v(\"全部\")]),_c('van-radio',{attrs:{\"name\":2}},[_vm._v(\"签到\")])],1)],1),_c('van-radio-group',{staticStyle:{\"text-align\":\"left\"},model:{value:(_vm.radioSelected),callback:function ($$v) {_vm.radioSelected=$$v},expression:\"radioSelected\"}},[_c('van-cell-group',[_c('van-cell',{attrs:{\"title\":\"随机分组\",\"clickable\":\"\"},on:{\"click\":function($event){_vm.radioSelected = '1'}}},[_c('van-radio',{attrs:{\"slot\":\"icon\",\"name\":\"1\"},slot:\"icon\"}),_c('van-stepper',{attrs:{\"slot\":\"default\",\"integer\":\"\",\"min\":\"1\",\"max\":\"50\"},slot:\"default\",model:{value:(_vm.groupRandomNum),callback:function ($$v) {_vm.groupRandomNum=$$v},expression:\"groupRandomNum\"}}),_c('span',{staticStyle:{\"margin-left\":\"10px\"},attrs:{\"slot\":\"right-icon\"},slot:\"right-icon\"},[_vm._v(\"组\")])],1),_c('van-cell',{attrs:{\"title\":\"自由分组\",\"clickable\":\"\"},on:{\"click\":function($event){_vm.radioSelected = '2'}}},[_c('van-radio',{attrs:{\"slot\":\"icon\",\"name\":\"2\"},slot:\"icon\"}),_c('van-stepper',{attrs:{\"slot\":\"default\",\"integer\":\"\",\"min\":\"1\",\"max\":\"50\"},slot:\"default\",model:{value:(_vm.groupNum),callback:function ($$v) {_vm.groupNum=$$v},expression:\"groupNum\"}}),_c('span',{staticStyle:{\"margin-left\":\"10px\"},attrs:{\"slot\":\"right-icon\"},slot:\"right-icon\"},[_vm._v(\"组\")])],1),_c('van-cell',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.radioSelected === '2'),expression:\"radioSelected === '2'\"}],attrs:{\"title\":\"每组人数\"}},[_c('span',{staticStyle:{\"width\":\"40px\"},attrs:{\"slot\":\"icon\"},slot:\"icon\"}),_c('van-stepper',{attrs:{\"slot\":\"default\",\"integer\":\"\",\"min\":\"1\",\"max\":\"50\"},slot:\"default\",model:{value:(_vm.groupPersonNum),callback:function ($$v) {_vm.groupPersonNum=$$v},expression:\"groupPersonNum\"}}),_c('span',{staticStyle:{\"margin-left\":\"10px\"},attrs:{\"slot\":\"right-icon\"},slot:\"right-icon\"},[_vm._v(\"人\")])],1),_c('van-button',{staticStyle:{\"width\":\"100%\"},attrs:{\"type\":\"info\"},on:{\"click\":_vm.groupSubmit}},[_vm._v(\"确定\")])],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"course-group\">\r\n    <head-top title=\"分组教学\">\r\n    </head-top>\r\n\r\n    <div class=\"sub_nav\">\r\n      <span>第{{groupTimes}}次分组：{{typeName}}</span>\r\n      <van-button type=\"primary\" size=\"small\" @click=\"groupReset\">重新分组</van-button>\r\n    </div>\r\n\r\n    <van-tabs v-model=\"selectIndex\" ref=\"groups\" animated swipeable v-if=\"dataList && dataList.length>0\">\r\n      <van-tab v-for=\"(item, index) in dataList\" :ref=\"'group_tab'+index\" :key=\"index\">\r\n        <div slot=\"title\">\r\n          {{item.groupName}}\r\n        </div>\r\n        <van-cell-group>\r\n          <div class=\"sub_nav van-hairline--bottom\" style=\"background-color: #fff; color: #888;\">\r\n            <span></span>\r\n            <div>小组成员：{{item.personList.length}}/{{item.groupMax}}</div>\r\n          </div>\r\n\r\n          <van-cell is-link class=\"cell_main\" v-for=\"(sub, k) in item.personList\" :key=\"k\"\r\n                    @click=\"studentClick(sub, k)\">\r\n            <template slot=\"icon\">\r\n              <img :src=\"sub.imgSrc\" alt=\"\"/>\r\n            </template>\r\n            <template slot=\"title\">\r\n              <span class=\"line_title\">{{sub.studentName}}</span>\r\n              <van-tag type=\"success\" style=\"margin-left: 20px;\" v-if=\"!sub.isLeader\">成员</van-tag>\r\n              <van-tag type=\"danger\" style=\"margin-left: 20px;\" v-else>组长</van-tag>\r\n            </template>\r\n            <template slot=\"label\">\r\n              <span class=\"line_title\">{{sub.studentSno}}</span>\r\n            </template>\r\n          </van-cell>\r\n        </van-cell-group>\r\n      </van-tab>\r\n    </van-tabs>\r\n    <r-lack-data v-else></r-lack-data>\r\n\r\n    <van-popup v-model=\"show\" position=\"bottom\">\r\n      <van-cell :value=\"studentSelected.isLeader?'设为成员':'设为组长'\" style=\"align-items: center;\"\r\n                @click.stop.prevent=\"setLeader\">\r\n        <van-icon slot=\"right-icon\" name=\"award-o\"></van-icon>\r\n      </van-cell>\r\n      <van-cell value=\"移动到\" @click.stop.prevent=\"toMove\">\r\n        <van-icon slot=\"right-icon\" name=\"share\"></van-icon>\r\n      </van-cell>\r\n    </van-popup>\r\n\r\n    <van-popup v-model=\"moveVisible\" position=\"bottom\">\r\n      <van-picker show-toolbar :columns=\"groupArr\" @cancel=\"moveVisible = false\" @confirm=\"moveConfirm\">\r\n      </van-picker>\r\n    </van-popup>\r\n\r\n    <van-popup v-model=\"groupVisible\" position=\"bottom\" closeable>\r\n      <div class=\"sub_nav\">\r\n        <span>进行第{{ groupTimes + 1 }}次分组</span>\r\n      </div>\r\n      <van-cell>\r\n        <span slot=\"icon\">选择成员</span>\r\n        <span slot=\"title\"></span>\r\n        <van-radio-group v-model=\"studentType\" direction=\"horizontal\" slot=\"right-icon\">\r\n          <van-radio :name=\"1\">全部</van-radio>\r\n          <van-radio :name=\"2\">签到</van-radio>\r\n        </van-radio-group>\r\n      </van-cell>\r\n      <van-radio-group v-model=\"radioSelected\" style=\"text-align: left;\">\r\n        <van-cell-group>\r\n          <van-cell title=\"随机分组\" clickable @click=\"radioSelected = '1'\">\r\n            <van-radio slot=\"icon\" name=\"1\"></van-radio>\r\n            <van-stepper slot=\"default\" v-model=\"groupRandomNum\" integer min=\"1\" max=\"50\">\r\n            </van-stepper>\r\n            <span slot=\"right-icon\" style=\"margin-left: 10px;\">组</span>\r\n          </van-cell>\r\n          <van-cell title=\"自由分组\" clickable @click=\"radioSelected = '2'\">\r\n            <van-radio slot=\"icon\" name=\"2\"></van-radio>\r\n            <van-stepper slot=\"default\" v-model=\"groupNum\" integer min=\"1\" max=\"50\">\r\n            </van-stepper>\r\n            <span slot=\"right-icon\" style=\"margin-left: 10px;\">组</span>\r\n          </van-cell>\r\n          <van-cell v-show=\"radioSelected === '2'\" title=\"每组人数\">\r\n            <span slot=\"icon\" style=\"width: 40px;\"></span>\r\n            <van-stepper slot=\"default\" v-model=\"groupPersonNum\" integer min=\"1\" max=\"50\">\r\n            </van-stepper>\r\n            <span slot=\"right-icon\" style=\"margin-left: 10px;\">人</span>\r\n          </van-cell>\r\n          <van-button type=\"info\" style=\"width: 100%;\" @click=\"groupSubmit\">确定</van-button>\r\n        </van-cell-group>\r\n      </van-radio-group>\r\n    </van-popup>\r\n\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport defaultImg from \"../../../../assets/boy_img.png\";\r\n\r\nexport default {\r\n  name: \"group\",\r\n  components: {},\r\n  data () {\r\n    return {\r\n      typeName: \"随机分组\",\r\n      selectIndex: 0,\r\n      gatewayList: [],\r\n      studentList: [],\r\n      groupList: [],\r\n      studentSelected: {},\r\n      studentSelectIndex: -1,\r\n      show: false,\r\n      moveVisible: false,\r\n\r\n      groupVisible: false,\r\n      radioSelected: \"1\",\r\n      studentType: 1,\r\n      groupTimes: 1,\r\n      groupRandomNum: 1,\r\n      groupPersonNum: 1,\r\n      groupNum: 1,\r\n      groupingID: \"\",\r\n      courseID: \"\"\r\n    };\r\n  },\r\n  computed: {\r\n    dataList () {\r\n      return this.groupList;\r\n    },\r\n    groupArr () {\r\n      return this.groupList.map((r, k) => {\r\n        return {\r\n          text: r.groupName,\r\n          value: r.groupID,\r\n          index: k,\r\n          disabled: k === this.selectIndex\r\n        }\r\n      });\r\n    }\r\n  },\r\n  mounted () {\r\n    this.getGroupInfo();\r\n  },\r\n  methods: {\r\n    getGroupInfo () {\r\n      this.$gatewayHttp.group.getDataInfo().then(res => {\r\n        if (res.Result && res.Data) {\r\n          this.radioSelected = (res.Data[\"GroupingType\"] + \"\") || \"1\";\r\n          this.typeName = this.radioSelected === \"1\" ? \"随机分组\" : \"自由分组\";\r\n          this.groupingID = res.Data[\"GroupingID\"];\r\n          this.courseID = res.Data[\"CIID\"];\r\n          this.groupPersonNum = res.Data[\"GroupNumber\"] || 0;\r\n          this.groupTimes = res.Data[\"GroupingNumber\"] || 1;\r\n          if (this.radioSelected === \"1\") {\r\n            this.groupRandomNum = res.Data[\"GroupingNumber\"] || 1;\r\n          } else {\r\n            this.groupNum = res.Data[\"GroupingNumber\"] || 1;\r\n          }\r\n          this.getGroupList();\r\n        } else if (res.Info) {\r\n          this.$toast(res.Info);\r\n        }\r\n      }).catch(() => {\r\n      });\r\n    },\r\n    getGroupList () {\r\n      this.groupList = [];\r\n      this.$gatewayHttp.group.getDataList({\r\n        groupingID: this.groupingID\r\n      }).then(res => {\r\n        if (res.Result) {\r\n          if (res.Datas && res.Datas.length > 0) {\r\n            res.Datas.forEach(item => {\r\n              this.groupList.push({\r\n                groupName: item.Key[\"GroupName\"],\r\n                groupID: item.Key[\"GroupID\"],\r\n                gatewayID: item.Key[\"GatewayID\"],\r\n                groupMax: item.Key[\"GroupNumber\"],\r\n                studentID: item.Key[\"StudentID\"],\r\n                personList: []\r\n              });\r\n            });\r\n\r\n            this.groupList.forEach((item, index) => {\r\n              this.getGroupMemberList(item, index);\r\n            });\r\n\r\n            // 重新分组后，需要重新渲染，由于官方无支持文档，查阅源码后，使用以下方案间接实现；\r\n            this.$nextTick(() => {\r\n              const tab = this.$refs['group_tab' + this.selectIndex][0] || this.$refs['group_tab' + this.selectIndex];\r\n              tab.inited = false;\r\n              tab.inited = true;\r\n            });\r\n          }\r\n        } else if (res.Info) {\r\n          this.$toast(res.Info);\r\n        }\r\n      }).catch(() => {\r\n      });\r\n    },\r\n    getGroupMemberList (group, index) {\r\n      group.personList = [];\r\n      this.$gatewayHttp.group.getGroupPersonList({\r\n        groupID: group.groupID\r\n      }).then(res => {\r\n        if (res.Result) {\r\n          if (res.Datas && res.Datas.length > 0) {\r\n            res.Datas.forEach(item => {\r\n              group.personList.push({\r\n                imgSrc: defaultImg,\r\n                studentID: item[\"StudentID\"],\r\n                studentName: item[\"StudentName\"],\r\n                studentSno: item[\"StudentXH\"],\r\n                studentSex: item[\"StudentGender\"],\r\n                isLeader: group.studentID === item[\"StudentID\"]\r\n              });\r\n            });\r\n          }\r\n        } else if (res.Info) {\r\n          this.$toast(res.Info);\r\n        }\r\n      }).catch(() => {\r\n      });\r\n    },\r\n\r\n    studentClick (sub, index) {\r\n      // console.log(sub);\r\n      this.studentSelected = sub;\r\n      this.studentSelectIndex = index;\r\n      this.show = true;\r\n    },\r\n    setLeader () {\r\n      // console.log(\"toLeader\");\r\n      const info = this.studentSelected.isLeader ? \"成员\" : \"组长\";\r\n      this.$gatewayHttp.group.postSetLeader({\r\n        groupID: this.groupList[this.selectIndex].groupID,\r\n        studentID: this.studentSelected.isLeader ? \"\" : this.studentSelected.studentID\r\n      }).then(res => {\r\n        if (res.Result) {\r\n          this.$toast(\"设为\" + info + \"成功\");\r\n          this.getGroupList();\r\n          this.show = false;\r\n        } else if (res.Info) {\r\n          this.$toast(res.Info);\r\n        } else {\r\n          this.$toast(\"设为\" + info + \"失败\");\r\n        }\r\n      }).catch(() => {\r\n        this.$toast(\"操作失败\");\r\n      });\r\n    },\r\n    toMove () {\r\n      this.show = false;\r\n      this.moveVisible = true;\r\n    },\r\n    moveConfirm (data) {\r\n      // console.log(\"moveConfirm:\", value);\r\n      // this.studentSelected.isLeader = false;\r\n      // this.groupList[this.selectIndex].personList.splice([this.studentSelectIndex], 1);\r\n      // this.groupList[value.index].personList.push(this.studentSelected);\r\n      this.$gatewayHttp.group.postSetMove({\r\n        oldGroupID: this.groupList[this.selectIndex].groupID,\r\n        newGroupID: data.value,\r\n        studentID: this.studentSelected.studentID\r\n      }).then(res => {\r\n        if (res.Result) {\r\n          this.$toast(\"移动成员成功\");\r\n          this.getGroupList();\r\n          this.moveVisible = false;\r\n        } else if (res.Info) {\r\n          this.$toast(res.Info);\r\n        } else {\r\n          this.$toast(\"移动成员失败\");\r\n        }\r\n      }).catch(() => {\r\n        this.$toast(\"操作失败\");\r\n      });\r\n    },\r\n    groupReset () {\r\n      this.radioSelected = \"1\";\r\n      this.studentType = 1;\r\n      this.groupRandomNum = 1;\r\n      this.groupPersonNum = 1;\r\n      this.groupNum = 1;\r\n      this.groupVisible = true;\r\n    },\r\n    groupSubmit () {\r\n      this.$gatewayHttp.group.postSetGroup({\r\n        studentType: this.studentType,\r\n        groupingType: this.radioSelected,\r\n        groupNumber: this.radioSelected === \"1\" ? this.groupRandomNum : this.groupNum,\r\n        peopleNumber: this.radioSelected === \"1\" ? 1 : this.groupPersonNum\r\n      }).then(res => {\r\n        if (res.Result) {\r\n          this.$toast(\"分组成功\");\r\n          this.typeName = this.radioSelected === \"1\" ? \"随机分组\" : \"自由分组\";\r\n          this.groupVisible = false;\r\n          this.getGroupInfo();\r\n        } else if (res.Info) {\r\n          this.$toast(res.Info);\r\n        } else {\r\n          this.$toast(\"分组失败\");\r\n        }\r\n      }).catch(() => {\r\n        this.$toast(\"操作失败\");\r\n      });\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n@import \"./../../../../styles/common/base\";\r\n.course-group {\r\n  min-height: 100%;\r\n  background-color: #fff;\r\n}\r\n</style>\r\n","import mod from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./group.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./group.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./group.vue?vue&type=template&id=106d0f7f&scoped=true&\"\nimport script from \"./group.vue?vue&type=script&lang=js&\"\nexport * from \"./group.vue?vue&type=script&lang=js&\"\nimport style0 from \"./group.vue?vue&type=style&index=0&id=106d0f7f&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"106d0f7f\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}