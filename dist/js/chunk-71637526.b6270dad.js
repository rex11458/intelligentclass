(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-71637526"],{"2c81":function(t,e,s){},"87aa":function(t,e,s){"use strict";var i=s("2c81"),a=s.n(i);a.a},b91a:function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"course-class-practise"},[s("head-top",{attrs:{title:"随堂测验"}}),s("van-pull-refresh",{staticClass:"pull_fresh",on:{refresh:t.getPractiseList},model:{value:t.isLoading,callback:function(e){t.isLoading=e},expression:"isLoading"}},[t.practiseList&&t.practiseList.length>0?s("div",{staticClass:"sub_module"},t._l(t.practiseList,(function(e,i){return s("div",{key:i,staticClass:"list-item van-hairline--bottom",on:{click:function(s){return t.handleClick(e,i)}}},[s("div",{staticClass:"flex-between"},[t._v("1 "),s("span",[t._v(t._s(e.name))]),1===e.state?s("van-tag",{attrs:{plain:""}},[t._v("未测验")]):2===e.state?s("van-tag",{attrs:{plain:"",type:"primary"}},[t._v("进行中")]):4===e.state?s("van-tag",{attrs:{plain:"",type:"danger"}},[t._v("已停止")]):s("van-tag",{attrs:{plain:"",type:"danger"}},[t._v("已结束")])],1),s("div",{staticClass:"flex-between item-remark"},[s("span",[t._v("题数:"+t._s(e.number))]),s("span",[t._v("总分:"+t._s(e.score))]),1!==e.state?s("span",[t._v("时长:"+t._s(0===e.time?"不限":e.time))]):t._e(),s("span",[e.startTime?s("span",[t._v("开始:"+t._s(e.startTime))]):t._e()])])])})),0):s("r-lack-data")],1),s("van-popup",{attrs:{position:"bottom"},model:{value:t.operateVisible,callback:function(e){t.operateVisible=e},expression:"operateVisible"}},[s("van-cell",{attrs:{title:"题库预览"},on:{click:t.toPreview}}),t.selectItem&&1!==t.selectItem.state?t._e():s("van-cell",{staticStyle:{"text-align":"left"},attrs:{title:"开始测验"},scopedSlots:t._u([{key:"title",fn:function(){return[s("div",{staticClass:"flex-between"},[s("div",{staticClass:"flex"},[s("span",[t._v("计时：")]),s("van-stepper",{attrs:{integer:"",min:"0",max:"1000"},model:{value:t.testTime,callback:function(e){t.testTime=e},expression:"testTime"}}),s("span",{staticStyle:{"padding-left":"10px"}},[t._v("分(0表示不计时)")])],1),s("van-button",{attrs:{type:"primary",size:"small"},on:{click:t.toStart}},[t._v("开始测验")])],1)]},proxy:!0}],null,!1,628594860)}),t.selectItem&&[2,3,4].indexOf(t.selectItem.state)>-1?s("van-cell",{attrs:{title:"提交人员"},on:{click:t.toViewSubmit}}):t._e(),t.selectItem&&[3].indexOf(t.selectItem.state)>-1?s("van-cell",{attrs:{title:"查看作答"},on:{click:t.toViewAnswer}}):t._e(),t.selectItem&&[3].indexOf(t.selectItem.state)>-1?s("van-cell",{attrs:{title:"得分统计"},on:{click:t.toViewScore}}):t._e()],1)],1)},a=[],c=(s("4de4"),s("c740"),s("4160"),s("c975"),s("159b"),s("6828")),n=s("08f3"),r={name:"classPractise",data:function(){return{dataList:[],operateVisible:!1,isLoading:!1,selectIndex:-1,selectItem:null,testTime:0}},computed:{practiseList:function(){return this.$route.path.indexOf("record")>-1?this.dataList.filter((function(t){return 1!==t.state})):this.dataList}},created:function(){this.getPractiseList()},methods:{getPractiseList:function(){var t=this;this.dataList=[],this.isLoading=!0,this.$mainHttp.classPractise.CoursePractise({chID:this.$store.getters.classHourID,ciID:this.$store.getters.courseID,classID:this.$store.getters.classID}).then((function(e){e.Result?(e.Datas.sort((function(t,e){return t["StartTime"]>e["StartTime"]?-1:1})),e.Datas.forEach((function(e){var s={taskID:e["CIPID"]+"",testID:e["CPID"]+"",id:e["PLID"]+"",name:e["PLTitle"]+"",number:e["SubjectTotal"]||0,score:e["SubjectScore"]||0,state:e["CIPState"],time:e["CIPTime"],createTime:Object(c["a"])(e["CreateTime"],"yyyy-MM-dd"),startTime:e["StartTime"]?e["StartTime"].substring(0,16):""};-1===t.dataList.findIndex((function(t){return t.id===s.id}))&&t.dataList.push(s)}))):e.Info&&t.$toast(e.Info),t.isLoading=!1})).catch((function(){t.isLoading=!1}))},handleClick:function(t,e){this.selectIndex=e,this.selectItem=t,this.testTime=0,this.operateVisible=!0},toPreview:function(){this.$store.commit("SET_PRACTISE_LIBRARY",this.selectItem),this.$router.push("/practise-library/view")},toStart:function(){var t=this;this.$mainHttp.classPractise.setStart({cpID:this.selectItem.testID,ciID:this.$store.getters.courseID,time:this.testTime,classID:this.$store.getters.classID,plID:this.selectItem.id,subjectTotal:this.selectItem.number}).then((function(e){e.Result?(t.getPractiseList(),t.operateVisible=!1,t.$toast("下发成功")):e.Info?t.$toast(e.Info):t.$toast("下发失败")})).catch((function(){t.$toast("操作失败")}))},toStop:function(){this.dataList[this.selectIndex].state=1,this.operateVisible=!1},toViewSubmit:function(){this.operateVisible=!1,this.$store.commit("SET_PRACTISE_LIBRARY",this.selectItem),this.$router.push("/course/class-practise/response")},toViewAnswer:function(){this.operateVisible=!1,this.$store.commit("SET_PRACTISE_LIBRARY",this.selectItem),this.$router.push("/course/class-practise/detail")},toViewScore:function(){this.operateVisible=!1,this.$store.commit("SET_PRACTISE_LIBRARY",this.selectItem),this.$router.push("/course/class-practise/score"),this.$store.dispatch("InteractSwitchPage",n["l"].PractiseScore)}},watch:{"$store.getters.practiseState":{immediate:!0,handler:function(t,e){0===t&&this.getPractiseList()}}}},o=r,l=(s("87aa"),s("2877")),u=Object(l["a"])(o,i,a,!1,null,"a8c76168",null);e["default"]=u.exports}}]);