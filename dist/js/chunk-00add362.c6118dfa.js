(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-00add362"],{5652:function(t,e,s){"use strict";s.r(e);var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"course-practise-view"},[s("head-top",{attrs:{title:"随堂练习评卷"}}),s("div",{staticClass:"sub_nav"},[t._v(" "+t._s(t.libraryInfo.name||"查看作答")+" ")]),s("div",{staticClass:"sub_module flex-between"},[s("span",[t._v("题数:"+t._s(t.libraryInfo.number))]),s("span",[t._v("总分:"+t._s(t.libraryInfo.score))])]),s("div",{staticClass:"sub_nav"},[s("span",[t._v("题目")]),s("span",[t.selectedIndex>1?s("van-button",{staticStyle:{"margin-right":"10px"},attrs:{type:"primary",size:"small"},on:{click:function(e){return t.next(-1)}}},[t._v(" 上一题 ")]):t._e(),t.selectedIndex<t.libraryInfo.number?s("van-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){return t.next(1)}}},[t._v(" 下一题 ")]):t._e()],1)]),t.practiseInfo?[s("div",{staticClass:"sub_module practise-item"},[s("p",{staticClass:"practise-title"},[s("span",[t._v(t._s(t.selectedIndex))]),s("span",[t._v(t._s("、【"+t.practiseTypeOptions[t.practiseInfo.type-1].label+"】"+t.practiseInfo.title)+" ")]),s("span",[t._v("（"+t._s(t.practiseInfo.score)+"分）")])]),[1,2].indexOf(t.practiseInfo.type)>-1?s("div",[s("h4",[t._v("选项：")]),t._l(t.practiseInfo.options,(function(e,n){return s("p",{key:n,staticClass:"practise-options"},[t._v(t._s(e.name+"、"+e.value))])}))],2):t._e(),s("h4",[t._v("答案：")]),s("div",{staticClass:"practise-content"},[t._v(t._s(t.practiseInfo.answer||"无"))]),s("h4",[t._v("解析：")]),s("div",{staticClass:"practise-content"},[t._v(t._s(t.practiseInfo.analysis||"无"))])]),t.practiseInfo&&4!==t.practiseInfo.type?[t._m(0),s("div",{staticClass:"sub_module"},[s("div",{staticClass:"flex-wrap-between"},[t._l(t.optionPersons,(function(e,n){return s("div",{key:n,staticClass:"van-hairline--surround list-col",on:{click:function(s){return t.showOptionPersons(e)}}},[s("span",[t._v(t._s(e.name)+"："+t._s(e.total))])])})),t._l((4-t.optionPersons.length%4)%4,(function(t){return s("div",{key:-t,staticClass:" list-col"})}))],2)])]:[s("div",{staticClass:"sub_nav"},[s("span",[t._v("提交成员")]),s("span",[t._v(t._s(t.submitPersonList.length)+"人")])]),s("div",{staticClass:"sub_module"},[0===t.submitPersonList.length?s("r-lack-data"):s("div",{staticClass:"flex-wrap-between"},[t._l(t.submitPersonList,(function(e,n){return s("div",{key:n,staticClass:"student_card van-hairline--surround",on:{click:function(s){return t.toAnswer(e)}}},[s("img",{directives:[{name:"real-img",rawName:"v-real-img",value:[e.userID,e.studentID],expression:"[sub.userID, sub.studentID]"}],staticClass:"col_4",attrs:{src:t.defaultHead,alt:""}}),s("div",[t._v(t._s(e.studentName))])])})),t._l(Math.abs(4-t.submitPersonList.length%4)%4,(function(t){return s("div",{key:-t,staticClass:"student_card",staticStyle:{width:"19vw"}})}))],2)],1)],1!==t.practiseInfo.state?[s("div",{staticClass:"sub_nav"},[s("span",[t._v("问卷调研")]),t.practiseInfo.isSurvey?s("span",[t._v("已调研")]):s("span",[t._v("未调研")])]),t.practiseInfo.isSurvey?s("div",{staticClass:"sub_module"},[t.practiseInfo.isSurvey?s("div",{staticClass:"flex-between"},[s("div",{staticClass:"van-hairline--surround list-col"},[s("span",[t._v("已掌握："+t._s(t.surveyInfo.yes))])]),s("div",{staticClass:"van-hairline--surround list-col"},[s("span",[t._v("未掌握："+t._s(t.surveyInfo.no))])])]):s("r-lack-data")],1):t._e()]:t._e()]:t._e(),s("van-popup",{attrs:{position:"bottom",closeable:""},model:{value:t.optionPersonsShow,callback:function(e){t.optionPersonsShow=e},expression:"optionPersonsShow"}},[t.optionPersonsSelected?s("div",{staticClass:"sub_nav",staticStyle:{"line-height":"48px"}},[s("span",[t._v("以下人员，提交选项为"+t._s(t.optionPersonsSelected.name))])]):t._e(),t.optionPersonsSelected?s("div",{staticClass:"sub_module"},[0===t.optionPersonsSelected.persons.length?s("span",[t._v("暂无数据")]):s("div",{staticClass:"flex-wrap-between"},[t._l(t.optionPersonsSelected.persons,(function(e,n){return s("div",{key:n,staticClass:"student_card van-hairline--surround"},[s("img",{directives:[{name:"real-img",rawName:"v-real-img",value:[e.userID,e.studentID],expression:"[sub.userID, sub.studentID]"}],staticClass:"col_4",attrs:{src:t.defaultHead,alt:""}}),s("div",[t._v(t._s(e.studentName))])])})),t._l(Math.abs(4-t.optionPersonsSelected.persons.length%4)%4,(function(t){return s("div",{key:-t,staticClass:"student_card",staticStyle:{width:"19vw"}})}))],2)]):t._e()]),s("van-popup",{attrs:{position:"bottom",closeable:""},model:{value:t.submitPersonsShow,callback:function(e){t.submitPersonsShow=e},expression:"submitPersonsShow"}},[s("div",{staticClass:"sub_nav",staticStyle:{"line-height":"48px"}},[t.practiseInfo&&4!==t.practiseInfo.type?s("span",[t._v("作答明细")]):s("span",[t._v("答题评分")])]),t.submitPersonSelected?s("div",[s("van-field",{attrs:{label:"提交学生：",disabled:""},model:{value:t.submitPersonSelected.studentName,callback:function(e){t.$set(t.submitPersonSelected,"studentName",e)},expression:"submitPersonSelected.studentName"}}),s("van-field",{attrs:{label:"正确答案：",type:"textarea",disabled:""},model:{value:t.practiseInfo.answer,callback:function(e){t.$set(t.practiseInfo,"answer",e)},expression:"practiseInfo.answer"}}),s("van-field",{attrs:{label:"提交答案：",disabled:""},scopedSlots:t._u([{key:"input",fn:function(){return[t.practiseInfo&&4!==t.practiseInfo.type?s("span",{style:{color:"#969799"}},[t._v(t._s(t.submitPersonSelected.answer))]):s("div",{staticClass:"answer-content",domProps:{innerHTML:t._s(t.transform(t.submitPersonSelected.answer))}})]},proxy:!0}],null,!1,2056058246)}),1===t.practiseInfo.survey?s("van-field",{attrs:{label:"问卷调研：",disabled:""},scopedSlots:t._u([{key:"input",fn:function(){return[1===t.submitPersonSelected.master?s("van-tag",{attrs:{type:"success"}},[t._v("已掌握")]):0===t.submitPersonSelected.master?s("van-tag",{attrs:{type:"danger"}},[t._v("未掌握")]):s("van-tag",[t._v("未参与")])]},proxy:!0}],null,!1,1206316893)}):t._e(),s("van-field",{attrs:{label:"本题分数：",disabled:""},model:{value:t.practiseInfo.score,callback:function(e){t.$set(t.practiseInfo,"score",e)},expression:"practiseInfo.score"}}),s("van-field",{attrs:{name:"stepper",label:"作答得分："},scopedSlots:t._u([{key:"input",fn:function(){return[t.practiseInfo&&4!==t.practiseInfo.type?s("span",{style:{color:"#969799"}},[t._v(" "+t._s(t.submitPersonSelected.score||0)+" ")]):s("van-stepper",{attrs:{integer:"",min:"0",max:t.practiseInfo.score},model:{value:t.submitPersonSelected.score,callback:function(e){t.$set(t.submitPersonSelected,"score",e)},expression:"submitPersonSelected.score"}}),s("span",{staticStyle:{"padding-left":"10px"}},[t._v("分")])]},proxy:!0}],null,!1,1920238424)}),s("van-field",{attrs:{label:"老师点评：",placeholder:"请填写老师点评",type:"textarea",maxlength:"100",autosize:"","show-word-limit":""},model:{value:t.submitPersonSelected.comment,callback:function(e){t.$set(t.submitPersonSelected,"comment",e)},expression:"submitPersonSelected.comment"}}),t.practiseInfo&&4===t.practiseInfo.type?s("van-button",{staticStyle:{width:"100%"},attrs:{type:"primary"},on:{click:t.toScore}},[t._v(" 提交 ")]):t._e()],1):s("r-lack-data")],1)],2)},a=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"sub_nav"},[s("span",[t._v("作答情况")])])}],i=(s("4160"),s("d81d"),s("b0c0"),s("159b"),s("ed08")),o={name:"practiseView",data:function(){return{defaultHead:s("a5b7"),libraryInfo:this.$store.getters.practiseLibrary,selectedIndex:1,practiseTypeOptions:[{label:"单选题",value:1},{label:"多选题",value:2},{label:"判断题",value:3},{label:"问答题",value:4}],practiseInfo:null,optionPersons:[],optionPersonsSelected:null,optionPersonsShow:!1,submitPersonList:[],submitPersonsShow:!1,submitPersonSelected:null,answerPersons:[],answerPersonsShow:!1,answerPersonsSelected:null,surveyInfo:{yes:0,no:0}}},created:function(){this.getPractiseInfo()},methods:{transform:function(t){return Object(i["h"])("show",t,this.$mainHttp.common.picture)},next:function(t){this.selectedIndex+=t,this.getPractiseInfo()},getPractiseInfo:function(){var t=this;this.practiseInfo=null,this.$mainHttp.classPractise.SubjectInfo({plID:this.libraryInfo.id,psserial:this.selectedIndex}).then((function(e){e.Result?(t.practiseInfo={id:e.Data["PSID"],index:e.Data["PSSerial"],title:e.Data["PSContent"],answer:e.Data["PSAnswer"],analysis:e.Data["PSanalysis"],type:e.Data["PSType"],optionsNum:e.Data["PSOption"],score:e.Data["PSScore"],state:e.Data["State"],options:e.SODatas?e.SODatas.map((function(t){return{id:t["SOID"],name:t["SOSerial"],value:t["SOContent"]}})):[],answers:e.Options?e.Options.map((function(t){return{id:t["ID"],name:t["OptionName"],total:t["Total"]}})):[],isSurvey:e["IsSurvey"],falseRate:e["ErrorRate"],trueRate:e["CorrectRate"]},4!==t.practiseInfo.type?t.getAnswerStatistics():t.getSubmitPerson(),t.getSurveyPerson()):e.Info&&t.$toast(e.Info)})).catch((function(){}))},getAnswerStatistics:function(){var t=this;this.optionPersons=[],this.$mainHttp.classPractise.answerStatistics({cipID:this.libraryInfo.taskID,psid:this.practiseInfo.id}).then((function(e){e.Result&&e.Datas&&e.Datas.length>0&&e.Datas.forEach((function(e){t.optionPersons.push({name:e["OptionName"],total:e["Total"],persons:[]})}))})).catch((function(){}))},showOptionPersons:function(t){t.total>0&&(this.optionPersonsSelected=t,this.optionPersonsShow=!0,this.getOptionPerson())},getOptionPerson:function(){var t=this;this.optionPersonsSelected.persons=[],this.$mainHttp.classPractise.answerPerson({cipID:this.libraryInfo.taskID,psid:this.practiseInfo.id,answer:this.optionPersonsSelected.name}).then((function(e){e.Datas&&e.Datas.length>0?e.Datas.forEach((function(e){t.optionPersonsSelected.persons.push({studentID:e.Key["StudentID"],userID:e.Key["UserID"],studentName:e.Key["StudentName"]})})):e.Info&&t.$toast(e.Info)})).catch((function(){}))},getSubmitPerson:function(){var t=this;this.submitPersonList=[],this.$mainHttp.classPractise.answerSubmit({cipID:this.libraryInfo.taskID,psid:this.practiseInfo.id}).then((function(e){e.Datas&&e.Datas.length>0?e.Datas.forEach((function(e){t.submitPersonList.push({studentID:e.Key["StudentID"],userID:e["UserID"],studentName:e["StudentName"],answer:e.Key["PAContent"],master:e.Key["PAMaster"],score:e.Key["PAScore"],comment:e.Key["PAComment"],submitTime:e.Key["SubmitTime"],id:e.Key["PAID"]})})):e.Info&&t.$toast(e.Info)})).catch((function(){}))},toAnswer:function(t){this.submitPersonsShow=!0,this.submitPersonSelected=t},toScore:function(){var t=this;this.$mainHttp.classPractise.postSetComment({paid:this.submitPersonSelected.id,paScore:this.submitPersonSelected.score,comment:this.submitPersonSelected.comment}).then((function(e){e.Result?(t.submitPersonsShow=!1,t.$toast("更新评分成功"),t.getSubmitPerson()):e.Info?t.$toast(e.Info):t.$toast("更新评分失败")})).catch((function(){t.$toast("操作失败")}))},getSurveyPerson:function(){var t=this;this.$mainHttp.classPractise.recordSurvey({courseID:this.$store.getters.courseID,cipID:this.libraryInfo.taskID,psid:this.practiseInfo.id}).then((function(e){e.Result?t.surveyInfo={yes:e["YesMaster"],no:e["NoMaster"]}:e.Info&&t.$toast(e.Info)})).catch((function(){}))}}},r=o,c=(s("b34f"),s("2877")),l=Object(c["a"])(r,n,a,!1,null,"f970883a",null);e["default"]=l.exports},"8b72":function(t,e,s){},b34f:function(t,e,s){"use strict";var n=s("8b72"),a=s.n(n);a.a},d81d:function(t,e,s){"use strict";var n=s("23e7"),a=s("b727").map,i=s("1dde"),o=s("ae40"),r=i("map"),c=o("map");n({target:"Array",proto:!0,forced:!r||!c},{map:function(t){return a(this,t,arguments.length>1?arguments[1]:void 0)}})}}]);