(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-949e98f2"],{"09c9":function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"practise-edit"},[s("head-top",{attrs:{title:"第"+e.practiseInfo.index+"道习题编辑"}},[s("span",{attrs:{slot:"right"},on:{click:e.saveData},slot:"right"},[s("van-icon",{staticClass:"head-right",attrs:{name:"success"}})],1)]),s("van-cell-group",[s("van-field",{attrs:{name:"radio",label:"题型："},scopedSlots:e._u([{key:"input",fn:function(){return[s("van-radio-group",{attrs:{direction:"horizontal"},on:{change:e.changePractiseType},model:{value:e.practiseType,callback:function(t){e.practiseType=t},expression:"practiseType"}},e._l(e.practiseTypeOptions,(function(t,i){return s("van-radio",{key:i,staticStyle:{"margin-bottom":"6px"},attrs:{name:t.value}},[e._v(" "+e._s(t.label)+" ")])})),1)]},proxy:!0}])}),s("van-field",{attrs:{required:"",label:"标题：",placeholder:"请输入题目标题",type:"textarea",maxlength:"1000","error-message":e.practiseInfoErr.title,clearable:"",autosize:"","show-word-limit":""},model:{value:e.practiseInfo.title,callback:function(t){e.$set(e.practiseInfo,"title",t)},expression:"practiseInfo.title"}}),[1,2].indexOf(e.practiseInfo.type)>-1?s("van-field",{attrs:{name:"stepper",label:"选项："},scopedSlots:e._u([{key:"input",fn:function(){return[s("van-stepper",{attrs:{integer:"",min:"2",max:"8"},on:{change:e.optionsChange},model:{value:e.optionsNum,callback:function(t){e.optionsNum=t},expression:"optionsNum"}})]},proxy:!0}],null,!1,907547472)}):e._e(),[1,2].indexOf(e.practiseInfo.type)>-1?s("van-cell-group",{staticStyle:{"padding-left":"20px"}},e._l(e.practiseInfo.options,(function(t,i){return s("van-field",{key:i,attrs:{required:"",placeholder:"请输入选项内容",label:e.singleOptions[i]+"、",maxlength:"50",clearable:"","error-message":e.practiseInfoErr.options[i].label},model:{value:t.label,callback:function(s){e.$set(t,"label",s)},expression:"item.label"}})})),1):e._e(),s("van-field",{directives:[{name:"show",rawName:"v-show",value:1===e.practiseType,expression:"practiseType === 1"}],attrs:{required:"",label:"答案：","error-message":e.practiseInfoErr.answer},scopedSlots:e._u([{key:"input",fn:function(){return[s("van-radio-group",{attrs:{direction:"horizontal"},model:{value:e.practiseInfo.answer,callback:function(t){e.$set(e.practiseInfo,"answer",t)},expression:"practiseInfo.answer"}},e._l(e.optionsNum,(function(t){return s("van-radio",{key:t,staticStyle:{"margin-bottom":"6px"},attrs:{name:e.singleOptions[t-1]}},[e._v(" "+e._s(e.singleOptions[t-1])+" ")])})),1)]},proxy:!0}])}),s("van-field",{directives:[{name:"show",rawName:"v-show",value:2===e.practiseType,expression:"practiseType === 2"}],attrs:{required:"",label:"答案：","error-message":e.practiseInfoErr.multiAnswer},scopedSlots:e._u([{key:"input",fn:function(){return[s("van-checkbox-group",{attrs:{direction:"horizontal"},model:{value:e.practiseInfo.multiAnswer,callback:function(t){e.$set(e.practiseInfo,"multiAnswer",t)},expression:"practiseInfo.multiAnswer"}},e._l(e.optionsNum,(function(t){return s("van-checkbox",{key:t,staticStyle:{"margin-bottom":"6px"},attrs:{shape:"square",name:e.singleOptions[t-1],value:e.practiseInfo.multiAnswer.indexOf(e.singleOptions[t-1])>-1}},[e._v(" "+e._s(e.singleOptions[t-1])+" ")])})),1)]},proxy:!0}])}),s("van-field",{directives:[{name:"show",rawName:"v-show",value:3===e.practiseType,expression:"practiseType === 3"}],attrs:{required:"",label:"答案：","error-message":e.practiseInfoErr.answer},scopedSlots:e._u([{key:"input",fn:function(){return[s("van-radio-group",{attrs:{direction:"horizontal"},model:{value:e.practiseInfo.answer,callback:function(t){e.$set(e.practiseInfo,"answer",t)},expression:"practiseInfo.answer"}},e._l(e.judgeOptions,(function(t){return s("van-radio",{key:t,attrs:{name:t}},[e._v(" "+e._s(t)+" ")])})),1)]},proxy:!0}])}),s("van-field",{directives:[{name:"show",rawName:"v-show",value:4===e.practiseType,expression:"practiseType === 4"}],attrs:{label:"答案：",placeholder:"请输入题目答案",type:"textarea",maxlength:"1000","error-message":e.practiseInfoErr.answer,clearable:"",autosize:"","show-word-limit":""},model:{value:e.practiseInfo.answer,callback:function(t){e.$set(e.practiseInfo,"answer",t)},expression:"practiseInfo.answer"}}),s("van-field",{attrs:{name:"stepper",label:"分数：","error-message":e.practiseInfoErr.score},scopedSlots:e._u([{key:"input",fn:function(){return[s("van-stepper",{attrs:{integer:"",min:"0",max:"1000"},model:{value:e.practiseInfo.score,callback:function(t){e.$set(e.practiseInfo,"score",t)},expression:"practiseInfo.score"}})]},proxy:!0}])}),s("van-field",{attrs:{label:"解析：",placeholder:"请输入题目解析",type:"textarea",maxlength:"1000","error-message":e.practiseInfoErr.analysis,clearable:"",autosize:"","show-word-limit":""},model:{value:e.practiseInfo.analysis,callback:function(t){e.$set(e.practiseInfo,"analysis",t)},expression:"practiseInfo.analysis"}})],1)],1)},n=[],r=(s("4de4"),s("7db0"),s("4160"),s("c975"),s("a15b"),s("d81d"),s("fb6a"),s("a434"),s("ac1f"),s("5319"),s("1276"),s("159b"),{name:"practiseEdit",data:function(){return{optionsNum:4,libraryID:this.$store.getters.practiseLibrary?this.$store.getters.practiseLibrary.id:"",practiseSubject:this.$store.getters.practiseSubject,practiseType:1,practiseInfo:{id:"",index:1,title:"",answer:"",multiAnswer:[],analysis:"",type:1,optionsNum:4,score:0,options:[]},practiseInfoErr:{title:"",answer:"",multiAnswer:"",options:[]},practiseTypeOptions:[{label:"单选题",value:1},{label:"多选题",value:2},{label:"判断题",value:3},{label:"问答题",value:4}],singleOptions:["A","B","C","D","E","F","G","H"],judgeOptions:["对","错"]}},mounted:function(){var e=this;this.practiseInfo.index=this.practiseSubject.index,this.practiseSubject.id?(this.practiseInfo.id=this.practiseSubject.id,this.practiseInfo.title=this.practiseSubject.title,this.practiseInfo.type=this.practiseSubject.type,this.practiseType=this.practiseSubject.type,this.practiseInfo.optionsNum=this.practiseSubject.options.length,this.practiseInfo.score=this.practiseSubject.score,this.practiseInfo.analysis=this.practiseSubject.analysis,this.optionsChange(this.optionsNum),this.practiseInfo.options=this.practiseSubject.options.slice(0,this.practiseSubject.options.length),setTimeout((function(){e.practiseInfo.answer=e.practiseSubject.answer;var t=2===e.practiseInfo.type?e.practiseSubject.answer.split(""):[];e.practiseInfo.multiAnswer=t.slice(0,t.length)}),0)):this.optionsChange(this.optionsNum)},methods:{changePractiseType:function(e){this.practiseInfo.type=e,this.practiseType=e,this.practiseInfo.answer="",this.practiseInfo.multiAnswer=[]},optionsChange:function(e){var t=this;if(this.practiseInfo.options.length<e)for(var s=this.practiseInfo.options.length;s<e;s++)this.practiseInfo.options.push({id:"",value:this.singleOptions[s],label:""}),this.practiseInfoErr.options.push({label:""});else if(this.practiseInfo.options.length>e){var i=this.practiseInfo.options.filter((function(t,s){return s>=e}));this.practiseInfo.options.splice(e,this.practiseInfo.options.length-e),this.practiseInfoErr.options.splice(e,this.practiseInfo.options.length-e),this.practiseInfo.answer?i.find((function(e){return e.value===t.practiseInfo.answer}))&&(this.practiseInfo.answer=""):this.practiseInfo.multiAnswer.length>0&&this.practiseInfo.multiAnswer.forEach((function(e,s){i.find((function(t){return t.value===e}))&&t.practiseInfo.multiAnswer.splice(s,1)}))}},saveData:function(){var e=this;if(this.practiseInfoErr={title:"",answer:"",multiAnswer:"",options:this.practiseInfoErr.options.map((function(e){return{label:""}}))},""!==this.practiseInfo.title)if([1,3].indexOf(this.practiseInfo.type)>-1&&""===this.practiseInfo.answer)this.practiseInfoErr.answer="请选择答案";else if(2!==this.practiseInfo.type||0!==this.practiseInfo.multiAnswer.length){if([1,2].indexOf(this.practiseInfo.type)>-1)for(var t=0;t<this.practiseInfo.options.length;t++)if(""===this.practiseInfo.options[t].label)return void(this.practiseInfoErr.options[t].label="请输入选项内容");var s={PLID:this.libraryID,PSType:this.practiseInfo.type,PSContent:this.practiseInfo.title,PSAnswer:2===this.practiseInfo.type?this.practiseInfo.multiAnswer.sort().join(""):this.practiseInfo.answer,PSanalysis:this.practiseInfo.analysis,PSScore:this.practiseInfo.score};this.practiseInfo.id&&(s.PSID=this.practiseInfo.id);var i={Datas:[3,4].indexOf(this.practiseInfo.type)>-1?[]:this.practiseInfo.options.map((function(e){return{SOSerial:e.value,SOContent:e.label}}))},n={psdata:JSON.stringify(s),sodata:JSON.stringify(i)};this.practiseInfo.id?this.$mainHttp.classPractise.SubjectUpdate(n).then((function(t){t.Result?(e.$toast("保存成功"),e.$router.replace("/practise-library/edit")):t.Info?e.$toast(t.Info):e.$toast("保存失败")})).catch((function(){e.$toast("操作失败")})):this.$mainHttp.classPractise.SubjectAdd(n).then((function(t){t.Result?(e.$toast("保存成功"),e.$router.replace("/practise-library/edit")):t.Info?e.$toast(t.Info):e.$toast("保存失败")})).catch((function(){e.$toast("操作失败")}))}else this.practiseInfoErr.multiAnswer="请选择答案";else this.practiseInfoErr.title="请输入题目标题"}}}),a=r,o=(s("d0c6"),s("2877")),c=Object(o["a"])(a,i,n,!1,null,"235e867e",null);t["default"]=c.exports},"29a3":function(e,t,s){},"7db0":function(e,t,s){"use strict";var i=s("23e7"),n=s("b727").find,r=s("44d2"),a=s("ae40"),o="find",c=!0,p=a(o);o in[]&&Array(1)[o]((function(){c=!1})),i({target:"Array",proto:!0,forced:c||!p},{find:function(e){return n(this,e,arguments.length>1?arguments[1]:void 0)}}),r(o)},a434:function(e,t,s){"use strict";var i=s("23e7"),n=s("23cb"),r=s("a691"),a=s("50c4"),o=s("7b0b"),c=s("65f0"),p=s("8418"),l=s("1dde"),f=s("ae40"),u=l("splice"),h=f("splice",{ACCESSORS:!0,0:0,1:2}),d=Math.max,I=Math.min,m=9007199254740991,v="Maximum allowed length exceeded";i({target:"Array",proto:!0,forced:!u||!h},{splice:function(e,t){var s,i,l,f,u,h,b=o(this),y=a(b.length),g=n(e,y),w=arguments.length;if(0===w?s=i=0:1===w?(s=0,i=y-g):(s=w-2,i=I(d(r(t),0),y-g)),y+s-i>m)throw TypeError(v);for(l=c(b,i),f=0;f<i;f++)u=g+f,u in b&&p(l,f,b[u]);if(l.length=i,s<i){for(f=g;f<y-i;f++)u=f+i,h=f+s,u in b?b[h]=b[u]:delete b[h];for(f=y;f>y-i+s;f--)delete b[f-1]}else if(s>i)for(f=y-i;f>g;f--)u=f+i-1,h=f+s-1,u in b?b[h]=b[u]:delete b[h];for(f=0;f<s;f++)b[f+g]=arguments[f+2];return b.length=y-i+s,l}})},d0c6:function(e,t,s){"use strict";var i=s("29a3"),n=s.n(i);n.a},d81d:function(e,t,s){"use strict";var i=s("23e7"),n=s("b727").map,r=s("1dde"),a=s("ae40"),o=r("map"),c=a("map");i({target:"Array",proto:!0,forced:!o||!c},{map:function(e){return n(this,e,arguments.length>1?arguments[1]:void 0)}})}}]);