(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-22d59c94"],{"70dc":function(t,e,i){"use strict";var a=i("d071"),n=i.n(a);n.a},"828f":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"course-board-note"},[i("head-top",{attrs:{title:"板书分享"}}),i("van-pull-refresh",{staticClass:"pull_fresh",attrs:{"head-height":80},on:{refresh:t.getBoardNoteList},model:{value:t.isLoading,callback:function(e){t.isLoading=e},expression:"isLoading"}},[t.boardNoteList&&t.boardNoteList.length>0?i("div",{staticClass:"flex-wrap-between sub_module"},[t._l(t.boardNoteList,(function(e,a){return i("div",{key:a,staticClass:"image_card van-hairline--surround"},[i("r-image",{attrs:{width:"42vw",height:"30vw",src:e.imgSrc}}),i("div",[t._v(t._s(e.createTime))])],1)})),i("span",{staticStyle:{width:"42vw"}})],2):i("r-lack-data")],1),i("van-popup",{attrs:{position:"bottom"},model:{value:t.editVisible,callback:function(e){t.editVisible=e},expression:"editVisible"}},[i("div",{staticClass:"sub_nav"},[i("span",[t._v("板书分享")])]),i("van-field",{attrs:{name:"uploader",label:"上传图片"},scopedSlots:t._u([{key:"input",fn:function(){return[i("van-uploader",{attrs:{"max-count":1,"before-read":t.beforeRead,"after-read":t.afterRead},model:{value:t.uploader,callback:function(e){t.uploader=e},expression:"uploader"}})]},proxy:!0}])}),i("van-button",{staticStyle:{width:"100%"},attrs:{type:"info"},on:{click:t.pictureSubmit}},[t._v("确定")])],1)],1)},n=[],o=(i("4160"),i("a434"),i("159b"),i("cb60")),r=i("08f3"),s=i("6828"),c={name:"boardNote",components:{RImage:o["a"]},data:function(){return{groupIndex:0,boardNoteList:[],isLoading:!1,editVisible:!1,uploader:[]}},mounted:function(){this.getBoardNoteList()},methods:{getBoardNoteList:function(){var t=this;this.boardNoteList=[],this.isLoading=!0,this.$mainHttp.boardNote.dataList({ciID:this.$store.getters.courseID}).then((function(e){e.Result?(e.Datas.sort((function(t,e){return t["CreateTime"]>e["CreateTime"]?-1:1})),e.Datas.forEach((function(e){t.boardNoteList.push({title:e["BNTitle"],createTime:Object(s["a"])(e["CreateTime"],"yyyy-MM-dd hh:mm"),imgSrc:t.$mainHttp.common.picture(e["BNContent"],r["e"].BoardNote),id:e["BNID"]})}))):e.Info&&t.$toast(e.Info),t.isLoading=!1})).catch((function(){t.isLoading=!1}))},randomIndex:function(t){return Math.round(t*Math.random())},toAdd:function(){this.uploader=[],this.editVisible=!0},beforeRead:function(t){return"image/jpeg"===t.type||(this.$toast("请上传 jpg 格式图片"),!1)},afterRead:function(t){t.status="uploading",t.message="上传中...",setTimeout((function(){t.status="success",t.message=""}),1e3)},pictureSubmit:function(){console.log(this.uploader);var t=new Date,e=t.getHours(),i=t.getMinutes(),a=t.getSeconds();this.boardNoteList.splice(0,0,{id:"",imgSrc:this.uploader[0].content,createTime:(e>9?e:"0"+e)+":"+(i>9?i:"0"+i)+":"+(a>9?a:"0"+a)}),this.editVisible=!1}},watch:{"$store.getters.noteFresh":function(t,e){t!==e&&t&&this.getBoardNoteList()}}},d=c,u=(i("70dc"),i("2877")),l=Object(u["a"])(d,a,n,!1,null,"066dec7e",null);e["default"]=l.exports},a434:function(t,e,i){"use strict";var a=i("23e7"),n=i("23cb"),o=i("a691"),r=i("50c4"),s=i("7b0b"),c=i("65f0"),d=i("8418"),u=i("1dde"),l=i("ae40"),f=u("splice"),p=l("splice",{ACCESSORS:!0,0:0,1:2}),h=Math.max,g=Math.min,m=9007199254740991,b="Maximum allowed length exceeded";a({target:"Array",proto:!0,forced:!f||!p},{splice:function(t,e){var i,a,u,l,f,p,v=s(this),w=r(v.length),y=n(t,w),x=arguments.length;if(0===x?i=a=0:1===x?(i=0,a=w-y):(i=x-2,a=g(h(o(e),0),w-y)),w+i-a>m)throw TypeError(b);for(u=c(v,a),l=0;l<a;l++)f=y+l,f in v&&d(u,l,v[f]);if(u.length=a,i<a){for(l=y;l<w-a;l++)f=l+a,p=l+i,f in v?v[p]=v[f]:delete v[p];for(l=w;l>w-a+i;l--)delete v[l-1]}else if(i>a)for(l=w-a;l>y;l--)f=l+a-1,p=l+i-1,f in v?v[p]=v[f]:delete v[p];for(l=0;l<i;l++)v[l+y]=arguments[l+2];return v.length=w-a+i,u}})},cb60:function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("van-image",{style:{width:t.width,height:t.height},attrs:{fit:t.fit,src:t.src},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.preview(e)}},scopedSlots:t._u([{key:"loading",fn:function(){return[i("van-loading",{attrs:{type:"spinner",size:"20"}})]},proxy:!0},{key:"error",fn:function(){return[t._v(t._s(t.errMsg))]},proxy:!0}])}),i("van-image-preview",{attrs:{showIndex:!1,images:t.images},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}})],1)},n=[],o=(i("b0c0"),i("ade3")),r=i("1e55"),s={name:"r-image",components:Object(o["a"])({},r["ImagePreview"].Component.name,r["ImagePreview"].Component),props:{width:{type:String,default:"100px"},height:{type:String,default:"100px"},fit:{type:String,default:"scale-down"},src:{type:String,default:""},errMsg:{type:String,default:"加载失败"}},data:function(){return{show:!1,images:[]}},methods:{preview:function(){this.images=[this.src],this.show=!0}}},c=s,d=i("2877"),u=Object(d["a"])(c,a,n,!1,null,null,null),l=u.exports;e["a"]=l},d071:function(t,e,i){}}]);